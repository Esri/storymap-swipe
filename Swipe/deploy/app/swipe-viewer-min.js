(function(a){function b(a,b){return a.currentStyle&&a.currentStyle[b]||a.style[b]}function d(a){var d=$(a).css("clip")||"";if(!d){var f=b(a,"clipTop"),k=b(a,"clipRight"),l=b(a,"clipBottom"),a=b(a,"clipLeft");f&&(k&&l&&a)&&(d="rect("+f+" "+k+" "+l+" "+a+")")}return d.replace(/,/g," ")}a.fx.step.clip=function(a){if(0===a.pos){var b=/rect\(([0-9\.]{1,})(px|em)[,]?\s+([0-9\.]{1,})(px|em)[,]?\s+([0-9\.]{1,})(px|em)[,]?\s+([0-9\.]{1,})(px|em)\)/;a.start=b.exec(d(a.elem));"string"===typeof a.end&&(a.end=
b.exec(a.end.replace(/,/g," ")))}if(a.start&&a.end){for(var b=[],f=[],k=a.start.length,l=a.end.length,j="em"==a.start[m+1]?1.333*parseInt($(a.elem).css("fontSize"))*parseInt(a.start[m]):1,m=1;m<k;m+=2)b.push(parseInt(j*a.start[m]));for(m=1;m<l;m+=2)f.push(parseInt(j*a.end[m]));a.elem.style.clip="rect("+parseInt(a.pos*(f[0]-b[0])+b[0])+"px "+parseInt(a.pos*(f[1]-b[1])+b[1])+"px "+parseInt(a.pos*(f[2]-b[2])+b[2])+"px "+parseInt(a.pos*(f[3]-b[3])+b[3])+"px)"}}})(jQuery);var SwipeView=function(a,b){function d(a){if(""===g)return a;a=a.charAt(0).toUpperCase()+a.substr(1);return g+a}var e=b.createElement("div").style,g;a:{for(var f=["t","webkitT","MozT","msT","OT"],k,l=0,j=f.length;l<j;l++)if(k=f[l]+"ransform",k in e){g=f[l].substr(0,f[l].length-1);break a}g=!1}var m=g?"-"+g.toLowerCase()+"-":"",n=d("transform"),s=d("transitionDuration"),e=d("perspective")in e,p="ontouchstart"in a;d("transition");var q=e?" translateZ(0)":"",t="onorientationchange"in a?"orientationchange":
"resize",r=p?"touchstart":"mousedown",o=p?"touchmove":"mousemove",v=p?"touchend":"mouseup",C=p?"touchcancel":"mouseup",x;x=!1===g?!1:{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"}[g];e=function(e,d){var f,l,k;this.wrapper="string"==typeof e?b.querySelector(e):e;this.options={text:null,numberOfPages:3,snapThreshold:null,hastyPageFlip:!1,loop:!0};for(f in d)this.options[f]=d[f];this.wrapper.style.overflow="hidden";this.wrapper.style.position=
"relative";this.masterPages=[];l=b.createElement("div");l.id="swipeview-slider";l.style.cssText="position:relative;top:0;height:100%;width:100%;"+m+"transition-duration:0;"+m+"transform:translateZ(0);"+m+"transition-timing-function:ease-out";this.wrapper.appendChild(l);this.slider=l;this.refreshSize();for(f=-1;2>f;f++)l=b.createElement("div"),l.id="swipeview-masterpage-"+(f+1),l.style.cssText=m+"transform:translateZ(0);position:absolute;top:0;height:100%;width:100%;left:"+100*f+"%",l.dataset||(l.dataset=
{}),k=-1==f?this.options.numberOfPages-1:f,l.dataset.pageIndex=k,l.dataset.upcomingPageIndex=k,!this.options.loop&&-1==f&&(l.style.visibility="hidden"),this.slider.appendChild(l),this.masterPages.push(l);f=this.masterPages[1].className;this.masterPages[1].className=!f?"swipeview-active":f+" swipeview-active";a.addEventListener(t,this,!1);this.wrapper.addEventListener(r,this,!1);this.wrapper.addEventListener(o,this,!1);this.wrapper.addEventListener(v,this,!1);this.slider.addEventListener(x,this,!1);
"O"==g&&this.slider.addEventListener(x.toLowerCase(),this,!1)};e.prototype={currentMasterPage:1,x:0,page:0,pageIndex:0,customEvents:[],onFlip:function(a){this.wrapper.addEventListener("swipeview-flip",a,!1);this.customEvents.push(["flip",a])},onMoveOut:function(a){this.wrapper.addEventListener("swipeview-moveout",a,!1);this.customEvents.push(["moveout",a])},onMoveIn:function(a){this.wrapper.addEventListener("swipeview-movein",a,!1);this.customEvents.push(["movein",a])},onTouchStart:function(a){this.wrapper.addEventListener("swipeview-touchstart",
a,!1);this.customEvents.push(["touchstart",a])},destroy:function(){for(;this.customEvents.length;)this.wrapper.removeEventListener("swipeview-"+this.customEvents[0][0],this.customEvents[0][1],!1),this.customEvents.shift();a.removeEventListener(t,this,!1);this.wrapper.removeEventListener(r,this,!1);this.wrapper.removeEventListener(o,this,!1);this.wrapper.removeEventListener(v,this,!1);this.slider.removeEventListener(x,this,!1)},refreshSize:function(){this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=
this.wrapper.clientHeight;this.pageWidth=this.wrapperWidth;this.maxX=-this.options.numberOfPages*this.pageWidth+this.wrapperWidth;this.snapThreshold=null===this.options.snapThreshold?Math.round(0.15*this.pageWidth):/%/.test(this.options.snapThreshold)?Math.round(this.pageWidth*this.options.snapThreshold.replace("%","")/100):this.options.snapThreshold},updatePageCount:function(a){this.options.numberOfPages=a;this.maxX=-this.options.numberOfPages*this.pageWidth+this.wrapperWidth},goToPage:function(a){var b;
this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/,"");for(b=0;3>b;b++)className=this.masterPages[b].className,/(^|\s)swipeview-loading(\s|$)/.test(className)||(this.masterPages[b].className=!className?"swipeview-loading":className+" swipeview-loading");this.pageIndex=this.page=a=0>a?0:a>this.options.numberOfPages-1?this.options.numberOfPages-1:a;this.slider.style[s]="0s";this.__pos(-a*this.pageWidth);this.currentMasterPage=
this.page+1-3*Math.floor((this.page+1)/3);this.masterPages[this.currentMasterPage].className+=" swipeview-active";0===this.currentMasterPage?(this.masterPages[2].style.left=100*this.page-100+"%",this.masterPages[0].style.left=100*this.page+"%",this.masterPages[1].style.left=100*this.page+100+"%",this.masterPages[2].dataset.upcomingPageIndex=0===this.page?this.options.numberOfPages-1:this.page-1,this.masterPages[0].dataset.upcomingPageIndex=this.page,this.masterPages[1].dataset.upcomingPageIndex=this.page==
this.options.numberOfPages-1?0:this.page+1):1==this.currentMasterPage?(this.masterPages[0].style.left=100*this.page-100+"%",this.masterPages[1].style.left=100*this.page+"%",this.masterPages[2].style.left=100*this.page+100+"%",this.masterPages[0].dataset.upcomingPageIndex=0===this.page?this.options.numberOfPages-1:this.page-1,this.masterPages[1].dataset.upcomingPageIndex=this.page,this.masterPages[2].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1):(this.masterPages[1].style.left=
100*this.page-100+"%",this.masterPages[2].style.left=100*this.page+"%",this.masterPages[0].style.left=100*this.page+100+"%",this.masterPages[1].dataset.upcomingPageIndex=0===this.page?this.options.numberOfPages-1:this.page-1,this.masterPages[2].dataset.upcomingPageIndex=this.page,this.masterPages[0].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1);this.__flip()},next:function(){if(this.options.loop||this.x!=this.maxX)this.directionX=-1,this.x-=1,this.__checkPosition()},
prev:function(){if(this.options.loop||0!==this.x)this.directionX=1,this.x+=1,this.__checkPosition()},handleEvent:function(a){switch(a.type){case r:this.__start(a);break;case o:this.__move(a);break;case C:case v:this.__end(a);break;case t:this.__resize();break;case x:case "otransitionend":a.target==this.slider&&!this.options.hastyPageFlip&&this.__flip()}},__pos:function(a){this.x=a;this.slider.style[n]="translate("+a+"px,0)"+q},__resize:function(){this.refreshSize();this.slider.style[s]="0s";this.__pos(-this.page*
this.pageWidth)},__start:function(a){this.initiated||(a=p?a.touches[0]:a,this.initiated=!0,this.thresholdExceeded=this.moved=!1,this.startX=a.pageX,this.startY=a.pageY,this.pointX=a.pageX,this.pointY=a.pageY,this.directionX=this.stepsY=this.stepsX=0,this.directionLocked=!1,this.slider.style[s]="0s",this.__event("touchstart"))},__move:function(a){if(this.initiated){var b=p?a.touches[0]:a,e=b.pageX-this.pointX,d=b.pageY-this.pointY,f=this.x+e,g=Math.abs(b.pageX-this.startX);this.moved=!0;this.pointX=
b.pageX;this.pointY=b.pageY;this.directionX=0<e?1:0>e?-1:0;this.stepsX+=Math.abs(e);this.stepsY+=Math.abs(d);if(!(10>this.stepsX&&10>this.stepsY))if(!this.directionLocked&&this.stepsY>this.stepsX)this.initiated=!1;else{a.preventDefault();this.directionLocked=!0;if(!this.options.loop&&(0<f||f<this.maxX))f=this.x+e/2;!this.thresholdExceeded&&g>=this.snapThreshold?(this.thresholdExceeded=!0,this.__event("moveout")):this.thresholdExceeded&&g<this.snapThreshold&&(this.thresholdExceeded=!1,this.__event("movein"));
this.__pos(f)}}},__end:function(a){if(this.initiated&&(a=Math.abs((p?a.changedTouches[0]:a).pageX-this.startX),this.initiated=!1,this.moved)){if(!this.options.loop&&(0<this.x||this.x<this.maxX))a=0,this.__event("movein");a<this.snapThreshold?(this.slider.style[s]=Math.floor(300*a/this.snapThreshold)+"ms",this.__pos(-this.page*this.pageWidth)):this.__checkPosition()}},__checkPosition:function(){var a,b,e;this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/,
"");0<this.directionX?(this.page=-Math.ceil(this.x/this.pageWidth),this.currentMasterPage=this.page+1-3*Math.floor((this.page+1)/3),this.pageIndex=0===this.pageIndex?this.options.numberOfPages-1:this.pageIndex-1,a=this.currentMasterPage-1,a=0>a?2:a,this.masterPages[a].style.left=100*this.page-100+"%",b=this.page-1):(this.page=-Math.floor(this.x/this.pageWidth),this.currentMasterPage=this.page+1-3*Math.floor((this.page+1)/3),this.pageIndex=this.pageIndex==this.options.numberOfPages-1?0:this.pageIndex+
1,a=this.currentMasterPage+1,a=2<a?0:a,this.masterPages[a].style.left=100*this.page+100+"%",b=this.page+1);e=this.masterPages[this.currentMasterPage].className;/(^|\s)swipeview-active(\s|$)/.test(e)||(this.masterPages[this.currentMasterPage].className=!e?"swipeview-active":e+" swipeview-active");e=this.masterPages[a].className;/(^|\s)swipeview-loading(\s|$)/.test(e)||(this.masterPages[a].className=!e?"swipeview-loading":e+" swipeview-loading");b-=Math.floor(b/this.options.numberOfPages)*this.options.numberOfPages;
this.masterPages[a].dataset.upcomingPageIndex=b;newX=-this.page*this.pageWidth;this.slider.style[s]=Math.floor(500*Math.abs(this.x-newX)/this.pageWidth)+"ms";this.options.loop||(this.masterPages[a].style.visibility=0===newX||newX==this.maxX?"hidden":"");this.x==newX?this.__flip():(this.__pos(newX),this.options.hastyPageFlip&&this.__flip())},__flip:function(){this.__event("flip");for(var a=0;3>a;a++)this.masterPages[a].className=this.masterPages[a].className.replace(/(^|\s)swipeview-loading(\s|$)/,
""),this.masterPages[a].dataset.pageIndex=this.masterPages[a].dataset.upcomingPageIndex},__event:function(a){var e=b.createEvent("Event");e.initEvent("swipeview-"+a,!0,!0);this.wrapper.dispatchEvent(e)}};return e}(window,document);(function(a,b){function d(b,d){var f,g,k,p=b.nodeName.toLowerCase();return"area"===p?(f=b.parentNode,g=f.name,b.href&&g&&"map"===f.nodeName.toLowerCase()?(k=a("img[usemap=#"+g+"]")[0],!!k&&e(k)):!1):(/input|select|textarea|button|object/.test(p)?!b.disabled:"a"===p?b.href||d:d)&&e(b)}function e(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var g=0,f=/^ui-id-\d+$/;a.ui=a.ui||{};a.extend(a.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,
COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({focus:function(b){return function(e,d){return"number"==typeof e?this.each(function(){var b=this;setTimeout(function(){a(b).focus();d&&d.call(b)},e)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||
/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(e){if(e!==b)return this.css("zIndex",e);if(this.length)for(var d,
f,e=a(this[0]);e.length&&e[0]!==document;){if(d=e.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(f=parseInt(e.css("zIndex"),10),!isNaN(f)&&0!==f))return f;e=e.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++g)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}});a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(e){return!!a.data(e,b)}}):
function(b,e,d){return!!a.data(b,d[3])},focusable:function(b){return d(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var e=a.attr(b,"tabindex"),f=isNaN(e);return(f||0<=e)&&d(b,!f)}});a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(e,d){function f(b,e,d,k){return a.each(g,function(){e-=parseFloat(a.css(b,"padding"+this))||0;d&&(e-=parseFloat(a.css(b,"border"+this+"Width"))||0);k&&(e-=parseFloat(a.css(b,"margin"+this))||0)}),e}var g="Width"===d?["Left","Right"]:["Top","Bottom"],
k=d.toLowerCase(),p={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(e){return e===b?p["inner"+d].call(this):this.each(function(){a(this).css(k,f(this,e)+"px")})};a.fn["outer"+d]=function(b,e){return"number"!=typeof b?p["outer"+d].call(this,b):this.each(function(){a(this).css(k,f(this,b,!0,e)+"px")})}});a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});
if(a("<a>").data("a-b","a").removeData("a-b").data("a-b")){var k=a.fn.removeData;a.fn.removeData=function(b){return arguments.length?k.call(this,a.camelCase(b)):k.call(this)}}a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());a.support.selectstart="onselectstart"in document.createElement("div");a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});
a.extend(a.ui,{plugin:{add:function(b,e,d){var f,b=a.ui[b].prototype;for(f in d)b.plugins[f]=b.plugins[f]||[],b.plugins[f].push([e,d[f]])},call:function(a,b,e){var d=a.plugins[b];if(d&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;d.length>b;b++)a.options[d[b][0]]&&d[b][1].apply(a.element,e)}},hasScroll:function(b,e){if("hidden"===a(b).css("overflow"))return!1;var d=e&&"left"===e?"scrollLeft":"scrollTop";return 0<b[d]?!0:(b[d]=1,b[d]=0,!1)}})})(jQuery);
(function(a,b){var d=0,e=Array.prototype.slice,g=a.cleanData;a.cleanData=function(b){for(var e,d=0;null!=(e=b[d]);d++)try{a(e).triggerHandler("remove")}catch(j){}g(b)};a.widget=function(e,d,g){var j,m,n,s,p={},q=e.split(".")[0],e=e.split(".")[1];j=q+"-"+e;g||(g=d,d=a.Widget);a.expr[":"][j.toLowerCase()]=function(b){return!!a.data(b,j)};a[q]=a[q]||{};m=a[q][e];n=a[q][e]=function(a,e){return this._createWidget?(arguments.length&&this._createWidget(a,e),b):new n(a,e)};a.extend(n,m,{version:g.version,
_proto:a.extend({},g),_childConstructors:[]});s=new d;s.options=a.widget.extend({},s.options);a.each(g,function(e,f){var g;if(a.isFunction(f)){var l=function(){return d.prototype[e].apply(this,arguments)},j=function(a){return d.prototype[e].apply(this,a)};g=(p[e]=function(){var a,b=this._super,e=this._superApply;return this._super=l,this._superApply=j,a=f.apply(this,arguments),this._super=b,this._superApply=e,a},b)}else g=(p[e]=f,b);return g});n.prototype=a.widget.extend(s,{widgetEventPrefix:m?s.widgetEventPrefix:
e},p,{constructor:n,namespace:q,widgetName:e,widgetFullName:j});m?(a.each(m._childConstructors,function(b,e){var d=e.prototype;a.widget(d.namespace+"."+d.widgetName,n,e._proto)}),delete m._childConstructors):d._childConstructors.push(n);a.widget.bridge(e,n)};a.widget.extend=function(d){for(var g,l,j=e.call(arguments,1),m=0,n=j.length;n>m;m++)for(g in j[m])l=j[m][g],j[m].hasOwnProperty(g)&&l!==b&&(d[g]=a.isPlainObject(l)?a.isPlainObject(d[g])?a.widget.extend({},d[g],l):a.widget.extend({},l):l);return d};
a.widget.bridge=function(d,g){var l=g.prototype.widgetFullName||d;a.fn[d]=function(j){var m="string"==typeof j,n=e.call(arguments,1),s=this;return j=!m&&n.length?a.widget.extend.apply(null,[j].concat(n)):j,m?this.each(function(){var e,g=a.data(this,l);return g?a.isFunction(g[j])&&"_"!==j.charAt(0)?(e=g[j].apply(g,n),e!==g&&e!==b?(s=e&&e.jquery?s.pushStack(e.get()):e,!1):b):a.error("no such method '"+j+"' for "+d+" widget instance"):a.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+
j+"'")}):this.each(function(){var b=a.data(this,l);b?b.option(j||{})._init():a.data(this,l,new g(j,this))}),s}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,e){e=a(e||this.defaultElement||this)[0];this.element=a(e);this.uuid=d++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),b);
this.bindings=a();this.hoverable=a();this.focusable=a();e!==this&&(a.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===e&&this.destroy()}}),this.document=a(e.style?e.ownerDocument:e.document||e),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();
this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(e,d){var g,j,m,n=e;
if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof e)if(n={},g=e.split("."),e=g.shift(),g.length){j=n[e]=a.widget.extend({},this.options[e]);for(m=0;g.length-1>m;m++)j[g[m]]=j[g[m]]||{},j=j[g[m]];if(e=g.pop(),d===b)return j[e]===b?null:j[e];j[e]=d}else{if(d===b)return this.options[e]===b?null:this.options[e];n[e]=d}return this._setOptions(n),this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=
b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,d,g){var j,m=this;"boolean"!=typeof e&&(g=d,d=e,e=!1);g?(d=j=a(d),this.bindings=this.bindings.add(d)):(g=d,d=this.element,j=this.widget());a.each(g,function(g,
l){function p(){return e||!0!==m.options.disabled&&!a(this).hasClass("ui-state-disabled")?("string"==typeof l?m[l]:l).apply(m,arguments):b}"string"!=typeof l&&(p.guid=l.guid=l.guid||p.guid||a.guid++);var q=g.match(/^(\w+)\s*(.*)$/),t=q[1]+m.eventNamespace;(q=q[2])?j.delegate(q,t,p):d.bind(t,p)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var e=this;return setTimeout(function(){return("string"==typeof a?
e[a]:a).apply(e,arguments)},b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,e,d){var g,m=this.options[b];
if(d=d||{},e=a.Event(e),e.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),e.target=this.element[0],b=e.originalEvent)for(g in b)g in e||(e[g]=b[g]);return this.element.trigger(e,d),!(a.isFunction(m)&&!1===m.apply(this.element[0],[e].concat(d))||e.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,e){a.Widget.prototype["_"+b]=function(d,g,m){"string"==typeof g&&(g={effect:g});var n,s=g?!0===g||"number"==typeof g?e:g.effect||e:b,g=g||{};"number"==typeof g&&
(g={duration:g});n=!a.isEmptyObject(g);g.complete=m;g.delay&&d.delay(g.delay);n&&a.effects&&a.effects.effect[s]?d[b](g):s!==b&&d[s]?d[s](g.duration,g.easing,m):d.queue(function(e){a(this)[b]();m&&m.call(d[0]);e()})}})})(jQuery);
(function(a){var b=!1;a(document).mouseup(function(){b=!1});a.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(e){return!0===a.data(e.target,b.widgetName+".preventClickEvent")?(a.removeData(e.target,b.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1):void 0});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!b){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var e=this,g=1===d.which,f="string"==typeof this.options.cancel&&d.target.nodeName?a(d.target).closest(this.options.cancel).length:!1;return g&&!f&&this._mouseCapture(d)?(this.mouseDelayMet=
!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=!1!==this._mouseStart(d),!this._mouseStarted)?(d.preventDefault(),!0):(!0===a.data(d.target,this.widgetName+".preventClickEvent")&&a.removeData(d.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return e._mouseMove(a)},this._mouseUpDelegate=function(a){return e._mouseUp(a)},
a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),d.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b),this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),
!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},
_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(a){function b(a){return parseInt(a,10)||0}function d(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,d,f,k,l,j=this,m=this.options;if(this.element.addClass("ui-resizable"),
a.extend(this,{_aspectRatio:!!m.aspectRatio,aspectRatio:m.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:m.helper||m.ghost||m.animate?m.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),
left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),
this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=m.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),
this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");b=this.handles.split(",");this.handles={};for(d=0;b.length>d;d++)f=a.trim(b[d]),l="ui-resizable-"+f,k=a("<div class='ui-resizable-handle "+l+"'></div>"),k.css({zIndex:m.zIndex}),"se"===f&&k.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(k)}this._renderAxis=function(b){var e,d,g,f,b=b||this.element;for(e in this.handles)this.handles[e].constructor===
String&&(this.handles[e]=a(this.handles[e],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[e],this.element),f=/sw|ne|nw|se|n|s/.test(e)?d.outerHeight():d.outerWidth(),g=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),b.css(g,f),this._proportionallyResize()),a(this.handles[e]).length};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){j.resizing||(this.className&&(k=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),j.axis=k&&k[1]?k[1]:"se")});m.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){m.disabled||(a(this).removeClass("ui-resizable-autohide"),j._handles.show())}).mouseleave(function(){m.disabled||j.resizing||(a(this).addClass("ui-resizable-autohide"),j._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();
var b,d=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(d(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),d(this.originalElement),
this},_mouseCapture:function(b){var d,f,k=!1;for(d in this.handles)f=a(this.handles[d])[0],(f===b.target||a.contains(f,b.target))&&(k=!0);return!this.options.disabled&&k},_mouseStart:function(e){var d,f,k,l=this.options,j=this.element.position(),m=this.element;return this.resizing=!0,/absolute/.test(m.css("position"))?m.css({position:"absolute",top:m.css("top"),left:m.css("left")}):m.is(".ui-draggable")&&m.css({position:"absolute",top:j.top,left:j.left}),this._renderProxy(),d=b(this.helper.css("left")),
f=b(this.helper.css("top")),l.containment&&(d+=a(l.containment).scrollLeft()||0,f+=a(l.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:f},this.size=this._helper?{width:m.outerWidth(),height:m.outerHeight()}:{width:m.width(),height:m.height()},this.originalSize=this._helper?{width:m.outerWidth(),height:m.outerHeight()}:{width:m.width(),height:m.height()},this.originalPosition={left:d,top:f},this.sizeDiff={width:m.outerWidth()-m.width(),height:m.outerHeight()-
m.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof l.aspectRatio?l.aspectRatio:this.originalSize.width/this.originalSize.height||1,k=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===k?this.axis+"-resize":k),m.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(b){var d,f=this.helper,k={},l=this.originalMousePosition,j=this.position.top,m=this.position.left,n=this.size.width,s=this.size.height,
p=b.pageX-l.left||0,l=b.pageY-l.top||0,q=this._change[this.axis];return q?(d=q.apply(this,[b,p,l]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(d=this._updateRatio(d,b)),d=this._respectSize(d,b),this._updateCache(d),this._propagate("resize",b),this.position.top!==j&&(k.top=this.position.top+"px"),this.position.left!==m&&(k.left=this.position.left+"px"),this.size.width!==n&&(k.width=this.size.width+"px"),this.size.height!==s&&(k.height=this.size.height+"px"),f.css(k),
!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(k)||this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var d,f,k,l,j,m,n,s=this.options;return this._helper&&(d=this._proportionallyResizeElements,f=d.length&&/textarea/i.test(d[0].nodeName),k=f&&a.ui.hasScroll(d[0],"left")?0:this.sizeDiff.height,l=f?0:this.sizeDiff.width,j={width:this.helper.width()-l,height:this.helper.height()-k},m=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,n=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,s.animate||this.element.css(a.extend(j,{top:n,left:m})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!s.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,
f,k,l,j;j=this.options;j={minWidth:d(j.minWidth)?j.minWidth:0,maxWidth:d(j.maxWidth)?j.maxWidth:1/0,minHeight:d(j.minHeight)?j.minHeight:0,maxHeight:d(j.maxHeight)?j.maxHeight:1/0};(this._aspectRatio||a)&&(b=j.minHeight*this.aspectRatio,k=j.minWidth/this.aspectRatio,f=j.maxHeight*this.aspectRatio,l=j.maxWidth/this.aspectRatio,b>j.minWidth&&(j.minWidth=b),k>j.minHeight&&(j.minHeight=k),j.maxWidth>f&&(j.maxWidth=f),j.maxHeight>l&&(j.maxHeight=l));this._vBoundaries=j},_updateCache:function(a){this.offset=
this.helper.offset();d(a.left)&&(this.position.left=a.left);d(a.top)&&(this.position.top=a.top);d(a.height)&&(this.size.height=a.height);d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,f=this.size,k=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===k&&(a.left=b.left+(f.width-a.width),a.top=null),"nw"===k&&(a.top=b.top+(f.height-a.height),a.left=b.left+(f.width-a.width)),a},_respectSize:function(a){var b=
this._vBoundaries,f=this.axis,k=d(a.width)&&b.maxWidth&&b.maxWidth<a.width,l=d(a.height)&&b.maxHeight&&b.maxHeight<a.height,j=d(a.width)&&b.minWidth&&b.minWidth>a.width,m=d(a.height)&&b.minHeight&&b.minHeight>a.height,n=this.originalPosition.left+this.originalSize.width,s=this.position.top+this.size.height,p=/sw|nw|w/.test(f),f=/nw|ne|n/.test(f);return j&&(a.width=b.minWidth),m&&(a.height=b.minHeight),k&&(a.width=b.maxWidth),l&&(a.height=b.maxHeight),j&&p&&(a.left=n-b.minWidth),k&&p&&(a.left=n-b.maxWidth),
m&&f&&(a.top=s-b.minHeight),l&&f&&(a.top=s-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,d,k,l,j=this.helper||this.element;for(a=0;this._proportionallyResizeElements.length>a;a++){if(l=this._proportionallyResizeElements[a],!this.borderDif){this.borderDif=[];d=[l.css("borderTopWidth"),l.css("borderRightWidth"),l.css("borderBottomWidth"),l.css("borderLeftWidth")];
k=[l.css("paddingTop"),l.css("paddingRight"),l.css("paddingBottom"),l.css("paddingLeft")];for(b=0;d.length>b;b++)this.borderDif[b]=(parseInt(d[b],10)||0)+(parseInt(k[b],10)||0)}l.css({height:j.height()-this.borderDif[0]-this.borderDif[2]||0,width:j.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++b.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,d){return{top:this.originalPosition.top+d,height:this.originalSize.height-d}},s:function(a,b,d){return{height:this.originalSize.height+
d}},se:function(b,d,f){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,d,f]))},sw:function(b,d,f){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,d,f]))},ne:function(b,d,f){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,d,f]))},nw:function(b,d,f){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,d,f]))}},_propagate:function(b,d){a.ui.plugin.call(this,b,[d,this.ui()]);
"resize"!==b&&this._trigger(b,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.ui.plugin.add("resizable","animate",{stop:function(b){var d=a(this).data("ui-resizable"),f=d.options,k=d._proportionallyResizeElements,l=k.length&&/textarea/i.test(k[0].nodeName),j=l&&a.ui.hasScroll(k[0],"left")?0:d.sizeDiff.height,l=
{width:d.size.width-(l?0:d.sizeDiff.width),height:d.size.height-j},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,m=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(l,m&&j?{top:m,left:j}:{}),{duration:f.animateDuration,easing:f.animateEasing,step:function(){var f={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),
10)};k&&k.length&&a(k[0]).css({width:f.width,height:f.height});d._updateCache(f);d._propagate("resize",b)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var d,g,f,k,l,j,m,n=a(this).data("ui-resizable"),s=n.element,p=n.options.containment;(s=p instanceof a?p.get(0):/parent/.test(p)?s.parent().get(0):p)&&(n.containerElement=a(s),/document/.test(p)||p===document?(n.containerOffset={left:0,top:0},n.containerPosition={left:0,top:0},n.parentData={element:a(document),left:0,top:0,width:a(document).width(),
height:a(document).height()||document.body.parentNode.scrollHeight}):(d=a(s),g=[],a(["Top","Right","Left","Bottom"]).each(function(a,f){g[a]=b(d.css("padding"+f))}),n.containerOffset=d.offset(),n.containerPosition=d.position(),n.containerSize={height:d.innerHeight()-g[3],width:d.innerWidth()-g[1]},f=n.containerOffset,k=n.containerSize.height,l=n.containerSize.width,j=a.ui.hasScroll(s,"left")?s.scrollWidth:l,m=a.ui.hasScroll(s)?s.scrollHeight:k,n.parentData={element:s,left:f.left,top:f.top,width:j,
height:m}))},resize:function(b){var d,f,k,l,j=a(this).data("ui-resizable");d=j.options;f=j.containerOffset;k=j.position;b=j._aspectRatio||b.shiftKey;l={top:0,left:0};var m=j.containerElement;m[0]!==document&&/static/.test(m.css("position"))&&(l=f);k.left<(j._helper?f.left:0)&&(j.size.width+=j._helper?j.position.left-f.left:j.position.left-l.left,b&&(j.size.height=j.size.width/j.aspectRatio),j.position.left=d.helper?f.left:0);k.top<(j._helper?f.top:0)&&(j.size.height+=j._helper?j.position.top-f.top:
j.position.top,b&&(j.size.width=j.size.height*j.aspectRatio),j.position.top=j._helper?f.top:0);j.offset.left=j.parentData.left+j.position.left;j.offset.top=j.parentData.top+j.position.top;d=Math.abs(j.offset.left-l.left+j.sizeDiff.width);f=Math.abs((j._helper?j.offset.top-l.top:j.offset.top-f.top)+j.sizeDiff.height);k=j.containerElement.get(0)===j.element.parent().get(0);l=/relative|absolute/.test(j.containerElement.css("position"));k&&l&&(d-=j.parentData.left);d+j.size.width>=j.parentData.width&&
(j.size.width=j.parentData.width-d,b&&(j.size.height=j.size.width/j.aspectRatio));f+j.size.height>=j.parentData.height&&(j.size.height=j.parentData.height-f,b&&(j.size.width=j.size.height*j.aspectRatio))},stop:function(){var b=a(this).data("ui-resizable"),d=b.options,f=b.containerOffset,k=b.containerPosition,l=b.containerElement,j=a(b.helper),m=j.offset(),n=j.outerWidth()-b.sizeDiff.width,j=j.outerHeight()-b.sizeDiff.height;b._helper&&!d.animate&&/relative/.test(l.css("position"))&&a(this).css({left:m.left-
k.left-f.left,width:n,height:j});b._helper&&!d.animate&&/static/.test(l.css("position"))&&a(this).css({left:m.left-k.left-f.left,width:n,height:j})}});a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable").options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof b.alsoResize||b.alsoResize.parentNode?
d(b.alsoResize):b.alsoResize.length?(b.alsoResize=b.alsoResize[0],d(b.alsoResize)):a.each(b.alsoResize,function(a){d(a)})},resize:function(b,d){var f=a(this).data("ui-resizable"),k=f.options,l=f.originalSize,j=f.originalPosition,m={height:f.size.height-l.height||0,width:f.size.width-l.width||0,top:f.position.top-j.top||0,left:f.position.left-j.left||0},n=function(b,e){a(b).each(function(){var b=a(this),f=a(this).data("ui-resizable-alsoresize"),l={},j=e&&e.length?e:b.parents(d.originalElement[0]).length?
["width","height"]:["width","height","top","left"];a.each(j,function(a,b){var d=(f[b]||0)+(m[b]||0);d&&0<=d&&(l[b]=d||null)});b.css(l)})};"object"!=typeof k.alsoResize||k.alsoResize.nodeType?n(k.alsoResize):a.each(k.alsoResize,function(a,b){n(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),d=b.options,f=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:0.25,display:"block",position:"relative",
height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof d.ghost?d.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),
d=b.options,f=b.size,k=b.originalSize,l=b.originalPosition,j=b.axis,m="number"==typeof d.grid?[d.grid,d.grid]:d.grid,n=m[0]||1,s=m[1]||1,p=Math.round((f.width-k.width)/n)*n,f=Math.round((f.height-k.height)/s)*s,q=k.width+p,k=k.height+f,t=d.maxWidth&&q>d.maxWidth,r=d.maxHeight&&k>d.maxHeight,o=d.minWidth&&d.minWidth>q,v=d.minHeight&&d.minHeight>k;d.grid=m;o&&(q+=n);v&&(k+=s);t&&(q-=n);r&&(k-=s);/^(se|s|e)$/.test(j)?(b.size.width=q,b.size.height=k):/^(ne)$/.test(j)?(b.size.width=q,b.size.height=k,b.position.top=
l.top-f):/^(sw)$/.test(j)?(b.size.width=q,b.size.height=k,b.position.left=l.left-p):(b.size.width=q,b.size.height=k,b.position.top=l.top-f,b.position.left=l.left-p)}})})(jQuery);/*
 MIT
 @author Dave Hulbert (dave1010)
 @version 1.0.0 2013-01-17
*/
(function(a){a.fn.fastClick=function(b){return a(this).each(function(){a.FastButton(a(this)[0],b)})};a.FastButton=function(b,d){var e,g,f=function(){a(b).unbind("touchend");a("body").unbind("touchmove.fastClick")},k=function(b){b.stopPropagation();f();d.call(this,b);"touchend"===b.type&&a.clickbuster.preventGhostClick(e,g)},l=function(a){(10<Math.abs(a.originalEvent.touches[0].clientX-e)||10<Math.abs(a.originalEvent.touches[0].clientY-g))&&f()};a(b).bind({touchstart:function(d){d.stopPropagation();
a(b).bind("touchend",k);a("body").bind("touchmove.fastClick",l);e=d.originalEvent.touches[0].clientX;g=d.originalEvent.touches[0].clientY},click:k})};a.clickbuster={coordinates:[],preventGhostClick:function(b,d){a.clickbuster.coordinates.push(b,d);window.setTimeout(a.clickbuster.pop,2500)},pop:function(){a.clickbuster.coordinates.splice(0,2)},onClick:function(b){var d,e,g;for(g=0;g<a.clickbuster.coordinates.length;g+=2)d=a.clickbuster.coordinates[g],e=a.clickbuster.coordinates[g+1],25>Math.abs(b.clientX-
d)&&25>Math.abs(b.clientY-e)&&(b.stopPropagation(),b.preventDefault())}};a(function(){document.addEventListener?document.addEventListener("click",a.clickbuster.onClick,!0):document.attachEvent&&document.attachEvent("onclick",a.clickbuster.onClick)})})(jQuery);(function(a){function b(a,b){if(!(1<a.originalEvent.touches.length)){a.preventDefault();var d=a.originalEvent.changedTouches[0],e=document.createEvent("MouseEvents");e.initMouseEvent(b,!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(e)}}a.support.touch="ontouchend"in document;if(a.support.touch){var d=a.ui.mouse.prototype,e=d._mouseInit,g;d._touchStart=function(a){!g&&this._mouseCapture(a.originalEvent.changedTouches[0])&&(g=!0,this._touchMoved=!1,
b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))};d._touchMove=function(a){g&&(this._touchMoved=!0,b(a,"mousemove"))};d._touchEnd=function(a){g&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),g=!1)};d._mouseInit=function(){this.element.bind("touchstart",a.proxy(this,"_touchStart")).bind("touchmove",a.proxy(this,"_touchMove")).bind("touchend",a.proxy(this,"_touchEnd"));e.call(this)}}})(jQuery);var bkExtend=function(){var a=arguments;1==a.length&&(a=[this,a[0]]);for(var b in a[1])a[0][b]=a[1][b];return a[0]};function bkClass(){}bkClass.prototype.construct=function(){};bkClass.extend=function(a){var b=function(){if(arguments[0]!==bkClass)return this.construct.apply(this,arguments)},d=new this(bkClass);bkExtend(d,a);b.prototype=d;b.extend=this.extend;return b};
var bkElement=bkClass.extend({construct:function(a,b){"string"==typeof a&&(a=(b||document).createElement(a));return a=$BK(a)},appendTo:function(a){a.appendChild(this);return this},appendBefore:function(a){a.parentNode.insertBefore(this,a);return this},addEvent:function(a,b){bkLib.addEvent(this,a,b);return this},setContent:function(a){this.innerHTML=a;return this},pos:function(){var a=curtop=0;obj=this;if(obj.offsetParent){do a+=obj.offsetLeft,curtop+=obj.offsetTop;while(obj=obj.offsetParent)}var b=
!window.opera?parseInt(this.getStyle("border-width")||this.style.border)||0:0;return[a+b,curtop+b+this.offsetHeight]},noSelect:function(){bkLib.noSelect(this);return this},parentTag:function(a){var b=this;do{if(b&&b.nodeName&&b.nodeName.toUpperCase()==a)return b;b=b.parentNode}while(b);return!1},hasClass:function(a){return this.className.match(RegExp("(\\s|^)nicEdit-"+a+"(\\s|$)"))},addClass:function(a){this.hasClass(a)||(this.className+=" nicEdit-"+a);return this},removeClass:function(a){this.hasClass(a)&&
(this.className=this.className.replace(RegExp("(\\s|^)nicEdit-"+a+"(\\s|$)")," "));return this},setStyle:function(a){var b=this.style,d;for(d in a)switch(d){case "float":b.cssFloat=b.styleFloat=a[d];break;case "opacity":b.opacity=a[d];b.filter="alpha(opacity="+Math.round(100*a[d])+")";break;case "className":this.className=a[d];break;default:b[d]=a[d]}return this},getStyle:function(a,b){var d=!b?document.defaultView:b;if(1==this.nodeType)return d&&d.getComputedStyle?d.getComputedStyle(this,null).getPropertyValue(a):
this.currentStyle[bkLib.camelize(a)]},remove:function(){this.parentNode.removeChild(this);return this},setAttributes:function(a){for(var b in a)this[b]=a[b];return this}}),bkLib={isMSIE:-1!=navigator.appVersion.indexOf("MSIE"),addEvent:function(a,b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent("on"+b,d)},toArray:function(a){for(var b=a.length,d=Array(b);b--;)d[b]=a[b];return d},noSelect:function(a){a.setAttribute&&("input"!=a.nodeName.toLowerCase()&&"textarea"!=a.nodeName.toLowerCase())&&
a.setAttribute("unselectable","on");for(var b=0;b<a.childNodes.length;b++)bkLib.noSelect(a.childNodes[b])},camelize:function(a){return a.replace(/\-(.)/g,function(a,d){return d.toUpperCase()})},inArray:function(a,b){return null!=bkLib.search(a,b)},search:function(a,b){for(var d=0;d<a.length;d++)if(a[d]==b)return d;return null},cancelEvent:function(a){a=a||window.event;a.preventDefault&&a.stopPropagation&&(a.preventDefault(),a.stopPropagation());return!1},domLoad:[],domLoaded:function(){if(!arguments.callee.done){arguments.callee.done=
!0;for(i=0;i<bkLib.domLoad.length;i++)bkLib.domLoad[i]()}},onDomLoaded:function(a){this.domLoad.push(a);document.addEventListener?document.addEventListener("DOMContentLoaded",bkLib.domLoaded,null):bkLib.isMSIE&&(document.write("<style>.nicEdit-main p { margin: 0; }</style><script id=__ie_onload defer "+("https:"==location.protocol?"src='javascript:void(0)'":"src=//0")+"><\/script>"),$BK("__ie_onload").onreadystatechange=function(){"complete"==this.readyState&&bkLib.domLoaded()});window.onload=bkLib.domLoaded}};
function $BK(a){"string"==typeof a&&(a=document.getElementById(a));return a&&!a.appendTo?bkExtend(a,bkElement.prototype):a}var bkEvent={addEvent:function(a,b){b&&(this.eventList=this.eventList||{},this.eventList[a]=this.eventList[a]||[],this.eventList[a].push(b));return this},fireEvent:function(){var a=bkLib.toArray(arguments),b=a.shift();if(this.eventList&&this.eventList[b])for(var d=0;d<this.eventList[b].length;d++)this.eventList[b][d].apply(this,a)}};function __(a){return a}
Function.prototype.closure=function(){var a=this,b=bkLib.toArray(arguments),d=b.shift();return function(){if("undefined"!=typeof bkLib)return a.apply(d,b.concat(bkLib.toArray(arguments)))}};Function.prototype.closureListener=function(){var a=this,b=bkLib.toArray(arguments),d=b.shift();return function(e){e=e||window.event;return a.apply(d,[e,e.target?e.target:e.srcElement].concat(b))}};
var nicEditorConfig=bkClass.extend({buttons:{bold:{name:__("Click to Bold"),command:"Bold",tags:["B","STRONG"],css:{"font-weight":"bold"},key:"b"},italic:{name:__("Click to Italic"),command:"Italic",tags:["EM","I"],css:{"font-style":"italic"},key:"i"},underline:{name:__("Click to Underline"),command:"Underline",tags:["U"],css:{"text-decoration":"underline"},key:"u"},left:{name:__("Left Align"),command:"justifyleft",noActive:!0},center:{name:__("Center Align"),command:"justifycenter",noActive:!0},
right:{name:__("Right Align"),command:"justifyright",noActive:!0},justify:{name:__("Justify Align"),command:"justifyfull",noActive:!0},ol:{name:__("Insert Ordered List"),command:"insertorderedlist",tags:["OL"]},ul:{name:__("Insert Unordered List"),command:"insertunorderedlist",tags:["UL"]},subscript:{name:__("Click to Subscript"),command:"subscript",tags:["SUB"]},superscript:{name:__("Click to Superscript"),command:"superscript",tags:["SUP"]},strikethrough:{name:__("Click to Strike Through"),command:"strikeThrough",
css:{"text-decoration":"line-through"}},removeformat:{name:__("Remove Formatting"),command:"removeformat",noActive:!0},indent:{name:__("Indent Text"),command:"indent",noActive:!0},outdent:{name:__("Remove Indent"),command:"outdent",noActive:!0},hr:{name:__("Horizontal Rule"),command:"insertHorizontalRule",noActive:!0}},iconsPath:"resources/icons/nicEditorIcons.gif",buttonList:"save bold italic underline left center right justify ol ul fontSize fontFamily fontFormat indent outdent image upload link unlink forecolor bgcolor".split(" "),
iconList:{bgcolor:1,forecolor:2,bold:3,center:4,hr:5,indent:6,italic:7,justify:8,left:9,ol:10,outdent:11,removeformat:12,right:13,save:14,strikethrough:15,subscript:16,superscript:17,ul:18,underline:19,image:20,link:21,unlink:22,close:23,arrow:24}}),nicEditors={nicPlugins:[],editors:[],registerPlugin:function(a,b){this.nicPlugins.push({p:a,o:b})},allTextAreas:function(a){for(var b=document.getElementsByTagName("textarea"),d=0;d<b.length;d++)nicEditors.editors.push((new nicEditor(a)).panelInstance(b[d]));
return nicEditors.editors},findEditor:function(a){for(var b=nicEditors.editors,d=0;d<b.length;d++)if(b[d].instanceById(a))return b[d].instanceById(a)}},nicEditor=bkClass.extend({construct:function(a){this.options=new nicEditorConfig;bkExtend(this.options,a);this.nicInstances=[];this.loadedPlugins=[];for(var a=nicEditors.nicPlugins,b=0;b<a.length;b++)this.loadedPlugins.push(new a[b].p(this,a[b].o));nicEditors.editors.push(this);bkLib.addEvent(document.body,"mousedown",this.selectCheck.closureListener(this))},
panelInstance:function(a,b){var a=this.checkReplace($BK(a)),d=(new bkElement("DIV")).setStyle({width:(parseInt(a.getStyle("width"))||a.clientWidth)+"px"}).appendBefore(a);this.setPanel(d);return this.addInstance(a,b)},checkReplace:function(a){var b=nicEditors.findEditor(a);b&&(b.removeInstance(a),b.removePanel());return a},addInstance:function(a,b){var a=this.checkReplace($BK(a)),d=a.contentEditable||window.opera?new nicEditorInstance(a,b,this):new nicEditorIFrameInstance(a,b,this);this.nicInstances.push(d);
return this},removeInstance:function(a){for(var a=$BK(a),b=this.nicInstances,d=0;d<b.length;d++)b[d].e==a&&(b[d].remove(),this.nicInstances.splice(d,1))},removePanel:function(){this.nicPanel&&(this.nicPanel.remove(),this.nicPanel=null)},instanceById:function(a){for(var a=$BK(a),b=this.nicInstances,d=0;d<b.length;d++)if(b[d].e==a)return b[d]},setPanel:function(a){this.nicPanel=new nicEditorPanel($BK(a),this.options,this);this.fireEvent("panel",this.nicPanel);return this},nicCommand:function(a,b){this.selectedInstance&&
this.selectedInstance.nicCommand(a,b)},getIcon:function(a,b){var d=this.options.iconList[a],e=b.iconFiles?b.iconFiles[a]:"";return{backgroundImage:"url('"+(d?this.options.iconsPath:e)+"')",backgroundPosition:(d?-18*(d-1):0)+"px 0px"}},selectCheck:function(a,b){do if(b.className&&-1!=b.className.indexOf("nicEdit"))return!1;while(b=b.parentNode);this.fireEvent("blur",this.selectedInstance,b);this.lastSelectedInstance=this.selectedInstance;this.selectedInstance=null;return!1}}),nicEditor=nicEditor.extend(bkEvent),
nicEditorInstance=bkClass.extend({isSelected:!1,construct:function(a,b,d){this.ne=d;this.elm=this.e=a;this.options=b||{};newX=parseInt(a.getStyle("width"))||a.clientWidth;newY=parseInt(a.getStyle("height"))||a.clientHeight;this.initialHeight=newY-8;if((d="textarea"==a.nodeName.toLowerCase())||this.options.hasPanel){var b=bkLib.isMSIE&&!("undefined"!=typeof document.body.style.maxHeight&&"CSS1Compat"==document.compatMode),e={width:newX+"px",border:"1px solid #ccc",borderTop:0,overflowY:"auto",overflowX:"hidden"};
e[b?"height":"maxHeight"]=this.ne.options.maxHeight?this.ne.options.maxHeight+"px":null;this.editorContain=(new bkElement("DIV")).setStyle(e).appendBefore(a);e=(new bkElement("DIV")).setStyle({width:newX-8+"px",margin:"4px",minHeight:newY+"px"}).addClass("main").appendTo(this.editorContain);a.setStyle({display:"none"});e.innerHTML=a.innerHTML;d&&(e.setContent(a.value),this.copyElm=a,(a=a.parentTag("FORM"))&&bkLib.addEvent(a,"submit",this.saveContent.closure(this)));e.setStyle(b?{height:newY+"px"}:
{overflow:"hidden"});this.elm=e}this.ne.addEvent("blur",this.blur.closure(this));this.init();this.blur()},init:function(){this.elm.setAttribute("contentEditable","true");""==this.getContent()&&this.setContent("<br />");this.instanceDoc=document.defaultView;this.elm.addEvent("mousedown",this.selected.closureListener(this)).addEvent("keypress",this.keyDown.closureListener(this)).addEvent("focus",this.selected.closure(this)).addEvent("blur",this.blur.closure(this)).addEvent("keyup",this.selected.closure(this));
this.ne.fireEvent("add",this)},remove:function(){this.saveContent();if(this.copyElm||this.options.hasPanel)this.editorContain.remove(),this.e.setStyle({display:"block"}),this.ne.removePanel();this.disable();this.ne.fireEvent("remove",this)},disable:function(){this.elm.setAttribute("contentEditable","false")},getSel:function(){return window.getSelection?window.getSelection():document.selection},getRng:function(){var a=this.getSel();if(a&&0!==a.rangeCount)return 0<a.rangeCount?a.getRangeAt(0):a.createRange()},
selRng:function(a,b){window.getSelection?(b.removeAllRanges(),b.addRange(a)):a.select()},selElm:function(){var a=this.getRng();if(a){if(a.startContainer){var b=a.startContainer;if(1==a.cloneContents().childNodes.length)for(var d=0;d<b.childNodes.length;d++){var e=b.childNodes[d].ownerDocument.createRange();e.selectNode(b.childNodes[d]);if(1!=a.compareBoundaryPoints(Range.START_TO_START,e)&&-1!=a.compareBoundaryPoints(Range.END_TO_END,e))return $BK(b.childNodes[d])}return $BK(b)}return $BK("Control"==
this.getSel().type?a.item(0):a.parentElement())}},saveRng:function(){this.savedRange=this.getRng();this.savedSel=this.getSel()},restoreRng:function(){this.savedRange&&this.selRng(this.savedRange,this.savedSel)},keyDown:function(a){a.ctrlKey&&this.ne.fireEvent("key",this,a)},selected:function(a,b){if(!b&&!(b=this.selElm))b=this.selElm();if(!a.ctrlKey){var d=this.ne.selectedInstance;d!=this&&(d&&this.ne.fireEvent("blur",d,b),this.ne.selectedInstance=this,this.ne.fireEvent("focus",d,b));this.ne.fireEvent("selected",
d,b);this.isFocused=!0;this.elm.addClass("selected")}return!1},blur:function(){this.isFocused=!1;this.elm.removeClass("selected")},saveContent:function(){if(this.copyElm||this.options.hasPanel)this.ne.fireEvent("save",this),this.copyElm?this.copyElm.value=this.getContent():this.e.innerHTML=this.getContent()},getElm:function(){return this.elm},getContent:function(){this.content=this.getElm().innerHTML;this.ne.fireEvent("get",this);return this.content},setContent:function(a){this.content=a;this.ne.fireEvent("set",
this);this.elm.innerHTML=this.content},nicCommand:function(a,b){document.execCommand(a,!1,b)}}),nicEditorIFrameInstance=nicEditorInstance.extend({savedStyles:[],init:function(){var a=this.elm.innerHTML.replace(/^\s+|\s+$/g,"");this.elm.innerHTML="";!a?a="<br />":a;this.initialContent=a;this.elmFrame=(new bkElement("iframe")).setAttributes({src:"javascript:;",frameBorder:0,allowTransparency:"true",scrolling:"no"}).setStyle({height:"100px",width:"100%"}).addClass("frame").appendTo(this.elm);this.copyElm&&
this.elmFrame.setStyle({width:this.elm.offsetWidth-4+"px"});a=["font-size","font-family","font-weight","color"];for(itm in a)this.savedStyles[bkLib.camelize(itm)]=this.elm.getStyle(itm);setTimeout(this.initFrame.closure(this),50)},disable:function(){this.elm.innerHTML=this.getContent()},initFrame:function(){var a=$BK(this.elmFrame.contentWindow.document);a.designMode="on";a.open();var b=this.ne.options.externalCSS;a.write("<html><head>"+(b?'<link href="'+b+'" rel="stylesheet" type="text/css" />':
"")+'</head><body id="nicEditContent" style="margin: 0 !important; background-color: transparent !important;">'+this.initialContent+"</body></html>");a.close();this.frameDoc=a;this.frameWin=$BK(this.elmFrame.contentWindow);this.frameContent=$BK(this.frameWin.document.body).setStyle(this.savedStyles);this.instanceDoc=this.frameWin.document.defaultView;this.heightUpdate();this.frameDoc.addEvent("mousedown",this.selected.closureListener(this)).addEvent("keyup",this.heightUpdate.closureListener(this)).addEvent("keydown",
this.keyDown.closureListener(this)).addEvent("keyup",this.selected.closure(this));this.ne.fireEvent("add",this)},getElm:function(){return this.frameContent},setContent:function(a){this.content=a;this.ne.fireEvent("set",this);this.frameContent.innerHTML=this.content;this.heightUpdate()},getSel:function(){return this.frameWin?this.frameWin.getSelection():this.frameDoc.selection},heightUpdate:function(){this.elmFrame.style.height=Math.max(this.frameContent.offsetHeight,this.initialHeight)+"px"},nicCommand:function(a,
b){this.frameDoc.execCommand(a,!1,b);setTimeout(this.heightUpdate.closure(this),100)}}),nicEditorPanel=bkClass.extend({construct:function(a,b,d){this.elm=a;this.options=b;this.ne=d;this.panelButtons=[];this.buttonList=bkExtend([],this.ne.options.buttonList);this.panelContain=(new bkElement("DIV")).setStyle({overflow:"hidden",width:"100%",border:"1px solid #cccccc",backgroundColor:"#efefef"}).addClass("panelContain");this.panelElm=(new bkElement("DIV")).setStyle({margin:"2px",marginTop:"0px",zoom:1,
overflow:"hidden"}).addClass("panel").appendTo(this.panelContain);this.panelContain.appendTo(a);b=this.ne.options;d=b.buttons;for(button in d)this.addButton(button,b,!0);this.reorder();a.noSelect()},addButton:function(a,b){var d=b.buttons[a],d=d.type?eval("(typeof("+d.type+') == "undefined") ? null : '+d.type+";"):nicEditorButton,e=bkLib.inArray(this.buttonList,a);if(d&&(e||this.ne.options.fullPanel))this.panelButtons.push(new d(this.panelElm,a,b,this.ne)),e||this.buttonList.push(a)},findButton:function(a){for(var b=
0;b<this.panelButtons.length;b++)if(this.panelButtons[b].name==a)return this.panelButtons[b]},reorder:function(){for(var a=this.buttonList,b=0;b<a.length;b++){var d=this.findButton(a[b]);d&&this.panelElm.appendChild(d.margin)}},remove:function(){this.elm.remove()}}),nicEditorButton=bkClass.extend({construct:function(a,b,d,e){this.options=d.buttons[b];this.name=b;this.ne=e;this.elm=a;this.margin=(new bkElement("DIV")).setStyle({"float":"left",marginTop:"2px"}).appendTo(a);this.contain=(new bkElement("DIV")).setStyle({width:"20px",
height:"20px"}).addClass("buttonContain").appendTo(this.margin);this.border=(new bkElement("DIV")).setStyle({backgroundColor:"#efefef",border:"1px solid #efefef"}).appendTo(this.contain);this.button=(new bkElement("DIV")).setStyle({width:"18px",height:"18px",overflow:"hidden",zoom:1,cursor:"pointer"}).addClass("button").setStyle(this.ne.getIcon(b,d)).appendTo(this.border);this.button.addEvent("mouseover",this.hoverOn.closure(this)).addEvent("mouseout",this.hoverOff.closure(this)).addEvent("mousedown",
this.mouseClick.closure(this)).noSelect();window.opera||(this.button.onmousedown=this.button.onclick=bkLib.cancelEvent);e.addEvent("selected",this.enable.closure(this)).addEvent("blur",this.disable.closure(this)).addEvent("key",this.key.closure(this));this.disable();this.init()},init:function(){},hide:function(){this.contain.setStyle({display:"none"})},updateState:function(){this.isDisabled?this.setBg():this.isHover?this.setBg("hover"):this.isActive?this.setBg("active"):this.setBg()},setBg:function(a){switch(a){case "hover":var b=
{border:"1px solid #666",backgroundColor:"#ddd"};break;case "active":b={border:"1px solid #666",backgroundColor:"#ccc"};break;default:b={border:"1px solid #efefef",backgroundColor:"#efefef"}}this.border.setStyle(b).addClass("button-"+a)},checkNodes:function(a){var b=a;do if(this.options.tags&&bkLib.inArray(this.options.tags,b.nodeName))return this.activate(),!0;while(b=b.parentNode&&"nicEdit"!=b.className);for(b=$BK(a);3==b.nodeType;)b=$BK(b.parentNode);if(this.options.css)for(itm in this.options.css)if(b.getStyle(itm,
this.ne.selectedInstance.instanceDoc)==this.options.css[itm])return this.activate(),!0;this.deactivate();return!1},activate:function(){this.isDisabled||(this.isActive=!0,this.updateState(),this.ne.fireEvent("buttonActivate",this))},deactivate:function(){this.isActive=!1;this.updateState();this.isDisabled||this.ne.fireEvent("buttonDeactivate",this)},enable:function(a,b){this.isDisabled=!1;this.contain.setStyle({opacity:1}).addClass("buttonEnabled");this.updateState();this.checkNodes(b)},disable:function(){this.isDisabled=
!0;this.contain.setStyle({opacity:0.6}).removeClass("buttonEnabled");this.updateState()},toggleActive:function(){this.isActive?this.deactivate():this.activate()},hoverOn:function(){this.isDisabled||(this.isHover=!0,this.updateState(),this.ne.fireEvent("buttonOver",this))},hoverOff:function(){this.isHover=!1;this.updateState();this.ne.fireEvent("buttonOut",this)},mouseClick:function(){this.options.command&&(this.ne.nicCommand(this.options.command,this.options.commandArgs),this.options.noActive||this.toggleActive());
this.ne.fireEvent("buttonClick",this)},key:function(a,b){if(this.options.key&&b.ctrlKey&&String.fromCharCode(b.keyCode||b.charCode).toLowerCase()==this.options.key)this.mouseClick(),b.preventDefault&&b.preventDefault()}}),nicPlugin=bkClass.extend({construct:function(a,b){this.options=b;this.ne=a;this.ne.addEvent("panel",this.loadPanel.closure(this));this.init()},loadPanel:function(a){var b=this.options.buttons,d;for(d in b)a.addButton(d,this.options);a.reorder()},init:function(){}}),nicPaneOptions=
{},nicEditorPane=bkClass.extend({construct:function(a,b,d,e){this.ne=b;this.elm=a;this.pos=a.pos();this.contain=(new bkElement("div")).setStyle({zIndex:"99999",overflow:"hidden",position:"absolute",left:this.pos[0]+"px",top:this.pos[1]+"px"});this.pane=(new bkElement("div")).setStyle({fontSize:"12px",border:"1px solid #ccc",overflow:"hidden",padding:"4px",textAlign:"left",backgroundColor:"#ffffc9"}).addClass("pane").setStyle(d).appendTo(this.contain);e&&!e.options.noClose&&(this.close=(new bkElement("div")).setStyle({"float":"right",
height:"16px",width:"16px",cursor:"pointer"}).setStyle(this.ne.getIcon("close",nicPaneOptions)).addEvent("mousedown",e.removePane.closure(this)).appendTo(this.pane));this.contain.noSelect().appendTo(document.body);this.position();this.init()},init:function(){},position:function(){if(this.ne.nicPanel){var a=this.ne.nicPanel.elm,a=a.pos()[0]+parseInt(a.getStyle("width"))-(parseInt(this.pane.getStyle("width"))+8);a<this.pos[0]&&this.contain.setStyle({left:a+"px"})}},toggle:function(){this.isVisible=
!this.isVisible;this.contain.setStyle({display:this.isVisible?"block":"none"})},remove:function(){this.contain&&(this.contain.remove(),this.contain=null)},append:function(a){a.appendTo(this.pane)},setContent:function(a){this.pane.setContent(a)}}),nicEditorAdvancedButton=nicEditorButton.extend({init:function(){this.ne.addEvent("selected",this.removePane.closure(this)).addEvent("blur",this.removePane.closure(this))},mouseClick:function(){this.isDisabled||(this.pane&&this.pane.pane?this.removePane():
(this.pane=new nicEditorPane(this.contain,this.ne,{width:this.width||"270px",backgroundColor:"#fff"},this),this.addPane(),this.ne.selectedInstance.saveRng()))},addForm:function(a,b){this.form=(new bkElement("form")).addEvent("submit",this.submit.closureListener(this));this.pane.append(this.form);this.inputs={};for(itm in a){var d=a[itm],e="";b&&(e=b.getAttribute(itm));e||(e=d.value||"");var g=a[itm].type;if("title"==g)(new bkElement("div")).setContent(d.txt).setStyle({fontSize:"14px",fontWeight:"bold",
padding:"0px",margin:"2px 0"}).appendTo(this.form);else{var f=(new bkElement("div")).setStyle({overflow:"hidden",clear:"both"}).appendTo(this.form);d.txt&&(new bkElement("label")).setAttributes({"for":itm}).setContent(d.txt).setStyle({margin:"2px 4px",fontSize:"13px",width:"50px",lineHeight:"20px",textAlign:"right","float":"left"}).appendTo(f);switch(g){case "text":this.inputs[itm]=(new bkElement("input")).setAttributes({id:itm,value:e,type:"text"}).setStyle({margin:"2px 0",fontSize:"13px","float":"left",
height:"20px",border:"1px solid #ccc",overflow:"hidden"}).setStyle(d.style).appendTo(f);break;case "select":this.inputs[itm]=(new bkElement("select")).setAttributes({id:itm}).setStyle({border:"1px solid #ccc","float":"left",margin:"2px 0"}).appendTo(f);for(opt in d.options)(new bkElement("option")).setAttributes({value:opt,selected:opt==e?"selected":""}).setContent(d.options[opt]).appendTo(this.inputs[itm]);break;case "content":this.inputs[itm]=(new bkElement("textarea")).setAttributes({id:itm}).setStyle({border:"1px solid #ccc",
"float":"left"}).setStyle(d.style).appendTo(f),this.inputs[itm].value=e}}}(new bkElement("input")).setAttributes({type:"submit"}).setStyle({backgroundColor:"#efefef",border:"1px solid #ccc",margin:"3px 0","float":"left",clear:"both"}).appendTo(this.form);this.form.onsubmit=bkLib.cancelEvent},submit:function(){},findElm:function(a,b,d){for(var a=this.ne.selectedInstance.getElm().getElementsByTagName(a),e=0;e<a.length;e++)if(a[e].getAttribute(b)==d)return $BK(a[e])},removePane:function(){this.pane&&
(this.pane.remove(),this.pane=null,this.ne.selectedInstance.restoreRng())}}),nicSelectOptions={buttons:{fontSize:{name:__("Select Font Size"),type:"nicEditorFontSizeSelect",command:"fontsize"},fontFamily:{name:__("Select Font Family"),type:"nicEditorFontFamilySelect",command:"fontname"},fontFormat:{name:__("Select Font Format"),type:"nicEditorFontFormatSelect",command:"formatBlock"}}},nicEditorSelect=bkClass.extend({construct:function(a,b,d,e){this.options=d.buttons[b];this.elm=a;this.ne=e;this.name=
b;this.selOptions=[];this.margin=(new bkElement("div")).setStyle({"float":"left",margin:"2px 1px 0 1px"}).appendTo(this.elm);this.contain=(new bkElement("div")).setStyle({width:"90px",height:"20px",cursor:"pointer",overflow:"hidden"}).addClass("selectContain").addEvent("click",this.toggle.closure(this)).appendTo(this.margin);this.items=(new bkElement("div")).setStyle({overflow:"hidden",zoom:1,border:"1px solid #ccc",paddingLeft:"3px",backgroundColor:"#fff"}).appendTo(this.contain);this.control=(new bkElement("div")).setStyle({overflow:"hidden",
"float":"right",height:"18px",width:"16px"}).addClass("selectControl").setStyle(this.ne.getIcon("arrow",d)).appendTo(this.items);this.txt=(new bkElement("div")).setStyle({overflow:"hidden","float":"left",width:"66px",height:"14px",marginTop:"1px",fontFamily:"sans-serif",textAlign:"center",fontSize:"12px"}).addClass("selectTxt").appendTo(this.items);window.opera||(this.contain.onmousedown=this.control.onmousedown=this.txt.onmousedown=bkLib.cancelEvent);this.margin.noSelect();this.ne.addEvent("selected",
this.enable.closure(this)).addEvent("blur",this.disable.closure(this));this.disable();this.init()},disable:function(){this.isDisabled=!0;this.close();this.contain.setStyle({opacity:0.6})},enable:function(){this.isDisabled=!1;this.close();this.contain.setStyle({opacity:1})},setDisplay:function(a){this.txt.setContent(a)},toggle:function(){this.isDisabled||(this.pane?this.close():this.open())},open:function(){this.pane=new nicEditorPane(this.items,this.ne,{width:"88px",padding:"0px",borderTop:0,borderLeft:"1px solid #ccc",
borderRight:"1px solid #ccc",borderBottom:"0px",backgroundColor:"#fff"});for(var a=0;a<this.selOptions.length;a++){var b=this.selOptions[a],d=(new bkElement("div")).setStyle({overflow:"hidden",borderBottom:"1px solid #ccc",width:"88px",textAlign:"left",overflow:"hidden",cursor:"pointer"}),e=(new bkElement("div")).setStyle({padding:"0px 4px"}).setContent(b[1]).appendTo(d).noSelect();e.addEvent("click",this.update.closure(this,b[0])).addEvent("mouseover",this.over.closure(this,e)).addEvent("mouseout",
this.out.closure(this,e)).setAttributes("id",b[0]);this.pane.append(d);window.opera||(e.onmousedown=bkLib.cancelEvent)}},close:function(){this.pane&&(this.pane=this.pane.remove())},over:function(a){a.setStyle({backgroundColor:"#ccc"})},out:function(a){a.setStyle({backgroundColor:"#fff"})},add:function(a,b){this.selOptions.push([a,b])},update:function(a){this.ne.nicCommand(this.options.command,a);this.close()}}),nicEditorFontSizeSelect=nicEditorSelect.extend({sel:{1:"1&nbsp;(8pt)",2:"2&nbsp;(10pt)",
3:"3&nbsp;(12pt)",4:"4&nbsp;(14pt)",5:"5&nbsp;(18pt)",6:"6&nbsp;(24pt)"},init:function(){this.setDisplay("Font&nbsp;Size...");for(itm in this.sel)this.add(itm,'<font size="'+itm+'">'+this.sel[itm]+"</font>")}}),nicEditorFontFamilySelect=nicEditorSelect.extend({sel:{arial:"Arial","comic sans ms":"Comic Sans","courier new":"Courier New",georgia:"Georgia",helvetica:"Helvetica",impact:"Impact","times new roman":"Times","trebuchet ms":"Trebuchet",verdana:"Verdana"},init:function(){this.setDisplay("Font&nbsp;Family...");
for(itm in this.sel)this.add(itm,'<font face="'+itm+'">'+this.sel[itm]+"</font>")}}),nicEditorFontFormatSelect=nicEditorSelect.extend({sel:{p:"Paragraph",pre:"Pre",h6:"Heading&nbsp;6",h5:"Heading&nbsp;5",h4:"Heading&nbsp;4",h3:"Heading&nbsp;3",h2:"Heading&nbsp;2",h1:"Heading&nbsp;1"},init:function(){this.setDisplay("Font&nbsp;Format...");for(itm in this.sel){var a=itm.toUpperCase();this.add("<"+a+">","<"+itm+' style="padding: 0px; margin: 0px;">'+this.sel[itm]+"</"+a+">")}}});
nicEditors.registerPlugin(nicPlugin,nicSelectOptions);
var nicLinkOptions={buttons:{link:{name:"Add Link",type:"nicLinkButton",tags:["A"]},unlink:{name:"Remove Link",command:"unlink",noActive:!0}}},nicLinkButton=nicEditorAdvancedButton.extend({addPane:function(){this.ln=this.ne.selectedInstance.selElm().parentTag("A");this.addForm({"":{type:"title",txt:"Add/Edit Link"},href:{type:"text",txt:"URL",value:"http://",style:{width:"150px"}},title:{type:"text",txt:"Title"},target:{type:"select",txt:"Open In",options:{"":"Current Window",_blank:"New Window"},
style:{width:"100px"}}},this.ln)},submit:function(){var a=this.inputs.href.value;if("http://"==a||""==a)return alert("You must enter a URL to Create a Link"),!1;this.removePane();this.ln||(this.ne.nicCommand("createlink","javascript:nicTemp();"),this.ln=this.findElm("A","href","javascript:nicTemp();"));this.ln&&this.ln.setAttributes({href:this.inputs.href.value,title:this.inputs.title.value,target:this.inputs.target.options[this.inputs.target.selectedIndex].value})}});
nicEditors.registerPlugin(nicPlugin,nicLinkOptions);
var nicColorOptions={buttons:{forecolor:{name:__("Change Text Color"),type:"nicEditorColorButton",noClose:!0},bgcolor:{name:__("Change Background Color"),type:"nicEditorBgColorButton",noClose:!0}}},nicEditorColorButton=nicEditorAdvancedButton.extend({addPane:function(){var a={"0":"00",1:"33",2:"66",3:"99",4:"CC",5:"FF"},b=(new bkElement("DIV")).setStyle({width:"270px"}),d;for(d in a)for(var e in a)for(var g in a){var f="#"+a[d]+a[g]+a[e],k=(new bkElement("DIV")).setStyle({cursor:"pointer",height:"15px",
"float":"left"}).appendTo(b),l=(new bkElement("DIV")).setStyle({border:"2px solid "+f}).appendTo(k),f=(new bkElement("DIV")).setStyle({backgroundColor:f,overflow:"hidden",width:"11px",height:"11px"}).addEvent("click",this.colorSelect.closure(this,f)).addEvent("mouseover",this.on.closure(this,l)).addEvent("mouseout",this.off.closure(this,l,f)).appendTo(l);window.opera||(k.onmousedown=f.onmousedown=bkLib.cancelEvent)}this.pane.append(b.noSelect())},colorSelect:function(a){this.ne.nicCommand("foreColor",
a);this.removePane()},on:function(a){a.setStyle({border:"2px solid #000"})},off:function(a,b){a.setStyle({border:"2px solid "+b})}}),nicEditorBgColorButton=nicEditorColorButton.extend({colorSelect:function(a){this.ne.nicCommand("hiliteColor",a);this.removePane()}});nicEditors.registerPlugin(nicPlugin,nicColorOptions);
var nicImageOptions={buttons:{image:{name:"Add Image",type:"nicImageButton",tags:["IMG"]}}},nicImageButton=nicEditorAdvancedButton.extend({addPane:function(){this.im=this.ne.selectedInstance.selElm().parentTag("IMG");this.addForm({"":{type:"title",txt:"Add/Edit Image"},src:{type:"text",txt:"URL",value:"http://",style:{width:"150px"}},alt:{type:"text",txt:"Alt Text",style:{width:"100px"}},align:{type:"select",txt:"Align",options:{none:"Default",left:"Left",right:"Right"}}},this.im)},submit:function(){var a=
this.inputs.src.value;if(""==a||"http://"==a)return alert("You must enter a Image URL to insert"),!1;this.removePane();this.im||(this.ne.nicCommand("insertImage","javascript:nicImTemp();"),this.im=this.findElm("IMG","src","javascript:nicImTemp();"));this.im&&this.im.setAttributes({src:this.inputs.src.value,alt:this.inputs.alt.value,align:this.inputs.align.value})}});nicEditors.registerPlugin(nicPlugin,nicImageOptions);if("undefined"==typeof stlib)var stlib={};stlib.functions||(stlib.functions=[],stlib.functionCount=0);stlib.global={};stlib.global.hash=document.location.href.split("#");stlib.global.hash.shift();stlib.global.hash=stlib.global.hash.join("#");stlib.dynamicOn=!0;stlib.debugOn=!1;
stlib.debug={count:0,messages:[],debug:function(a,b){b&&typeof console!="undefined"&&console.log(a);stlib.debug.messages.push(a)},show:function(a){for(message in stlib.debug.messages)typeof console!="undefined"&&(a?/ERROR/.test(stlib.debug.messages[message])?console.log(stlib.debug.messages[message]):null:console.log(stlib.debug.messages[message]))},showError:function(){stlib.debug.show(true)}};
var _$d=function(a){stlib.debug.debug(a,stlib.debugOn)},_$d0=function(){_$d(" ")},_$d_=function(){_$d("___________________________________________")},_$d1=function(a){_$d(_$dt()+"| "+a)},_$d2=function(a){_$d(_$dt()+"|  * "+a)},_$de=function(a){_$d(_$dt()+"ERROR: "+a)},_$dt=function(){var a=new Date,b=a.getHours(),d=a.getMinutes(),a=a.getSeconds();return b+":"+d+":"+a+" > "};
stlib.buttonInfo={buttonList:[],addButton:function(a){stlib.buttonInfo.buttonList.push(a)},getButton:function(a){if(isNaN(a))for(c=0;c<stlib.buttonInfo.buttonList.length;c++)stlib.buttonInfo.buttonList[c].service==a&&debug(stlib.buttonInfo.buttonList[c]);else return a>=stlib.buttonInfo.buttonList.length?false:stlib.buttonInfo.buttonList[a]},clickButton:function(a){if(isNaN(a))for(c=0;c<stlib.buttonInfo.buttonList.length;c++){if(stlib.buttonInfo.buttonList[c].service==a){if(stlib.buttonInfo.getButton(c).service==
"sharethis"||stlib.buttonInfo.getButton(c).service=="email"||stlib.buttonInfo.getButton(c).service=="wordpress"){stlib.buttonInfo.getButton(c).popup();return true}stlib.buttonInfo.getButton(c).element.childNodes[0].onclick()}}else{if(a>=stlib.buttonInfo.buttonList.length)return false;if(stlib.buttonInfo.getButton(a).service=="sharethis"||stlib.buttonInfo.getButton(a).service=="email"||stlib.buttonInfo.getButton(a).service=="wordpress")stlib.buttonInfo.getButton(a).popup();else stlib.buttonInfo.getButton(a).element.childNodes[0].onclick()}},
resetButton:function(){stlib.buttonInfo.buttonList=[]},listButton:function(){for(c=0;c<stlib.buttonInfo.buttonList.length;c++)debug(stlib.buttonInfo.buttonList[c])}};stlib.buttonInfo.resetButton();
stlib.messageQueue=function(){var a=this;this.pumpInstance=null;this.queue=[];this.dependencies=["data"];this.sending=true;this.setPumpInstance=function(a){this.pumpInstance=a};this.send=function(b,d){if(typeof b=="string"&&typeof d=="string"){_$d_();_$d1("Queueing message: "+d+": "+b)}typeof b=="string"&&typeof d=="string"?this.queue.push([d,b]):null;if(this.sending==false||stlib.browser.ieFallback)if(this.pumpInstance!=null)if(this.dependencies.length>0)for(messageSet in this.queue){if(this.queue[messageSet][0]==
this.dependencies[0]&&this.queue.length>0){_$d1("Current Queue Length: "+this.queue.length);var e=this.queue.shift();this.pumpInstance.broadcastSendMessage(e[1]);this.dependencies.shift();this.sending=true}}else{if(this.queue.length>0){_$d1("Current Queue Length: "+this.queue.length);e=this.queue.shift();this.pumpInstance.broadcastSendMessage(e[1]);this.sending=true}}else{_$d_();_$d1("Pump is null")}if(stlib.browser.ieFallback&&this.queue.length>0){e="process"+stlib.functionCount;stlib.functionCount++;
stlib.functions[e]=a.process;setTimeout("stlib.functions['"+e+"']()",500)}};this.process=function(){_$d1("Processing MessageQueue");a.sending=false;_$d(this.queue);a.send()}};
stlib.sharer={sharerUrl:("https:"==document.location.protocol?"https://ws.":"http://wd.")+"sharethis.com/api/sharer.php",regAuto:RegExp(/(.*?)_auto$/),constructParamString:function(){stlib.data.validate();stlib.hash.checkURL();var a=stlib.data.pageInfo,b="?",d;for(d in a){b=b+(d+"="+encodeURIComponent(a[d])+"&");_$d1("constructParamStringPageInfo: "+d+": "+a[d])}a=stlib.data.shareInfo;for(d in a){b=b+(d+"="+encodeURIComponent(a[d])+"&");_$d1("constructParamStringShareInfo: "+d+": "+a[d])}return b.substring(0,
b.length-1)},sharePinterest:function(){typeof stWidget!="undefined"&&typeof stWidget.closeWidget==="function"&&stWidget.closeWidget();typeof stcloseWidget==="function"&&stcloseWidget();typeof stToolbar!="undefined"&&typeof stToolbar.closeWidget==="function"&&stToolbar.closeWidget();var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("charset","UTF-8");a.setAttribute("src","//assets.pinterest.com/js/pinmarklet.js?r="+Math.random()*99999999);document.body.appendChild(a)},
share:function(a,b){var d=stlib.sharer.constructParamString();_$d_();_$d1("Initiating a Share with the following url:");_$d2(stlib.sharer.sharerUrl+d);if(stlib.data.get("destination","shareInfo")=="pinterest"&&stlib.data.get("source","shareInfo").match(/share4xmobile/)==null&&stlib.data.get("source","shareInfo").match(/share4xpage/)==null&&stlib.data.get("source","shareInfo").match(/5xpage/)==null&&(stlib.data.get("image","shareInfo")==false||stlib.data.get("image","shareInfo")==null)||stlib.data.get("destination",
"shareInfo")=="copy"||stlib.data.get("destination","shareInfo")=="plusone"||stlib.data.get("destination","shareInfo").match(stlib.sharer.regAuto)||typeof stlib.nativeButtons!="undefined"&&stlib.nativeButtons.checkNativeButtonSupport(stlib.data.get("destination","shareInfo"))){var e=new Image(1,1);e.src=stlib.sharer.sharerUrl+d;e.onload=function(){}}else typeof b!="undefined"&&b==true?window.open(stlib.sharer.sharerUrl+d,(new Date).valueOf(),"scrollbars=1, status=1, height=480, width=640, resizable=1"):
window.open(stlib.sharer.sharerUrl+d);a?a():null}};
stlib.browser={iemode:null,firefox:null,firefoxVersion:null,safari:null,chrome:null,windows:null,mac:null,ieFallback:/MSIE [6789]/.test(navigator.userAgent),init:function(){if(window.navigator.appName=="Microsoft Internet Explorer")if(document.documentMode)stlib.browser.iemode=document.documentMode;else{stlib.browser.iemode=5;if(document.compatMode&&document.compatMode=="CSS1Compat")stlib.browser.iemode=7}stlib.browser.firefox=navigator.userAgent.indexOf("Firefox")!=-1?true:false;stlib.browser.firefoxVersion=
navigator.userAgent.indexOf("Firefox/5.0")!=-1||navigator.userAgent.indexOf("Firefox/9.0")!=-1?false:true;stlib.browser.safari=navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1?true:false;stlib.browser.chrome=navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")!=-1?true:false;stlib.browser.windows=navigator.userAgent.indexOf("Windows")!=-1?true:false;stlib.browser.mac=navigator.userAgent.indexOf("Macintosh")!=-1?true:false},getIEVersion:function(){return stlib.browser.iemode},
isFirefox:function(){return stlib.browser.firefox},firefox8Version:function(){return stlib.browser.firefoxVersion},isSafari:function(){return stlib.browser.safari},isWindows:function(){return stlib.browser.windows},isMac:function(){return stlib.browser.mac}};stlib.browser.init();
stlib.browser.mobile={mobile:!1,uagent:null,android:null,iOs:null,silk:null,windows:null,kindle:null,init:function(){this.uagent=navigator.userAgent.toLowerCase();if(this.isAndroid())this.mobile=true;else if(this.isIOs())this.mobile=true;else if(this.isSilk())this.mobile=true;else if(this.isWindowsPhone())this.mobile=true;else if(this.isKindle())this.mobile=true},isMobile:function(){return this.mobile},isAndroid:function(){if(this.android===null)this.android=this.uagent.indexOf("android")>-1;return this.android},
isKindle:function(){if(this.kindle===null)this.kindle=this.uagent.indexOf("kindle")>-1;return this.kindle},isIOs:function(){if(this.iOs===null)this.iOs=this.uagent.indexOf("ipad")>-1||this.uagent.indexOf("ipod")>-1||this.uagent.indexOf("iphone")>-1;return this.iOs},isSilk:function(){if(this.silk===null)this.silk=this.uagent.indexOf("silk")>-1;return this.silk},isWindowsPhone:function(){if(this.windows===null)this.windows=this.uagent.indexOf("windows phone")>-1;return this.windows},handleForMobileFriendly:function(a,
b,d){if(!this.isMobile())return false;if(typeof stLight==="undefined"){stLight={};stLight.publisher=b.publisher;stLight.sessionID=b.sessionID;stLight.fpc=""}var e=typeof a.title!=="undefined"?a.title:encodeURIComponent(document.title),g=typeof a.url!=="undefined"?a.url:document.URL;if(b.service=="sharethis"){var e=typeof a.title!=="undefined"?a.title:encodeURIComponent(document.title),g=typeof a.url!=="undefined"?a.url:document.URL,f=document.createElement("form");f.setAttribute("method","GET");f.setAttribute("action",
"http://edge.sharethis.com/share4x/mobile.html");f.setAttribute("target","_blank");e={url:g,title:e,destination:b.service,publisher:stLight.publisher,fpc:stLight.fpc,sessionID:stLight.sessionID};if(typeof a.image!="undefined"&&a.image!=null)e.image=a.image;if(typeof a.summary!="undefined"&&a.summary!=null)e.desc=a.summary;if(typeof d!="undefined"&&typeof d.exclusive_services!="undefined"&&d.exclusive_services!=null)e.exclusive_services=d.exclusive_services;if(typeof b.exclusive_services!="undefined"&&
b.exclusive_services!=null)e.exclusive_services=b.exclusive_services;if(typeof d!="undefined"&&typeof d.services!="undefined"&&d.services!=null)e.services=d.services;if(typeof b.services!="undefined"&&b.services!=null)e.services=b.services;g=b;typeof d!="undefined"&&(g=d);if(typeof g.doNotHash!="undefined"&&g.doNotHash!=null)e.doNotHash=g.doNotHash;if(typeof a.via!="undefined"&&a.via!=null)e.via=a.via;e.service=b.service;e.type=b.type;if(stlib.data){a=stlib.json.encode(stlib.data.pageInfo);b=stlib.json.encode(stlib.data.shareInfo);
if(stlib.browser.isFirefox()&&!stlib.browser.firefox8Version()){a=encodeURIComponent(encodeURIComponent(a));b=encodeURIComponent(encodeURIComponent(b))}else{a=encodeURIComponent(a);b=encodeURIComponent(b)}e.pageInfo=a;e.shareInfo=b}for(var k in e){a=document.createElement("input");a.setAttribute("type","hidden");a.setAttribute("name",k);a.setAttribute("value",e[k]);f.appendChild(a)}document.body.appendChild(f);f.submit();return true}if(b.service=="email"){window.location.href="mailto:?Subject="+e+
("&body="+(g+"%0A%0aSent using ShareThis"));return true}return false}};stlib.browser.mobile.init();
stlib.cookie={setCookie:function(a,b,d){var e=navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1,g=navigator.userAgent.indexOf("MSIE")!=-1;if(e||g){d=d?d*86400:0;e=document.createElement("div");e.setAttribute("id",a);e.setAttribute("type","hidden");document.body.appendChild(e);e=document.getElementById(a);g=document.createElement("form");try{var f=document.createElement('<iframe name="'+a+'" ></iframe>')}catch(k){f=document.createElement("iframe")}f.name=a;f.src=
"javascript:false";f.style.display="none";e.appendChild(f);g.action=("https:"==document.location.protocol?"https://sharethis.com/":"http://sharethis.com/")+"account/setCookie.php";g.method="POST";f=document.createElement("input");f.setAttribute("type","hidden");f.setAttribute("name","name");f.setAttribute("value",a);g.appendChild(f);f=document.createElement("input");f.setAttribute("type","hidden");f.setAttribute("name","value");f.setAttribute("value",b);g.appendChild(f);b=document.createElement("input");
b.setAttribute("type","hidden");b.setAttribute("name","time");b.setAttribute("value",d);g.appendChild(b);g.target=a;e.appendChild(g);g.submit()}else{if(d){f=new Date;f.setTime(f.getTime()+d*864E5);d="; expires="+f.toGMTString()}else d="";a=a+"="+escape(b)+d;a=a+("; domain="+escape(".sharethis.com")+";path=/");document.cookie=a}},getCookie:function(a){return(a=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)"))?unescape(a[2]):false},deleteCookie:function(a){var b=navigator.userAgent.indexOf("Safari")!=
-1&&navigator.userAgent.indexOf("Chrome")==-1,d=navigator.userAgent.indexOf("MSIE")!=-1;if(b||d){b=document.createElement("div");b.setAttribute("id",a);b.setAttribute("type","hidden");document.body.appendChild(b);b=document.getElementById(a);d=document.createElement("form");try{var e=document.createElement('<iframe name="'+a+'" ></iframe>')}catch(g){e=document.createElement("iframe")}e.name=a;e.src="javascript:false";e.style.display="none";b.appendChild(e);d.action=("https:"==document.location.protocol?
"https://sharethis.com/":"http://sharethis.com/")+"account/deleteCookie.php";d.method="POST";e=document.createElement("input");e.setAttribute("type","hidden");e.setAttribute("name","name");e.setAttribute("value",a);d.appendChild(e);d.target=a;b.appendChild(d);d.submit()}else document.cookie=a.replace(/^\s+|\s+$/g,"")+"=;path=/;domain=.sharethis.com;expires=Thu, 01-Jan-1970 00:00:01 GMT"},deleteAllSTCookie:function(){for(var a=document.cookie,a=a.split(";"),b=0;b<a.length;b++){var d=a[b],d=d.split("=");
if(!/st_optout/.test(d[0]))document.cookie=d[0]+"=;path=/;domain=.edge.sharethis.com;expires=Thu, 01-Jan-1970 00:00:01 GMT"}},setFpcCookie:function(a,b){var d=new Date,e=d.getFullYear(),g=d.getMonth()+9,f=d.getDate(),d=a+"="+escape(b);e&&(d=d+("; expires="+(new Date(e,g,f)).toGMTString()));e=stlib.cookie.getDomain();d=d+("; domain="+escape(e)+";path=/");document.cookie=d},getFpcCookie:function(a){return(a=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)"))?unescape(a[2]):false},getDomain:function(){var a=
document.domain.split(/\./),b="";a.length>1&&(b="."+a[a.length-2]+"."+a[a.length-1]);return b}};
stlib.fpc={cookieName:"__unam",cookieValue:"",createFpc:function(){if(!document.domain||document.domain.search(/\.gov/)>0)return false;var a=stlib.cookie.getFpcCookie(stlib.fpc.cookieName);if(a==false){var b=Math.round(Math.random()*2147483647),b=b.toString(16),a=(new Date).getTime(),a=a.toString(16),d=window.location.hostname.split(/\./)[1];if(!d)return false;var e="",a=e=stlib.fpc.determineHash(d)+"-"+a+"-"+b+"-1"}else{b=a.split(/\-/);if(b.length==4){a=Number(b[3]);a++;a=b[0]+"-"+b[1]+"-"+b[2]+
"-"+a}}stlib.cookie.setFpcCookie(stlib.fpc.cookieName,a);return stlib.fpc.cookieValue=a},determineHash:function(a){for(var b=0,d=0,e=a.length-1;e>=0;e--){d=parseInt(a.charCodeAt(e));b=(b<<8&268435455)+d+(d<<12);if((d=b&161119850)!=0)b=b^d>>20}return b.toString(16)}};
stlib.validate={regexes:{notEncoded:/(%[^0-7])|(%[0-7][^0-9a-f])|["{}\[\]\<\>\\\^`\|]/gi,tooEncoded:/%25([0-7][0-9a-f])/gi,publisher:/^(([a-z]{2}(-|\.))|)[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,url:/^(http|https):\/\/([a-z0-9!'\(\)\*\.\-\+:]*(\.)[a-z0-9!'\(\)\*\.\-\+:]*)((\/[a-z0-9!'\(\)\*\.\-\+:]*)*)/i,fpc:/^[0-9a-f]{7}-[0-9a-f]{11}-[0-9a-f]{7,8}-[0-9]*$/i,sessionID:/^[0-9]*\.[0-9a-f]*$/i,title:/.*/,description:/.*/,buttonType:/^(chicklet|vcount|hcount|large|custom|button|)$/,
comment:/.*/,destination:/.*/,source:/.*/,image:/(^(http|https):\/\/([a-z0-9!'\(\)\*\.\-\+:]*(\.)[a-z0-9!'\(\)\*\.\-\+:]*)((\/[a-z0-9!'\(\)\*\.\-\+:]*)*))|^$/i,sourceURL:/^(http|https):\/\/([a-z0-9!'\(\)\*\.\-\+:]*(\.)[a-z0-9!'\(\)\*\.\-\+:]*)((\/[a-z0-9!'\(\)\*\.\-\+:]*)*)/i,sharURL:/(^(http|https):\/\/([a-z0-9!'\(\)\*\.\-\+:]*(\.)[a-z0-9!'\(\)\*\.\-\+:]*)((\/[a-z0-9!'\(\)\*\.\-\+:]*)*))|^$/i}};
"undefined"==typeof stlib.data&&(stlib.data={bInit:!1,publisherKeySet:!1,pageInfo:{},shareInfo:{},resetPageData:function(){stlib.data.pageInfo.fpc="ERROR";stlib.data.pageInfo.sessionID="ERROR";stlib.data.pageInfo.hostname="ERROR";stlib.data.pageInfo.location="ERROR"},resetShareData:function(){stlib.data.shareInfo={};stlib.data.shareInfo.url="ERROR";stlib.data.shareInfo.sharURL="";stlib.data.shareInfo.buttonType="ERROR";stlib.data.shareInfo.destination="ERROR";stlib.data.shareInfo.source="ERROR"},
resetData:function(){stlib.data.resetPageData();stlib.data.resetShareData()},validate:function(){function a(a,d){if(d!=encodeURIComponent(d)){b.notEncoded.test(d)?_$de(a+" not encoded"):null;b.tooEncoded.test(d)?_$de(a+" has too much encoding"):null}(b[a]?b[a].test(decodeURIComponent(d)):1)||_$de(a+" failed validation")}var b=stlib.validate.regexes,d=stlib.data.pageInfo,e;for(e in d)a(e,d[e]);d=stlib.data.shareInfo;for(e in d)a(e,d[e])},init:function(){if(!stlib.data.bInit){stlib.data.bInit=true;
stlib.data.resetData();stlib.data.set("url",document.location.href,"shareInfo");var a="";stlib.hash.init();stlib.data.set("shareHash",stlib.hash.shareHash,"pageInfo");stlib.data.set("incomingHash",stlib.hash.incomingHash,"pageInfo");stlib.hash.doNotHash||(a="#"+stlib.data.get("shareHash","pageInfo"));var b=stlib.hash.updateParams();stlib.data.set("url",b+a,"shareInfo");stlib.data.publisherKeySet!=true&&stlib.data.set("publisher","ur.00000000-0000-0000-0000-000000000000","pageInfo");stlib.fpc.createFpc();
stlib.data.set("fpc",stlib.fpc.cookieValue,"pageInfo");a=(new Date).getTime().toString();b=Number(Math.random().toPrecision(5).toString().substr(2)).toString();stlib.data.set("sessionID",a+"."+b,"pageInfo");stlib.data.set("hostname",document.location.hostname,"pageInfo");stlib.data.set("location",document.location.pathname,"pageInfo");b=document.referrer.replace("http://","").replace("https://","").split("/");a=b.shift();b=b.join("/");stlib.data.set("refDomain",a,"pageInfo");stlib.data.set("refQuery",
b,"pageInfo")}},setPublisher:function(a){stlib.data.set("publisher",a,"pageInfo");stlib.data.publisherKeySet=true},setSource:function(a,b){var d="",d=b?b.toolbar?"toolbar"+a:b.page&&b.page!="home"&&b.page!=""?"chicklet"+a:"button"+a:a;stlib.data.set("source",d,"shareInfo")},set:function(a,b,d){_$d_();_$d1("Setting: "+a+": "+b);if(typeof b=="number"||typeof b=="boolean")stlib.data[d][a]=b;else if(typeof b=="undefined"||b==null)_$d1("Value undefined or null");else{stlib.data[d][a]=encodeURIComponent(decodeURIComponent(unescape(b.replace(/<[^<>]*>/gi,
" ")).replace(/%/gi,"%25")));if(a=="url"||a=="location"||a=="image")try{stlib.data[d][a]=encodeURIComponent(decodeURIComponent(decodeURI(b.replace(/<[^<>]*>/gi," ")).replace(/%/gi,"%25")))}catch(e){stlib.data[d][a]=encodeURIComponent(decodeURIComponent(unescape(b.replace(/<[^<>]*>/gi," ")).replace(/%/gi,"%25")))}}},get:function(a,b){return stlib.data[b]&&stlib.data[b][a]?decodeURIComponent(stlib.data[b][a]):false},unset:function(a,b){stlib.data[b]&&typeof stlib.data[b][a]!="undefined"&&delete stlib.data[b][a]}},
stlib.data.resetData());
stlib.hash={doNotHash:!0,hashAddressBar:!1,doNotCopy:!0,prefix:"sthash",shareHash:"",incomingHash:"",validChars:"1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),servicePreferences:{linkedin:"param",stumbleupon:"param",bebo:"param"},hashDestination:function(a){if(a=="copy")return"dpuf";var a=a.substring(0,2)+a.substring(a.length-2,a.length),b=function(a,b){return a.charCodeAt(b)==122?"a":String.fromCharCode(a.charCodeAt(b)+1)};return b(a,0)+b(a,1)+b(a,2)+b(a,3)},getHash:function(){var a=
false,b="",d=document.location.href,d=d.split("#").shift(),d=d.split("?");if(d.length>1){d=d[1].split("&");for(arg in d)try{if(d[arg].substring(0,6)=="sthash"){a=true;b=d[arg]}}catch(e){}return a?b:document.location.hash.substring(1)}return document.location.hash.substring(1)},stripHash:function(a){a=a.split("#");return a.length>1?a[1]:""},clearHash:function(){if(stlib.hash.validateHash(document.location.hash))window.history&&history.replaceState?history.replaceState(null,"ShareThis","#"):/MSIE/.test(navigator.userAgent)?
window.location.replace("#"):document.location.hash=""},init:function(){var a="",b=stlib.hash.validChars.length;for(i=0;i<8;i++)a=a+stlib.hash.validChars[Math.random()*b|0];if(stlib.hash.getHash()=="")stlib.hash.shareHash=stlib.hash.prefix+"."+a;else{var b=stlib.hash.getHash().split("."),d=b.shift();if(d==stlib.hash.prefix||d==stlib.hash.prefix){stlib.hash.incomingHash=stlib.hash.getHash();stlib.hash.shareHash=stlib.hash.prefix+"."+b.shift()+"."+a}else stlib.hash.shareHash=stlib.hash.prefix+"."+a}if(!stlib.hash.doNotHash&&
stlib.hash.hashAddressBar){if(document.location.hash==""||stlib.hash.validateHash(document.location.hash))window.history&&history.replaceState?history.replaceState(null,"ShareThis","#"+stlib.hash.shareHash+".dpbs"):/MSIE/.test(navigator.userAgent)?window.location.replace("#"+stlib.hash.shareHash+".dpbs"):document.location.hash=stlib.hash.shareHash+".dpbs"}else stlib.hash.clearHash();!stlib.hash.doNotHash&&!stlib.hash.doNotCopy&&stlib.hash.copyPasteInit();stlib.hash.copyPasteLog()},checkURL:function(){var a=
stlib.data.get("destination","shareInfo"),b=stlib.hash.updateParams(a),d="."+stlib.hash.hashDestination(a);stlib.hash.updateDestination(d);if(!stlib.hash.doNotHash&&typeof stlib.data.pageInfo.shareHash!="undefined"){d=stlib.data.get("url","shareInfo");d=stlib.hash.stripHash(d);if(stlib.hash.validateHash(d)||d=="")if(typeof stlib.hash.servicePreferences[a]!="undefined")if(stlib.hash.servicePreferences[a]=="param"){_$d1("Don't use hash, use params");_$d2(b);if(b.split("?").length>1){var d=b.split("?")[1].split("&"),
e=false;for(arg in d)d[arg].split(".")[0]=="sthash"&&(e=true);e?stlib.data.set("url",b,"shareInfo"):stlib.data.set("url",b+"&"+stlib.data.pageInfo.shareHash,"shareInfo")}else stlib.data.set("url",b+"?"+stlib.data.pageInfo.shareHash,"shareInfo");a=="linkedin"&&stlib.data.get("sharURL","shareInfo")!=""&&stlib.data.set("sharURL",stlib.data.get("url","shareInfo"),"shareInfo")}else{_$d1("Using Hash");stlib.data.set("url",b+"#"+stlib.data.pageInfo.shareHash,"shareInfo")}else{_$d1("Not using custom destination hash type");
stlib.data.set("url",b+"#"+stlib.data.pageInfo.shareHash,"shareInfo")}}},updateParams:function(){var a=stlib.data.get("url","shareInfo").split("#").shift(),b=/(\?)sthash\.[a-zA-z0-9]{8}\.[a-zA-z0-9]{8}/,d=/(&)sthash\.[a-zA-z0-9]{8}\.[a-zA-z0-9]{8}/,e=/(\?)sthash\.[a-zA-z0-9]{8}/,g=/(&)sthash\.[a-zA-z0-9]{8}/;b.test(a)?a=a.replace(b,"?"+stlib.data.pageInfo.shareHash):d.test(a)?a=a.replace(d,"&"+stlib.data.pageInfo.shareHash):e.test(a)?a=a.replace(e,"?"+stlib.data.pageInfo.shareHash):g.test(a)&&(a=
a.replace(g,"&"+stlib.data.pageInfo.shareHash));return a},updateDestination:function(a){var b=/sthash\.[a-zA-z0-9]{8}\.[a-z]{4}/;_$d_();_$d1("Updating Destination");if(/sthash\.[a-zA-z0-9]{8}\.[a-zA-z0-9]{8}\.[a-z]{4}/.test(stlib.data.pageInfo.shareHash)){_$d2(stlib.data.pageInfo.shareHash.substring(0,24));stlib.data.pageInfo.shareHash=stlib.data.pageInfo.shareHash.substring(0,24)+a}else if(b.test(stlib.data.pageInfo.shareHash)){_$d2(stlib.data.pageInfo.shareHash.substring(0,15));stlib.data.pageInfo.shareHash=
stlib.data.pageInfo.shareHash.substring(0,15)+a}else stlib.data.pageInfo.shareHash=stlib.data.pageInfo.shareHash+a},validateHash:function(a){var b=/[\?#&]?sthash\.[a-zA-z0-9]{8}\.[a-zA-z0-9]{8}$/,d=/[\?#&]?sthash\.[a-zA-z0-9]{8}\.[a-zA-z0-9]{8}\.[a-z]{4}$/,e=/[\?#&]?sthash\.[a-zA-z0-9]{8}\.[a-z]{4}$/;return/[\?#&]?sthash\.[a-zA-z0-9]{8}$/.test(a)||e.test(a)||d.test(a)||b.test(a)},appendHash:function(a){var b=stlib.hash.stripHash(a);if(stlib.data.pageInfo.shareHash&&(stlib.hash.validateHash(b)||b==
""))a=a.replace("#"+b,"")+"#"+stlib.data.pageInfo.shareHash;return a},copyPasteInit:function(){var a=document.getElementsByTagName("body")[0],b=document.createElement("div");b.style.position="absolute";b.style.top="-1999px";b.style.left="-1988px";a.appendChild(b);b.innerHTML="ShareThis Copy and Paste";document.location.href.split("#").shift();document.addEventListener&&a.addEventListener("copy",function(){if(typeof Tynt=="undefined"){var a=document.getSelection(),e=a.getRangeAt(0).cloneContents();
b.innerHTML="";b.appendChild(e);if((a+"").trim().length!=0)b.innerHTML=b.innerHTML==a+""?stlib.hash.selectionModify(a):b.innerHTML+stlib.hash.selectionModify(a,true);e=document.createRange();e.selectNodeContents(b);var g=a.getRangeAt(0);a.removeAllRanges();a.addRange(e);setTimeout(function(){a.removeAllRanges();a.addRange(g)},0)}},false)},copyPasteLog:function(){var a=window.addEventListener?"addEventListener":"attachEvent";document.getElementsByTagName("body")[0][a](a=="attachEvent"?"oncopy":"copy",
function(){var a=true;stlib.data.resetShareData();stlib.data.set("url",document.location.href,"shareInfo");stlib.data.setSource("copy");stlib.data.set("destination","copy","shareInfo");stlib.data.set("buttonType","custom","shareInfo");if(typeof Tynt!="undefined"){stlib.data.set("result","tynt","shareInfo");stlib.logger.log("debug");a=false}if(typeof addthis_config!="undefined"){stlib.data.set("result","addThis","shareInfo");if(typeof addthis_config.data_track_textcopy=="undefined"||addthis_config.data_track_textcopy){stlib.data.set("enabled",
"true","shareInfo");a=false}else stlib.data.set("enabled","false","shareInfo");stlib.logger.log("debug")}if(a){stlib.data.set("result","pass","shareInfo");stlib.logger.log("debug")}},false)},logCopy:function(a,b){stlib.data.resetShareData();stlib.data.set("url",a,"shareInfo");stlib.data.setSource("copy");stlib.data.set("destination","copy","shareInfo");stlib.data.set("buttonType","custom","shareInfo");b&&stlib.data.set("description",b,"shareInfo");stlib.sharer.share()},selectionModify:function(a,
b){a=""+a;_$d_();_$d1("Copy Paste");var d=/^((http|https):\/\/([a-z0-9!'\(\)\*\.\-\+:]*(\.)[a-z0-9!'\(\)\*\.\-\+:]*)((\/[a-z0-9!'\(\)\*\.\-\+:]*)*))/i,e=/^([a-z0-9!'\(\)\*\.\-\+:]*(\.)[a-z0-9!'\(\)\*\.\-\+:]*)((\/[a-z0-9!'\(\)\*\.\-\+:]*)*)/i,g=/^\+?1?[\.\-\\)_\s]?[\\(]?[0-9]{3}[\.\-\\)_\s]?[0-9]{3}[\.\-_\s]?[0-9]{4}$|^[0-9]{3}[\.\-_\s]?[0-9]{4}$/,f=/^[0-9]{3}[\.\-_\s]?[0-9]{8}$/,k=/^[0-9]{2}[\.\-_\s]?[0-9]{4}[\.\-_\s]?[0-9]{4}$/,l=/[\-_\.a-z0-9]+@[\-_\.a-z0-9]+\.[\-_\.a-z0-9]+/i,j=/[\s@]/,m=document.location.href.split("#").shift(),
n="#"+stlib.hash.shareHash,s="",p="",q="";if(typeof b=="undefined"&&(d.test(a)||e.test(a))&&!j.test(a.trim())){_$d2("is Url");q=p=a.match(/#/)==null||stlib.hash.validateHash(a)?a.split("#")[0]+n+".dpuf":a}else{_$d2("is Not Url");p=document.location.hash==""||/^#$/.test(document.location.hash)||stlib.hash.validateHash(document.location.hash)?m+n+".dpuf":document.location.href;q=a;if(a.length>50){s=" - See more at: "+p+"";!g.test(a)&&(!f.test(a)&&!k.test(a)&&!l.test(a))&&(q=q+s)}}a.length>140&&(a=a.substring(0,
137)+"...");stlib.hash.logCopy(p,a);return b&&b==true?s:q}};
stlib.pump=function(a,b,d){this.isIframeSending=this.isIframeReady=false;this.getHash=function(a){a=a.split("#");a.shift();return a.join("#")};this.broadcastInit=function(a){this.destination=a;_$d_("---------------------");_$d1("Initiating broadcaster:");_$d(this.destination)};this.broadcastSendMessage=function(a){_$d_("---------------------");_$d1("Initiating Send:");if(this.destination===window)if(stlib.browser.ieFallback){window.location.replace(window.location.href.split("#")[0]+"#"+a);_$d2("child can't communicate with parent")}else{_$d2("Iframe to publisher: "+
a);parent.postMessage("#"+a,document.referrer)}else{_$d2("Publisher to Iframe: "+a);if(stlib.browser.ieFallback){if(this.destination.contentWindow){this.destination.contentWindow.location.replace(this.destination.src+"#"+a);this.isIframeSending=true}}else this.destination.contentWindow.postMessage("#"+a,this.destination.src)}};this.receiverInit=function(a,b){_$d_("---------------------");_$d1("Initiating Receiver:");_$d(a);if(stlib.browser.ieFallback){this.callback=b;this.source=a;if(a===window){window.location.replace(window.location.href.split("#")[0]+
"#");this.currentIframe=window.location.hash;var d="receiver"+stlib.functionCount;stlib.functions[d]=function(a){if(""!=window.location.hash&&"#"!=window.location.hash){a(window.location.hash);window.location.replace(window.location.href.split("#")[0]+"#")}};stlib.functionCount++;var k="callback"+stlib.functionCount;stlib.functions[k]=b;stlib.functionCount++;setInterval("stlib.functions['"+d+"'](stlib.functions['"+k+"'])",200)}d=window.addEventListener?"addEventListener":"attachEvent";window[d](d==
"attachEvent"?"onmessage":"message",function(b){a!=window&&b.origin.indexOf("sharethis.com")!=-1&&b.data.match(/#Pinterest Click/)&&stlib.sharer.sharePinterest()},false)}else{d=window.addEventListener?"addEventListener":"attachEvent";window[d](d=="attachEvent"?"onmessage":"message",function(d){if(a==window){_$d1("arrived in iframe from:");_$d(d.origin);(d.data.match(/#fragmentPump/)||d.data.match(/#Buttons Ready/)||d.data.match(/#Widget Ready/)||d.data.indexOf("#light")==0||d.data.indexOf("#widget")==
0||d.data.indexOf("#popup")==0||d.data.indexOf("#show")==0||d.data.indexOf("#init")==0||d.data.indexOf("#test")==0||d.data.indexOf("#data")==0)&&b(d.data)}else if(d.origin.indexOf("sharethis.com")!=-1){_$d1("arrived in parent from:");_$d(d.origin);d.data.match(/#fragmentPump/)||d.data.match(/#Buttons Ready/)||d.data.match(/#Widget Ready/)||d.data.indexOf("#light")==0||d.data.indexOf("#widget")==0||d.data.indexOf("#popup")==0||d.data.indexOf("#show")==0||d.data.indexOf("#init")==0||d.data.indexOf("#test")==
0||d.data.indexOf("#data")==0?b(d.data):d.data.match(/#Pinterest Click/)&&stlib.sharer.sharePinterest()}else{_$d1("discarded event from:");_$d(d.origin)}},false)}};this.broadcastInit(a);this.receiverInit(b,d)};
stlib.json={c:{"\b":"b","\t":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\","/":"/"},d:function(a){return a<10?"0".concat(a):a},e:function(a,b,d){d=eval;delete eval;typeof eval==="undefined"&&(eval=d);b=eval(""+a);eval=d;return b},i:function(a,b,d){return 1*a.substr(b,d)},p:["","000","00","0",""],rc:null,rd:/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}$/,rs:/(\x5c|\x2F|\x22|[\x0c-\x0d]|[\x08-\x0a])/g,rt:/^([0-9]+|[0-9]+[,\.][0-9]{1,3})$/,ru:/([\x00-\x07]|\x0b|[\x0e-\x1f])/g,s:function(a,
b){return"\\".concat(stlib.json.c[b])},u:function(a,b){var d=b.charCodeAt(0).toString(16);return"\\u".concat(stlib.json.p[d.length],d)},v:function(a,b){return stlib.json.types[typeof result](result)!==Function&&(b.hasOwnProperty?b.hasOwnProperty(a):b.constructor.prototype[a]!==b[a])},types:{"boolean":function(){return Boolean},"function":function(){return Function},number:function(){return Number},object:function(a){return a instanceof a.constructor?a.constructor:null},string:function(){return String},
undefined:function(){return null}},$$:function(a){function b(b,e){e=b[a];delete b[a];try{stlib.json.e(b)}catch(g){b[a]=e;return 1}}return b(Array)&&b(Object)},encode:function(){var a=arguments.length?arguments[0]:this,b,d;if(a===null)b="null";else if(a!==void 0&&(d=stlib.json.types[typeof a](a)))switch(d){case Array:b=[];for(var e=0,g=0,f=a.length;g<f;g++)if(a[g]!==void 0&&(d=stlib.json.encode(a[g])))b[e++]=d;b="[".concat(b.join(","),"]");break;case Boolean:b=String(a);break;case Date:b='"'.concat(a.getFullYear(),
"-",stlib.json.d(a.getMonth()+1),"-",stlib.json.d(a.getDate()),"T",stlib.json.d(a.getHours()),":",stlib.json.d(a.getMinutes()),":",stlib.json.d(a.getSeconds()),'"');break;case Function:break;case Number:b=isFinite(a)?String(a):"null";break;case String:b='"'.concat(a.replace(stlib.json.rs,stlib.json.s).replace(stlib.json.ru,stlib.json.u),'"');break;default:e=0;b=[];for(g in a)if(a[g]!==void 0&&(d=stlib.json.encode(a[g])))b[e++]='"'.concat(g.replace(stlib.json.rs,stlib.json.s).replace(stlib.json.ru,
stlib.json.u),'":',d);b="{".concat(b.join(","),"}")}return b},decode:function(a){if(typeof a=="string"){var b=null;try{if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return b=window.JSON&&window.JSON.parse?window.JSON.parse(a):(new Function("return "+a))();return null}catch(d){}}}};
try{stlib.json.rc=/^("(\\.|[^"\\\n\r])*?"|[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t])+?$/}catch(z$$4){stlib.json.rc=/^(true|false|null|\[.*\]|\{.*\}|".*"|\d+|\d+\.\d+)$/}
stlib.logger={loggerUrl:("https:"==document.location.protocol?"https://":"http://")+"l.sharethis.com/",constructParamString:function(){var a=stlib.data.pageInfo,b="",d;for(d in a)b=b+(d+"="+a[d]+"&");a=stlib.data.shareInfo;for(d in a)b=b+(d+"="+a[d]+"&");return b.substring(0,b.length-1)},log:function(a,b){_$d_();_$d1("Log Event PageInfo:");_$d(stlib.data.pageInfo);_$d1("Log Event ShareInfo:");_$d(stlib.data.shareInfo);if(typeof a=="undefined")_$de("event does not exist \nFor help, contact support@sharethis.com");
else if(stlib.data.pageInfo==null||stlib.data.shareInfo==null)_$de("stlib.logger does not have enough info to log \nFor help, contact support@sharethis.com");else if(stlib.data.get("url","shareInfo"))if(stlib.data.get("sessionID","pageInfo"))if(!stlib.data.get("destination","shareInfo")&&a!="pview")_$de("shareThisInfo.destination do not exist \nFor help, contact support@sharethis.com");else if(!stlib.data.get("buttonType","shareInfo")&&a!="pview")_$de("shareThisInfo.type do not exist \nFor help, contact support@sharethis.com");
else if(stlib.data.get("source","shareInfo")){if(a=="pview"){stlib.data.unset("destination","shareInfo");stlib.data.unset("buttonType","shareInfo")}else{stlib.data.unset("refDomain","pageInfo");stlib.data.unset("refQuery","pageInfo")}if(typeof stlib.data.get("counter","shareInfo")!="undefined"){var d=0;stlib.data.get("counter","shareInfo")&&(d=stlib.data.get("counter","shareInfo"));stlib.data.set("ts"+(new Date).getTime()+"."+d,"","shareInfo");stlib.data.unset("counter","shareInfo")}else stlib.data.set("ts"+
(new Date).getTime(),"","shareInfo");d=stlib.logger.loggerUrl+(a=="pview"?"pview":a=="debug"?"cns":"log")+"?event="+a+"&"+stlib.logger.constructParamString();_$d1("Final Log Url:");_$d2(d);var e=new Image(1,1);e.src=d;e.onload=function(){};b?b():null}else _$de("shareThisInfo.source do not exist \nFor help, contact support@sharethis.com");else _$de("sharePageInfo.sessionID do not exist \nFor help, contact support@sharethis.com");else _$de("shareThisInfo.url do not exist \nFor help, contact support@sharethis.com")}};
stlib.scriptLoader={loadJavascript:function(a,b){_$d_();_$d1("Loading JS: "+a);var d=stlib.scriptLoader;d.head=document.getElementsByTagName("head")[0];d.scriptSrc=a;d.script=document.createElement("script");d.script.setAttribute("type","text/javascript");d.script.setAttribute("src",d.scriptSrc);d.script.async=true;d.script.onload=b;d.script.onreadystatechange=function(){this.readyState=="loaded"&&b()};d.s=document.getElementsByTagName("script")[0];d.s.parentNode.insertBefore(d.script,d.s)},loadCSS:function(a,
b){_$d_();_$d1("Loading CSS: "+a);var d=stlib.scriptLoader,e;d.head=document.getElementsByTagName("head")[0];d.cssSrc=a;d.css=document.createElement("link");d.css.setAttribute("rel","stylesheet");d.css.setAttribute("type","text/css");d.css.setAttribute("href",a);d.css.setAttribute("id",a);setTimeout(function(){b();document.getElementById(a)||(e=setInterval(function(){if(document.getElementById(a)){clearInterval(e);b()}},100))},100);d.head.appendChild(d.css)}};
stlib.nativeButtons={supportedNativeButtons:{linkedinfollow:{log:!0,config:!0,dependencyLoaded:!1,dependencyLoading:!1,requiredFields:[["st_followId","Profile Id","Enter '207839' for profile id"]]},twitterfollow:{log:!1,config:!0,requiredFields:[["st_username","Username","Enter 'sharethis' for username"]]},pinterestfollow:{log:!0,config:!0,requiredFields:[["st_username","Username","Enter 'sharethis' for username"]]},youtube:{log:!0,config:!0,requiredFields:[["st_username","Username","Enter 'sharethis' for username"]]},
foursquaresave:{log:!1,config:!0,dependencyLoaded:!1,dependencyLoading:!1},foursquarefollow:{log:!1,config:!0,requiredFields:[["st_username","Username","Enter 'sharethis' for username"],["st_followId","Follow id","Enter '1234567' for follow id"]]},googleplusfollow:{log:!0,config:!0,requiredFields:[["st_followId","Page Id","Enter '110967630299632321627' for page id"]]},googleplusadd:{log:!0,config:!0,requiredFields:[["st_followId","Profile Id","Enter '113842823840690472625' for profile id"]]}},loadService:function(a){if(a==
"foursquaresave"||a=="foursquarefollow")if(stlib.nativeButtons.supportedNativeButtons.foursquaresave.dependencyLoaded==false){if(stlib.nativeButtons.supportedNativeButtons.foursquaresave.dependencyLoading==false){stlib.nativeButtons.supportedNativeButtons.foursquaresave.dependencyLoading=true;var a="http://platform.foursquare.com/js/widgets.js",b={uid:"606"};if("https:"==document.location.protocol){a="http://platform-s.foursquare.com/js/widgets.js";b.secure=true}window.___fourSq=b;b=document.createElement("script");
b.type="text/javascript";b.src=a;b.async=true;a=document.getElementsByTagName("script")[0];b.onload=function(){fourSq.widget.Factory.go();stlib.nativeButtons.supportedNativeButtons.foursquaresave.dependencyLoaded=true;stlib.nativeButtons.supportedNativeButtons.foursquaresave.dependencyLoading=false};b.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){fourSq.widget.Factory.go();stlib.nativeButtons.supportedNativeButtons.foursquaresave.dependencyLoaded=true;stlib.nativeButtons.supportedNativeButtons.foursquaresave.dependencyLoading=
false}};a.parentNode.insertBefore(b,a)}}else fourSq.widget.Factory.go();else if(a!="pinterestfollow"&&a!="twitterfollow"&&a!="youtube"&&a=="linkedinfollow")if(window.IN&&typeof window.IN.parse==="function")window.IN.parse();else if(stlib.nativeButtons.supportedNativeButtons.linkedinfollow.dependencyLoading==false){stlib.nativeButtons.supportedNativeButtons.linkedinfollow.dependencyLoading=true;a="//platform.linkedin.com/in.js";b=document.createElement("script");b.type="text/javascript";b.src=a;b.async=
true;a=document.getElementsByTagName("script")[0];b.onload=function(){stlib.nativeButtons.supportedNativeButtons.linkedinfollow.dependencyLoading=false};b.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded")stlib.nativeButtons.supportedNativeButtons.linkedinfollow.dependencyLoading=false};a.parentNode.insertBefore(b,a)}},logService:function(a,b){stlib.data.resetShareData();stlib.data.set("url",b,"shareInfo");stlib.data.set("destination",a,"shareInfo");stlib.data.setSource("chicklet");
stlib.data.set("buttonType","chicklet","shareInfo");stlib.sharer.share()},makeButton:function(a,b,d){if(a=="foursquaresave"){try{var e=document.createElement("<div></div>"),g=document.createElement("<a></a>")}catch(f){e=document.createElement("div");g=document.createElement("a")}e.className="stNativeButton stFourSquare";g.setAttribute("href","https://foursquare.com/intent/venue.html");g.setAttribute("class","fourSq-widget");g.setAttribute("data-on-open","foursquareCallback");e.appendChild(g);return e}if(a==
"foursquarefollow"){if(typeof d.username=="undefined"||d.username==""||typeof d.followId=="undefined"||d.followId=="")return false;try{e=document.createElement("<div></div>");g=document.createElement("<a></a>")}catch(k){e=document.createElement("div");g=document.createElement("a")}e.className="stNativeButton stFourSquare";g.setAttribute("href","https://foursquare.com/user/"+d.username);g.setAttribute("class","fourSq-widget");g.setAttribute("data-type","follow");g.setAttribute("data-fuid",d.followId);
g.setAttribute("data-on-open","foursquareCallback");e.appendChild(g);return e}if(a=="googleplusfollow"||a=="googleplusadd"){if(typeof d.followId=="undefined"||d.followId=="")return false;try{var l=document.createElement("<span></span>")}catch(j){l=document.createElement("span")}l.className="stNativeButton stGoogleNative";b=document.createElement("g:plus");b.setAttribute("href","https://plus.google.com/"+d.followId);b.setAttribute("width","300");b.setAttribute("height","69");l.appendChild(b);return l}if(a==
"pinterestfollow"){if(typeof d.username=="undefined"||d.username=="")return false;try{var m=document.createElement("<span></span>"),n=document.createElement("<a></a>"),s=document.createElement("<img></img>")}catch(p){m=document.createElement("span");n=document.createElement("a");s=document.createElement("img")}m.className="stNativeButton stPinterestfollow";b=d.username;n.setAttribute("target","_blank");n.setAttribute("href","//pinterest.com/"+b+"/");s.setAttribute("src","//passets-cdn.pinterest.com/images/follow-on-pinterest-button.png");
s.setAttribute("width","156");s.setAttribute("height","26");s.setAttribute("alt","Follow "+b+" on Pinterest");n.appendChild(s);m.appendChild(n);return m}if(a=="twitterfollow"){if(typeof d.username=="undefined"||d.username=="")return false;try{var q=document.createElement("<iframe></iframe>")}catch(t){q=document.createElement("iframe")}d="&screen_name="+d.username;l="&show_count=false";iedocmode=stlib.browser.getIEVersion();b=="vcount"?l="&show_count=true":b=="hcount"&&(l="&show_count=true");q.setAttribute("allowtransparency",
"true");q.setAttribute("frameborder","0");q.setAttribute("scrolling","no");q.className="stTwitterFollowFrame";q.setAttribute("src","//platform.twitter.com/widgets/follow_button.html?lang=en&show_screen_name=false"+d+l);b=document.createElement("span");b.className="stNativeButton stTwitterFollowFrame stTwitterFollow";b.appendChild(q);return b}if(a=="youtube"){if(typeof d.username=="undefined"||d.username=="")return false;try{var r=document.createElement("<span></span>"),o=document.createElement("<a></a>"),
v=document.createElement("<img></img>")}catch(C){r=document.createElement("span");o=document.createElement("a");v=document.createElement("img")}r.setAttribute("class","stNativeButton stYoutube");b=d.username;o.setAttribute("target","_blank");o.setAttribute("href","//youtube.com/subscription_center?add_user="+b);v.setAttribute("src","//s.ytimg.com/yt/img/creators_corner/Subscribe_to_my_videos/YT_Subscribe_130x36_red.png");v.setAttribute("alt","Follow "+b+" on youtube");o.appendChild(v);r.appendChild(o);
return r}if(a=="linkedinfollow"){if(typeof d.followId=="undefined"||d.followId=="")return false;q=document.createElement("span");q.setAttribute("class","stNativeButton stLinkedinfollow");l=document.createElement("script");l.type="text/javascript";l.setAttribute("type","IN/FollowCompany");l.setAttribute("data-id",d.followId);l.setAttribute("data-counter","none");b=="vcount"?l.setAttribute("data-counter","top"):b=="hcount"&&l.setAttribute("data-counter","right");q.appendChild(l);return q}},checkNativeButtonSupport:function(a){return stlib.nativeButtons.supportedNativeButtons[a]?
true:false},checkNativeButtonLogging:function(a){return stlib.nativeButtons.supportedNativeButtons[a]?stlib.nativeButtons.supportedNativeButtons[a].log:false},checkNativeButtonConfig:function(a){return stlib.nativeButtons.supportedNativeButtons[a]?stlib.nativeButtons.supportedNativeButtons[a].config:false}};
foursquareCallback=function(a){if(a){var b="foursquaresave",d="https://foursquare.com/intent/venue.html";if(a.config.type){b="foursquarefollow";d="https://foursquare.com/user/"+a.config.fuid}stlib.nativeButtons.logService(b,d)}};
stlib.nativeCounts={nativeCountServices:{linkedin:!0,facebook:!0,stumbleupon:!0},nativeFunc:[],addNativeFunc:function(a,b){stlib.nativeCounts.nativeFunc[a]=b},getNativeCounts:function(a,b,d){switch(a){case "facebook":stlib.scriptLoader.loadJavascript("http://api.facebook.com/method/fql.query?format=json&query=select url, like_count, total_count, comment_count, share_count, click_count from link_stat where url='"+encodeURIComponent(b)+"'&callback="+d,function(){});break;case "linkedin":stlib.scriptLoader.loadJavascript("//www.linkedin.com/countserv/count/share?format=jsonp&callback="+
d+"&url="+encodeURIComponent(b),function(){});break;case "stumbleupon":stlib.scriptLoader.loadJavascript("http://www.stumbleupon.com/services/1.1/badge.getinfo?url="+encodeURIComponent(b)+"&format=jsonp&callback="+d,function(){})}},checkNativeCountServicesQueue:function(a){return stlib.nativeCounts.nativeCountServices[a]?true:false}};
__stgetPubGA=function(){if(typeof _gaq!=="undefined"&&typeof __stPubGA=="undefined"){typeof _gat!=="undefined"&&(__stPubGA=_gat._getTrackerByName("~0")._getAccount());typeof __stPubGA!=="undefined"&&__stPubGA=="UA-XXXXX-X"&&_gaq.push(function(){__stPubGA=_gat._getTrackerByName()._getAccount()})}__stPubGA=="UA-XXXXX-X"&&delete __stPubGA};
if("undefined"==typeof stLight&&"undefined"==typeof SHARETHIS){var stRecentServices=!1;"undefined"==typeof switchTo5x&&(switchTo5x=!1);var esiLoaded=!1,stIsLoggedIn=!1,servicesLoggedIn={},stFastShareObj={shorten:!0};if("https:"==document.location.protocol)var useFastShare=!1;"undefined"==typeof useFastShare&&(useFastShare=!0);stLight=new function(){this.publisher=null;this.sessionID_time=(new Date).getTime().toString();this.sessionID_rand=Number(Math.random().toPrecision(5).toString().substr(2)).toString();
this.sessionID=this.sessionID_time+"."+this.sessionID_rand;this.fpc=null;this.counter=0;this.readyRun=false;this.meta={hostname:document.location.host,location:document.location.pathname};this.clickCallBack=this.loadedFromBar=false};stLight.onReady=function(){if(stLight.readyRun==true)return false;stlib.data.init();stLight.fpc=stlib.data.get("fpc","pageInfo");if(stButtons.messageQueueInstance==null)stButtons.messageQueueInstance=new stlib.messageQueue;stLight.processSTQ();stLight.readyRun=true;if(stLight.publisher==
null&&typeof window.console!=="undefined")try{console.debug("Please specify a ShareThis Publisher Key \nFor help, contact support@sharethis.com")}catch(a){}var b=stLight.getSource();stLight.log("pview",b);stWidget.options.sessionID=stLight.sessionID;stWidget.options.fpc=stLight.fpc;stLight.loadServicesLoggedIn(function(){stButtons.onReady()})};stLight.getSource=function(){var a="share4x";switchTo5x&&(a="share5x");stLight.hasButtonOnPage()?stLight.loadedFromBar&&(a=switchTo5x?"bar_share5x":"bar_share4x"):
stLight.loadedFromBar&&(a="bar");return a};stLight.getSource2=function(a){var b="share4x";if(switchTo5x){b="share5x";try{stLight.clickCallBack!=false&&stLight.clickCallBack(a.service)}catch(d){}}if(a.type=="stbar"||a.type=="stsmbar")b="bar";return b};stLight.log=function(a,b,d,e){stlib.data.resetShareData();stlib.data.set("url",document.location.href,"shareInfo");stlib.data.set("title",document.title,"shareInfo");stlib.data.set("counter",stLight.counter++,"shareInfo");stlib.data.setSource(b);typeof d!=
"undefined"&&stlib.data.set("destination",d,"shareInfo");typeof e!="undefined"&&stlib.data.set("buttonType",e,"shareInfo");stlib.logger.log(a);a=="pview"&&stLight.createSegmentFrame()};stLight._stFpc=function(){if(!document.domain||document.domain.search(/\.gov/)>0)return false;var a=stLight._stGetFpc("__unam");if(a==false){var b=Math.round(Math.random()*2147483647),b=b.toString(16),a=(new Date).getTime(),a=a.toString(16),d="",d=stLight._stGetD(),d=d.split(/\./)[1];if(!d)return false;a=d=stLight._stdHash(d)+
"-"+a+"-"+b+"-1";stLight._stSetFpc(a)}else{b=a.split(/\-/);if(b.length==4){a=Number(b[3]);a++;a=b=b[0]+"-"+b[1]+"-"+b[2]+"-"+a;stLight._stSetFpc(a)}}return a};stLight._stSetFpc=function(a){var b=new Date,d=b.getFullYear(),e=b.getMonth()+9,b=b.getDate(),a="__unam="+escape(a);d&&(a=a+("; expires="+(new Date(d,e,b)).toGMTString()));d=stLight._stGetD();a=a+("; domain="+escape(d)+";path=/");document.cookie=a};stLight._stGetD=function(){var a=document.domain.split(/\./),b="";a.length>1&&(b="."+a[a.length-
2]+"."+a[a.length-1]);return b};stLight._stGetFpc=function(a){return(a=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)"))?unescape(a[2]):false};stLight._stdHash=function(a){for(var b=0,d=0,e=a.length-1;e>=0;e--){d=parseInt(a.charCodeAt(e));b=(b<<8&268435455)+d+(d<<12);if((d=b&161119850)!=0)b=b^d>>20}return b.toString(16)};stLight._thisScript=null;stLight.getShareThisLightScript=function(){for(var a=document.getElementsByTagName("script"),b=null,d=0;d<a.length;d++)a[d].src.search(/.*sharethis.*\/button\/light.*/)>=
0&&(b=a[d]);return b};stLight.dbrInfo=function(){var a=document.referrer;if(a&&a.length>0){var b=a.match(/\/\/.*?\//);if(typeof b!=="undefined"&&typeof b[0]!=="undefined"&&RegExp(document.domain,"gi").test(b[0])==true)return false;var b="",d=a.replace(/(http:\/\/)(.*?)\/.*/i,"$2");if(d.length>0)b=b+("&refDomain="+d);else return false;a=a.replace(/(^.*\?)(.*)/ig,"$2");a.length>0&&(b=b+("&refQuery="+encodeURIComponent(a)));return b}return false};stLight.odjs=function(a,b){this.head=document.getElementsByTagName("head")[0];
this.scriptSrc=a;this.script=document.createElement("script");this.script.setAttribute("type","text/javascript");this.script.setAttribute("src",this.scriptSrc);this.script.onload=b;this.script.onreadystatechange=function(){(this.readyState=="complete"||a.indexOf("checkOAuth.esi")!=-1&&this.readyState=="loaded")&&b()};this.head.appendChild(this.script)};stLight.loadServicesLoggedIn=function(a){if(useFastShare&&esiLoaded==false)try{stLight.odjs("https:"==document.location.protocol?"https://wd-edge.sharethis.com/button/checkOAuth.esi":
"http://wd-edge.sharethis.com/button/checkOAuth.esi",function(){if(typeof userDetails!=="undefined"){stIsLoggedIn=true;userDetails!=="null"&&(servicesLoggedIn=userDetails)}esiLoaded=true;a!=null&&a()})}catch(b){}else a!=null&&a()};if("completed"==window.document.readyState)stLight.onReady();else"undefined"!=typeof window.addEventListener?window.addEventListener("load",stLight.onReady,!1):"undefined"!=typeof document.addEventListener?document.addEventListener("load",stLight.onReady,!1):"undefined"!=
typeof window.attachEvent&&window.attachEvent("onload",stLight.onReady);stLight.createSegmentFrame=function(){try{stLight.segmentframe=document.createElement('<iframe name="stframe" allowTransparency="true" style="body{background:transparent;}" ></iframe>')}catch(a){stLight.segmentframe=document.createElement("iframe")}stLight.segmentframe.id="stSegmentFrame";stLight.segmentframe.name="stSegmentFrame";var b=document.body,d=("https:"==document.location.protocol?"https://seg.":"http://seg.")+"sharethis.com/getSegment.php?purl="+
encodeURIComponent(document.location.href)+"&jsref="+encodeURIComponent(document.referrer)+"&rnd="+(new Date).getTime();stLight.segmentframe.src=d;stLight.segmentframe.frameBorder="0";stLight.segmentframe.scrolling="no";stLight.segmentframe.width="0px";stLight.segmentframe.height="0px";stLight.segmentframe.setAttribute("style","display:none;");b.appendChild(stLight.segmentframe)};stLight.options=function(a){if(a&&a.publisher){stlib.data.setPublisher(a.publisher);stLight.publisher=a.publisher}if(a&&
a.loadedFromBar)stLight.loadedFromBar=a.loadedFromBar;if(a&&a.clickCallBack&&typeof a.clickCallBack=="function")stLight.clickCallBack=a.clickCallBack;if(a&&typeof a.hashAddressBar!="undefined")stlib.hash.hashAddressBar=a.hashAddressBar;if(a&&typeof a.doNotHash!="undefined")stlib.hash.doNotHash=a.doNotHash;if(a&&typeof a.doNotCopy!="undefined")stlib.hash.doNotCopy=a.doNotCopy;for(var b in a){if(b=="shorten")stFastShareObj.shorten=a[b];stWidget.options.hasOwnProperty(b)&&a[b]!==null&&(stWidget.options[b]=
a[b])}};stLight.hasButtonOnPage=function(){for(var a=document.getElementsByTagName("*"),b=RegExp(/^st_(.*?)$/),d=a.length,e=0;e<d;e++)if(typeof a[e].className=="string"&&a[e].className!=""&&a[e].className.match(b)&&a[e].className.match(b).length>=2&&a[e].className.match(b)[1])return true;return false}}
var stButtons={smartifyButtons:function(a){if(typeof a!="undefined"&&a!="undefined"){stRecentServices=a;for(var b in stRecentServices)stRecentServices[b].processed=false}stButtons.completeInit()},makeButton:function(a){var b=a.service,d=a.text,e="";if(typeof stWidget.options.shorten!="undefined")e=stWidget.options.shorten;if(d==null&&(a.type=="vcount"||a.type=="hcount")){d="Share";b=="email"&&(d="Mail")}if(b=="fb_like")b="fblike";else if(b=="fblike_fbLong"){b="fblike";a.type="fbLong"}var g=stWidget.ogurl?
stWidget.ogurl:stWidget.twitterurl?stWidget.twitterurl:document.location.href,f=g=a.url?a.url:g;if(!stlib.hash.doNotHash)g=f=stlib.hash.appendHash(g);stlib.data.set("url",f,"shareInfo");var k=stWidget.ogtitle?stWidget.ogtitle:stWidget.twittertitle?stWidget.twittertitle:document.title,k=a.title?a.title:k,l=stWidget.ogimg?stWidget.ogimg:stWidget.twitterimg?stWidget.twitterimg:a.thumbnail?a.thumbnail:null,l=a.image?a.image:l,j=stWidget.desc?stWidget.desc:"",j=stWidget.ogdesc?stWidget.ogdesc:stWidget.twitterdesc?
stWidget.twitterdesc:stWidget.desc,j=a.summary&&a.summary!=null?a.summary:j,m=a.message&&a.message!=null?a.message:"";if(/(http|https):\/\//.test(g)==false){g=decodeURIComponent(g);k=decodeURIComponent(k)}var n=document.createElement("span");n.setAttribute("style","text-decoration:none;color:#000000;display:inline-block;cursor:pointer;");n.className="stButton";if(a.type=="custom"&&b!="email"&&b!="sharethis"&&b!="wordpress"){a.element.onclick=function(){_$d_();_$d1("Clicked on a custom button to share");
stLight.callSubscribers("click",b,g);stlib.data.resetShareData();stlib.data.set("url",g,"shareInfo");stlib.data.set("shorten",e,"shareInfo");stlib.data.set("title",k,"shareInfo");stlib.data.set("destination",b,"shareInfo");stlib.data.setSource("chicklet");stlib.data.set("buttonType",a.type,"shareInfo");typeof l!="undefined"&&l!=null&&stlib.data.set("image",l,"shareInfo");typeof j!="undefined"&&j!=null&&stlib.data.set("description",j,"shareInfo");m!=""&&stlib.data.set("message",m,"shareInfo");a.element.getAttribute("st_username")!=
null&&stlib.data.set("refUsername",a.element.getAttribute("st_username"),"shareInfo");b=="twitter"&&a.element.getAttribute("st_via")!=null&&stlib.data.set("via",a.element.getAttribute("st_via").replace(/^\s+|\s+$/g,""),"shareInfo");stlib.sharer.share(null,stWidget.options.servicePopup);b=="pinterest"&&(stlib.data.get("image","shareInfo")==false||stlib.data.get("image","shareInfo")==null)&&stlib.sharer.sharePinterest()};return false}if(!(b=="email"||(b=="sharethis"||b=="wordpress")||stIsLoggedIn&&
servicesLoggedIn&&typeof servicesLoggedIn[b]!="undefined"&&(useFastShare||!useFastShare&&switchTo5x)&&(b=="facebook"||b=="twitter"||b=="yahoo"||b=="linkedin")))n.onclick=function(){_$d_();_$d1("Clicked on a regular button to share");stLight.callSubscribers("click",b,g);for(var d=this.getElementsByTagName("*"),f=0;f<d.length;f++)if(d[f].className=="stBubble_hcount"||d[f].className=="stBubble_count")if((!stWidget.options.nativeCount||!stlib.nativeCounts.checkNativeCountServicesQueue(b))&&!isNaN(d[f].innerHTML))d[f].innerHTML=
Number(d[f].innerHTML)+1;stWidget.options.tracking&&shareLog(b);stlib.data.resetShareData();stlib.data.set("url",g,"shareInfo");stlib.data.set("shorten",e,"shareInfo");stlib.data.set("title",k,"shareInfo");stlib.data.set("destination",b,"shareInfo");stlib.data.setSource("chicklet");stlib.data.set("buttonType",a.type,"shareInfo");typeof l!="undefined"&&l!=null&&stlib.data.set("image",l,"shareInfo");typeof j!="undefined"&&j!=null&&stlib.data.set("description",j,"shareInfo");m!=""&&stlib.data.set("message",
m,"shareInfo");a.element.getAttribute("st_username")!=null&&stlib.data.set("refUsername",a.element.getAttribute("st_username"),"shareInfo");b=="twitter"&&a.element.getAttribute("st_via")!=null&&stlib.data.set("via",a.element.getAttribute("st_via").replace(/^\s+|\s+$/g,""),"shareInfo");stlib.sharer.share(null,stWidget.options.servicePopup);b=="pinterest"&&(stlib.data.get("image","shareInfo")==false||stlib.data.get("image","shareInfo")==null)&&stlib.sharer.sharePinterest()};if(b=="gbuzz")return n;if(b==
"fblike"||b=="fbsend"||b=="fbrec"||b=="fbLong"||b=="fbsub"){b=="fbsub"&&(g=a.element.getAttribute("st_username")!=null?"http://facebook.com/"+a.element.getAttribute("st_username"):"");return stButtons.makeFBButton(b,a.type,g)}if(stlib.nativeButtons.checkNativeButtonSupport(b)){f={};if(a.element.getAttribute("st_username")!=null)f.username=a.element.getAttribute("st_username");if(a.element.getAttribute("st_followId")!=null)f.followId=a.element.getAttribute("st_followId");if(retObj=stlib.nativeButtons.makeButton(b,
a.type,f)){if(stlib.nativeButtons.checkNativeButtonLogging(b))retObj.onclick=function(){stlib.nativeButtons.logService(b,g)};return retObj}if(typeof window.console!=="undefined")try{console.debug("Looks like "+b+" is missing some required parameters. Please recheck "+b+" HTML \nFor help, contact support@sharethis.com")}catch(s){}return n}if(b=="plusone"){stButtons.loadPlusone=true;f=document.createElement("div");f.innerHTML="&nbsp;";iedocmode=stlib.browser.getIEVersion();n=navigator.userAgent.indexOf("MSIE 7.0")!=
-1;navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome");var p=document.createElement("g:plusone"),q=g;if(/#sthash/i.test(q)){var t=q.split("#");t.length>0&&(q=t[0])}p.setAttribute("href",q);if(a.type=="vcount"){p.setAttribute("size","tall");f.setAttribute("style","display:inline-block;overflow:hidden;line-height:0px;vertical-align:bottom;width:55px; height:61px;");n&&f.style.setAttribute?f.style.setAttribute("cssText","display:inline-block;overflow:hidden;line-height:0px;vertical-align:bottom;width:55px; height:61px;",
0):null;iedocmode&&iedocmode==7&&f.style.setAttribute?f.style.setAttribute("cssText","overflow:hidden;zoom:1;display:inline;line-height:0px;position:relative;vertical-align:bottom;bottom:-8px;width:55px; height:80px;",0):null}else if(a.type=="hcount"){p.setAttribute("size","medium");p.setAttribute("count","true");f.setAttribute("style","display:inline-block;overflow:hidden;line-height:0px;position:relative;vertical-align:middle;bottom:0px;width:75px; height:21px;");n&&f.style.setAttribute?f.style.setAttribute("cssText",
"display:inline-block;overflow:hidden;line-height:0px;position:relative;vertical-align:middle;width:75px; height:21px;",0):null;iedocmode&&iedocmode==7&&f.style.setAttribute?f.style.setAttribute("cssText","overflow:hidden;zoom:1;display:inline;line-height:0px;position:relative;vertical-align:middle;bottom:2px;width:75px; height:21px;",0):null}else if(a.type=="button"){p.setAttribute("size","medium");p.setAttribute("count","false");f.setAttribute("style","display:inline-block;overflow:hidden;line-height:0px;position:relative;vertical-align:middle;bottom:0px;width:36px; height:21px;");
n&&f.style.setAttribute?f.style.setAttribute("cssText","display:inline-block;overflow:hidden;line-height:0px;position:relative;vertical-align:middle;width:36px; height:21px;",0):null;iedocmode&&iedocmode==7&&f.style.setAttribute?f.style.setAttribute("cssText","overflow:hidden;zoom:1;display:inline;line-height:0px;position:relative;vertical-align:middle;bottom:-8px;width:36px; height:39px;",0):null}else if(a.type=="large"){p.setAttribute("size","large");p.setAttribute("count","false");f.setAttribute("style",
"display:inline-block;overflow:hidden;line-height:0px;position:relative;vertical-align:middle;bottom:12px;width:38px; height:27px;");n&&f.style.setAttribute?f.style.setAttribute("cssText","display:inline-block;overflow:hidden;line-height:0px;position:relative;vertical-align:middle;bottom:0px;width:38px; height:30px;",0):null;iedocmode&&(iedocmode==8||iedocmode==9)&&f.style.setAttribute?f.style.setAttribute("cssText","overflow:hidden;zoom:1;display:inline;line-height:0px;position:relative;vertical-align:middle;bottom:7px;width:38px; height:39px;",
0):null;iedocmode&&iedocmode==7&&f.style.setAttribute?f.style.setAttribute("cssText","overflow:hidden;zoom:1;display:inline;line-height:0px;position:relative;vertical-align:middle;bottom:1px;width:38px; height:39px;",0):null}else{p.setAttribute("size","small");p.setAttribute("count","false");f.setAttribute("style","display:inline-block;overflow:hidden;line-height:0px;position:relative;vertical-align:middle;bottom:0px;width:36px; height:16px;");n&&f.style.setAttribute?f.style.setAttribute("cssText",
"display:inline-block;overflow:hidden;line-height:0px;position:relative;vertical-align:middle;width:36px; height:16px;",0):null;iedocmode&&iedocmode==7&&f.style.setAttribute?f.style.setAttribute("cssText","overflow:hidden;zoom:1;display:inline;line-height:0px;position:relative;vertical-align:middle;bottom:-12px;width:36px; height:36px;",0):null}f.appendChild(p);p.setAttribute("callback","plusoneCallback");return f}var r="https:"==document.location.protocol?"https://ws.sharethis.com/images/":"http://w.sharethis.com/images/",
f=document.createElement("img");f.src=r+"check-big.png";f.style.position="absolute";f.style.top="-7px";f.style.right="-7px";f.style.width="19px";f.style.height="19px";f.style.maxWidth="19px";f.style.maxHeight="19px";var o=b;if(!esiLoaded&&(b=="facebook"||b=="twitter"||b=="linkedin"||b=="yahoo")){var t=new Date,v=null,C=0;do{v=new Date;C++;if(C>500)break}while(v-t<500||!esiLoaded)}if(!useFastShare||!servicesLoggedIn||!(typeof servicesLoggedIn[b]!="undefined"&&(b=="facebook"||b=="twitter"||b=="linkedin"||
b=="yahoo")))f.style.display="none";if(a.type=="chicklet"){p=document.createElement("span");p.className="chicklets "+b;if(d==null){p.innerHTML="&nbsp;";n.style.paddingLeft="0px";n.style.paddingRight="0px";n.style.width="16px"}else{p.appendChild(document.createTextNode(d));f.style.right="auto";f.style.left="8px";f.style.top="-5px"}n.appendChild(p);f.src=r+"check-small.png";f.style.top="-6px";f.style.width="13px";f.style.height="13px";f.style.maxWidth="13px";f.style.maxHeight="13px";n.appendChild(f)}else if(a.type==
"large"){p=document.createElement("span");p.className="stLarge";n.appendChild(p);p.style.backgroundImage="url('"+r+o+"_32.png')";n.appendChild(f)}else if(a.type=="basic"||a.type=="circle"||a.type=="brushed"||a.type=="shiny"){p=document.createElement("span");p.className="stLarge";p.className=a.size=="16"?a.type=="brushed"||a.type=="shiny"?"stSmall2":"stSmall":p.className;p.className=a.size=="64"?"stHuge":p.className;n.appendChild(p);p.style.backgroundImage="url('"+r+a.type+"/"+a.size+"/"+o+(a.color?
"_"+a.color:"_"+a.type)+".png')";n.appendChild(f)}else{if(a.type=="pcount"||a.type=="stbar"||a.type=="stsmbar"){t=document.createElement("span");p=document.createElement("span");if(a.type=="stsmbar"){p.className="stSmBar";r="https:"==document.location.protocol?"https://ws.sharethis.com/images/":"http://w.sharethis.com/images/";p.style.backgroundImage="url('"+r+o+"_16.png')";f.src=r+"check-small.png"}else{p.className="stLarge";r="https:"==document.location.protocol?"https://ws.sharethis.com/images/":
"http://w.sharethis.com/images/";p.style.backgroundImage="url('"+r+o+"_32.png')"}p.appendChild(f);t.appendChild(p);d=document.createElement("span");r=document.createElement("div");r.className=a.type=="stsmbar"?"stBubbleSmHoriz":"stBubbleSm";r.setAttribute("id","stBubble_"+a.count);r.style.visibility="hidden";o=document.createElement("div");o.className="stBubble_count_sm";r.appendChild(o);d.appendChild(r);d.appendChild(t);n.appendChild(d);stButtons.getCount2(g,b,o);t.onmouseover=function(){document.getElementById("stBubble_"+
a.count).style.visibility="visible"};t.onmouseout=function(){document.getElementById("stBubble_"+a.count).style.visibility="hidden"};return n}if(a.type=="button"||a.type=="vcount"||a.type=="hcount"){t=document.createElement("span");t.className="stButton_gradient";v=document.createElement("span");v.className="chicklets "+b;d==null?v.innerHTML="&nbsp;":v.appendChild(document.createTextNode(d));t.appendChild(v);if(b=="facebook"||b=="twitter"||b=="linkedin"||b=="yahoo"||b=="pinterest"||b=="sharethis"||
b=="email"){v=document.createElement("span");v.className="stMainServices st-"+b+"-counter";v.innerHTML="&nbsp";t=v;v.style.backgroundImage="url('"+r+o+"_counter.png')";if(b=="sharethis"&&d!=null&&d.length<6){v.className="stMainServices st-"+b+"-counter2";v.style.backgroundImage="url('"+r+o+"_counter2.png')"}}t.appendChild(f);if(a.type=="vcount"){d=document.createElement("div");r=document.createElement("div");r.className="stBubble";o=document.createElement("div");o.className="stBubble_count";r.appendChild(o);
d.appendChild(r);d.appendChild(t);n.appendChild(d);stButtons.getCount2(g,b,o)}else if(a.type=="hcount"){d=document.createElement("span");r=document.createElement("span");r.className="stButton_gradient stHBubble";o=document.createElement("span");o.className="stButton_left";o.innerHTML="&nbsp;";o=document.createElement("span");o.className="stButton_right";o.innerHTML="&nbsp;";o=document.createElement("span");o.className="stBubble_hcount";r.appendChild(o);d.appendChild(t);t=document.createElement("span");
t.className="stArrow";t.appendChild(r);d.appendChild(t);n.appendChild(d);stButtons.getCount2(g,b,o)}else n.appendChild(t);if((a.type=="vcount"||a.type=="hcount")&&a.ctype=="native")if(b=="twitter"){n=document.createElement("span");n.className="stButton";d=55;r=20;v="";t="none";if(a.type=="vcount"){p=document.createElement("div");d=55;r=62;v="top:42px;";t="vertical";f.style.top="34px"}else if(a.type=="hcount"){p=document.createElement("span");d=110;r=20;t="horizontal";f.style.right="44px"}iedocmode=
stlib.browser.getIEVersion();o=document.createElement("span");o.setAttribute("style","vertical-align:bottom;line-height:0px;position:absolute;padding:0px !important;"+v+"width:55px;height:20px;");iedocmode&&iedocmode==7&&o.style.setAttribute?o.style.setAttribute("cssText","vertical-align:bottom;line-height:0px;position:absolute;padding:0px !important;"+v+"width:55px;height:20px;",0):null;try{q=document.createElement('<iframe name="stframe" allowTransparency="true" scrolling="no" frameBorder="0"></iframe>')}catch(x){q=
document.createElement("iframe");q.setAttribute("allowTransparency","true");q.setAttribute("frameborder","0");q.setAttribute("scrolling","no")}v=encodeURIComponent(g);q.setAttribute("src","http://platform.twitter.com/widgets/tweet_button.html?count="+t+"&url="+v);q.setAttribute("style","width:"+d+"px;height:"+r+"px;");iedocmode&&iedocmode==7&&q.style.setAttribute?q.style.setAttribute("cssText","width:"+d+"px;height:"+r+"px;",0):null;useFastShare&&(servicesLoggedIn&&typeof servicesLoggedIn[b]!="undefined")&&
p.appendChild(o);p.appendChild(q);t=p;t.appendChild(f);n.appendChild(t);n.setAttribute("style","text-decoration:none;color:#000000;display:inline-block;cursor:pointer;vertical-align:bottom;margin-top:6px;width:"+d+"px;height:"+r+"px;");iedocmode&&iedocmode==7&&n.style.setAttribute?n.style.setAttribute("cssText","text-decoration:none;color:#000000;display:inline-block;cursor:pointer;vertical-align:bottom;width:"+d+"px;height:"+r+"px;",0):null}else if(b=="facebook"){stButtons.getXFBMLFromFB(a);return stButtons.makeFBButton("fblike",
a.type,g)}}else if(a.type=="css"){t=document.createElement("div");t.className="stCSSButton";if(a.cssType=="cssV"){q=document.createElement("div");q.className="stCSSVBubble";p=document.createElement("div");p.className="stCSSVBubble_count";q.appendChild(p);r=document.createElement("div");r.className="stCSSVArrow";o=document.createElement("div");o.className="stCSSVArrowBorder";o.appendChild(r);n.appendChild(q);n.appendChild(o);stButtons.getCount2(g,b,p)}q=document.createElement("div");q.className="stCSSSprite "+
b;q.innerHTML="&nbsp;";p=document.createElement("span");p.className="stCSSText";t.appendChild(q);if(!(d==null||d=="")){p.appendChild(document.createTextNode(d));t.appendChild(p)}t.appendChild(f);n.appendChild(t);if(a.cssType=="cssH"){f=document.createElement("div");f.className="stCSSHBubble";p=document.createElement("div");p.className="stCSSHBubble_count";f.appendChild(p);q=document.createElement("div");q.className="stCSSHArrow";t=document.createElement("div");t.className="stCSSHArrowBorder";t.appendChild(q);
n.appendChild(t);n.appendChild(f);stButtons.getCount2(g,b,p)}}}return n},makeFBButton:function(a,b,d){try{var e=document.createElement("<div></div>")}catch(g){e=document.createElement("div")}if(/#sthash/i.test(d)){var f=d.split("#");f.length>0&&(d=f[0])}var f=d,k="button_count",l="fb-send",j="";iedocmode=stlib.browser.getIEVersion();d="";b=="vcount"?k="box_count":b!="hcount"&&(b=="large"?d=iedocmode&&iedocmode==7?"vertical-align:bottom;bottom:3px;":"bottom:7px;margin-top:9px;":b!="button"&&(d="top:1px;margin-top:0px;"));
if(a=="fbLong"){l="fb-like";k="standard";e.setAttribute("data-layout",k);e.setAttribute("data-send","false");e.setAttribute("data-show-faces","false")}else if(a=="fbsend")l="fb-send";else if(a=="fblike"||a=="fbrec"){a=="fbrec"?j="recommend":null;l="fb-like";e.setAttribute("data-action",j);e.setAttribute("data-send","false");e.setAttribute("data-layout",k);e.setAttribute("data-show-faces","false")}else if(a=="fbsub"){l="fb-subscribe";e.setAttribute("data-layout",k);e.setAttribute("data-show-faces",
"false")}e.setAttribute("class",l);e.setAttribute("data-href",f);iedocmode&&iedocmode==7&&(e=a!="fbsend"?document.createElement("<div class='"+l+"' data-action='"+j+"' data-send='false' data-layout='"+k+"' data-show-faces='false' data-href='"+f+"'></div>"):document.createElement("<div class='"+l+"' data-href='"+f+"'></div>"));a=document.createElement("span");a.setAttribute("style","text-decoration:none;color:#000000;display:inline-block;cursor:pointer;position:relative;margin:3px 3px 0;padding:0px;font-size:11px;line-height:16px;vertical-align:bottom;overflow:visible;"+
d);iedocmode&&iedocmode==7&&a.style.setAttribute?a.style.setAttribute("cssText","text-decoration:none;color:#000000;display:inline-block;cursor:pointer;position:relative;margin:3px 3px 0;font-size:11px;line-height:0px;"+d,0):null;a.appendChild(e);return a},getCount:function(a,b,d){if(d&&d!==null)for(;d.childNodes.length>=1;)try{d.removeChild(d.firstChild)}catch(e){}stButtons.cbQueue.push({url:a,service:b,element:d});stButtons.getCountsFromService(a,b,d)},getCount2:function(a,b,d){if(d&&d!==null)for(;d.childNodes.length>=
1;)try{d.removeChild(d.firstChild)}catch(e){}if(stWidget.options.nativeCount&&stlib.nativeCounts.checkNativeCountServicesQueue(b)){b=="facebook"&&/#/.test(a)&&(a=a.split("#")[0]);stButtons.cbNativeQueue.push({url:a,service:b,element:d});typeof stButtons.countsNativeResp[a]=="undefined"&&(stButtons.countsNativeResp[a]=[]);if(typeof stButtons.countsNativeResp[a][b]=="undefined"){stlib.nativeCounts.getNativeCounts(b,a,"stButtons."+b+"CB");stButtons.countsNativeResp[a][b]=null}else if(stButtons.countsNativeResp[a][b]!=
null)switch(b){case "facebook":stButtons.facebookCB(stButtons.countsNativeResp[a][b]);break;case "linkedin":stButtons.linkedinCB(stButtons.countsNativeResp[a][b]);break;case "stumbleupon":stButtons.stumbleuponCB(stButtons.countsNativeResp[a][b])}}else{stButtons.cbQueue.push({url:a,service:b,element:d});stButtons.getCountsFromService(a,b,d)}},processCB:function(a){typeof a!="undefined"&&typeof a.ourl!="undefined"&&(stButtons.countsResp[a.ourl]=a);stButtons.processCount(a)},stumbleuponCB:function(a){var b=
{ourl:"",stumbleupon:null};if(typeof a!="undefined"&&typeof a.result!="undefined"){typeof stButtons.countsNativeResp[a.result.url]!="undefined"&&(stButtons.countsNativeResp[a.result.url].stumbleupon=a);b.ourl=a.result.url;if(typeof a.result.views!="undefined")b.stumbleupon=a.result.views}stButtons.processNativeCount(b,"stumbleupon")},linkedinCB:function(a){var b={ourl:"",linkedin:null};if(typeof a!="undefined"){typeof stButtons.countsNativeResp[a.url]!="undefined"&&(stButtons.countsNativeResp[a.url].linkedin=
a);b.ourl=a.url;if(typeof a.count!="undefined")b.linkedin=a.count}stButtons.processNativeCount(b,"linkedin")},facebookCB:function(a){var b={ourl:"",facebook:null};if(typeof a!="undefined"){typeof stButtons.countsNativeResp[a[0].url]!="undefined"&&(stButtons.countsNativeResp[a[0].url].facebook=a);b.ourl=a[0].url;if(typeof a[0].total_count!="undefined")b.facebook=a[0].total_count}stButtons.processNativeCount(b,"facebook")},processCount:function(a){if(a){stButtons.storedCountResponse=a;for(var b=0;b<
stButtons.cbQueue.length;b++){var d=stButtons.cbQueue[b];if(a.ourl==d.url){var e="New";try{if(d.service=="sharethis"){if(stWidget.options.minShareCount==null||a.total>=stWidget.options.minShareCount)e=stWidget.options.newOrZero=="zero"?a.total>0?stButtons.human(a.total):"0":a.total>0?stButtons.human(a.total):"New"}else if(d.service=="facebook"&&typeof a.facebook2!="undefined"){if(stWidget.options.minShareCount==null||a.facebook2>=stWidget.options.minShareCount)e=stButtons.human(a.facebook2)}else if(typeof a[d.service]!=
"undefined"){if(stWidget.options.minShareCount==null||a[d.service]>=stWidget.options.minShareCount)e=a[d.service]>0?stButtons.human(a[d.service]):"0"}else if(stWidget.options.minShareCount==null||stWidget.options.minShareCount<=0)e="0";if(/stHBubble/.test(d.element.parentNode.className)==true)d.element.parentNode.style.display="inline-block";else if(/stBubble/.test(d.element.parentNode.className)==true)d.element.parentNode.style.display="block";d.element.innerHTML=e}catch(g){if(!d.element.hasChildNodes()){var f=
document.createElement("div");f.innerHTML=e;d.element.appendChild(f)}}}}}},processNativeCount:function(a,b){if(a&&b)for(var d=0;d<stButtons.cbNativeQueue.length;d++){var e=stButtons.cbNativeQueue[d];if(a.ourl==e.url||b=="stumbleupon"&&a.ourl.replace(/http:\/\/www\.|http:\/\/|www\./i,"")==e.url.replace(/http:\/\/www\.|http:\/\/|www\./i,"")){var g="New";try{if(e.service==b){if(a[b]!=null&&(stWidget.options.minShareCount==null||a[b]>=stWidget.options.minShareCount))g=stButtons.human(a[b]);if(/stHBubble/.test(e.element.parentNode.className)==
true)e.element.parentNode.style.display="inline-block";else if(/stBubble/.test(e.element.parentNode.className)==true)e.element.parentNode.style.display="block";e.element.innerHTML=g}}catch(f){if(!e.element.hasChildNodes()){var k=document.createElement("div");k.innerHTML=g;e.element.appendChild(k)}}}}},human:function(a){if(a>=1E5){a=Math.round(a/1E3);a=a+"K"}else if(a>=1E4){a=Math.round(a/100);a=a/10+"K"}return a},locateElements:function(){var a=document.getElementsByTagName("*"),b=[],d=RegExp(/st_(.*?)_custom/),
e=RegExp(/st_(.*?)_vcount/),g=RegExp(/st_(.*?)_vcount_native/),f=RegExp(/st_(.*?)_hcount/),k=RegExp(/st_(.*?)_hcount_native/),l=RegExp(/st_(.*?)_button/),j=RegExp(/st_(.*?)_large/),m=RegExp(/st_(.*?)_pcount/),n=RegExp(/st_(.*?)_stbar/),s=RegExp(/st_(.*?)_stsmbar/),p=RegExp(/st_(.*?)_css/),q=RegExp(/^st_(.*?)$/),t=RegExp(/st_(.*?)_circle/),r=RegExp(/(st_(.*?)_basic)|(st_(.*?)_circle)/),o=RegExp(/(st_(.*?)_brushed)|(st_(.*?)_shiny)/),v=RegExp(/(st_(.*?)_shiny)/),C=a.length,x=0,u,D,A=[],J=false;typeof stRecentServices!=
"undefined"&&(stRecentServices!="undefined"&&stRecentServices!="false"&&stRecentServices)&&(J=true);for(var h=0;h<C;h++){u="";x=D=false;if(typeof a[h].className=="string"&&a[h].className!=""){if(a[h].className.match(d)&&a[h].className.match(d).length>=2&&a[h].className.match(d)[1]){if(stButtons.testElem(a[h])==false){x=true;u=a[h].className.match(d)[1];typeName="custom";if(u=="plusone"||u=="fblike"||u=="fbrec"||u=="fbsend"||u=="fbsub")typeName="chicklet";b.push({service:u,element:a[h],url:a[h].getAttribute("st_url"),
title:a[h].getAttribute("st_title"),image:a[h].getAttribute("st_img")!=null?a[h].getAttribute("st_img"):a[h].getAttribute("st_image"),message:a[h].getAttribute("st_msg")!=null?a[h].getAttribute("st_msg"):a[h].getAttribute("st_message"),summary:a[h].getAttribute("st_summary"),text:a[h].getAttribute("displayText"),type:typeName});a[h].setAttribute("st_processed","yes")}}else if(a[h].className.match(r)&&a[h].className.match(r).length>=2){if(stButtons.testElem(a[h])==false){x=true;u=a[h].className.split("_")[1];
var B="basic";a[h].className.match(t)&&(B="circle");b.push({service:u,element:a[h],url:a[h].getAttribute("st_url"),title:a[h].getAttribute("st_title"),image:a[h].getAttribute("st_img")!=null?a[h].getAttribute("st_img"):a[h].getAttribute("st_image"),message:a[h].getAttribute("st_msg")!=null?a[h].getAttribute("st_msg"):a[h].getAttribute("st_message"),summary:a[h].getAttribute("st_summary"),text:a[h].getAttribute("displayText"),type:B,size:a[h].className.split("$")[1],color:a[h].className.split("$")[2]});
a[h].setAttribute("st_processed","yes")}}else if(a[h].className.match(o)&&a[h].className.match(o).length>=2){if(stButtons.testElem(a[h])==false){x=true;u=a[h].className.split("_")[1];B="brushed";a[h].className.match(v)&&(B="shiny");b.push({service:u,element:a[h],url:a[h].getAttribute("st_url"),title:a[h].getAttribute("st_title"),image:a[h].getAttribute("st_img")!=null?a[h].getAttribute("st_img"):a[h].getAttribute("st_image"),message:a[h].getAttribute("st_msg")!=null?a[h].getAttribute("st_msg"):a[h].getAttribute("st_message"),
summary:a[h].getAttribute("st_summary"),text:a[h].getAttribute("displayText"),type:B,size:a[h].className.split("$")[1]});a[h].setAttribute("st_processed","yes")}}else if(a[h].className.match(e)&&a[h].className.match(e).length>=2&&a[h].className.match(e)[1]){if(stButtons.testElem(a[h])==false){x=true;u=a[h].className.match(e)[1];B="";a[h].className.match(g)&&(a[h].className.match(g).length>=2&&a[h].className.match(g)[1])&&(B="native");b.push({service:u,element:a[h],url:a[h].getAttribute("st_url"),
title:a[h].getAttribute("st_title"),image:a[h].getAttribute("st_img")!=null?a[h].getAttribute("st_img"):a[h].getAttribute("st_image"),message:a[h].getAttribute("st_msg")!=null?a[h].getAttribute("st_msg"):a[h].getAttribute("st_message"),summary:a[h].getAttribute("st_summary"),text:a[h].getAttribute("displayText"),type:"vcount",ctype:B});a[h].setAttribute("st_processed","yes")}}else if(a[h].className.match(f)&&a[h].className.match(f).length>=2&&a[h].className.match(f)[1]){if(stButtons.testElem(a[h])==
false){x=true;u=a[h].className.match(f)[1];B="";a[h].className.match(k)&&(a[h].className.match(k).length>=2&&a[h].className.match(k)[1])&&(B="native");b.push({service:u,element:a[h],url:a[h].getAttribute("st_url"),title:a[h].getAttribute("st_title"),image:a[h].getAttribute("st_img")!=null?a[h].getAttribute("st_img"):a[h].getAttribute("st_image"),message:a[h].getAttribute("st_msg")!=null?a[h].getAttribute("st_msg"):a[h].getAttribute("st_message"),summary:a[h].getAttribute("st_summary"),text:a[h].getAttribute("displayText"),
type:"hcount",ctype:B});a[h].setAttribute("st_processed","yes")}}else if(a[h].className.match(l)&&a[h].className.match(l).length>=2&&a[h].className.match(l)[1]){if(stButtons.testElem(a[h])==false){x=true;u=a[h].className.match(l)[1];b.push({service:u,element:a[h],url:a[h].getAttribute("st_url"),title:a[h].getAttribute("st_title"),image:a[h].getAttribute("st_img")!=null?a[h].getAttribute("st_img"):a[h].getAttribute("st_image"),message:a[h].getAttribute("st_msg")!=null?a[h].getAttribute("st_msg"):a[h].getAttribute("st_message"),
summary:a[h].getAttribute("st_summary"),text:a[h].getAttribute("displayText"),type:"button"});a[h].setAttribute("st_processed","yes")}}else if(a[h].className.match(j)&&a[h].className.match(j).length>=2&&a[h].className.match(j)[1]){if(stButtons.testElem(a[h])==false){x=true;u=a[h].className.match(j)[1];b.push({service:u,element:a[h],url:a[h].getAttribute("st_url"),title:a[h].getAttribute("st_title"),image:a[h].getAttribute("st_img")!=null?a[h].getAttribute("st_img"):a[h].getAttribute("st_image"),message:a[h].getAttribute("st_msg")!=
null?a[h].getAttribute("st_msg"):a[h].getAttribute("st_message"),summary:a[h].getAttribute("st_summary"),text:a[h].getAttribute("displayText"),type:"large"});a[h].setAttribute("st_processed","yes")}}else if(a[h].className.match(m)&&a[h].className.match(m).length>=2&&a[h].className.match(m)[1]){if(stButtons.testElem(a[h])==false){x=true;u=a[h].className.match(m)[1];b.push({service:u,element:a[h],url:a[h].getAttribute("st_url"),title:a[h].getAttribute("st_title"),image:a[h].getAttribute("st_img")!=
null?a[h].getAttribute("st_img"):a[h].getAttribute("st_image"),message:a[h].getAttribute("st_msg")!=null?a[h].getAttribute("st_msg"):a[h].getAttribute("st_message"),summary:a[h].getAttribute("st_summary"),text:a[h].getAttribute("displayText"),type:"pcount",count:h});a[h].setAttribute("st_processed","yes")}}else if(a[h].className.match(n)&&a[h].className.match(n).length>=2&&a[h].className.match(n)[1]){if(stButtons.testElem(a[h])==false){x=true;u=a[h].className.match(n)[1];b.push({service:u,element:a[h],
url:a[h].getAttribute("st_url"),title:a[h].getAttribute("st_title"),image:a[h].getAttribute("st_img")!=null?a[h].getAttribute("st_img"):a[h].getAttribute("st_image"),message:a[h].getAttribute("st_msg")!=null?a[h].getAttribute("st_msg"):a[h].getAttribute("st_message"),summary:a[h].getAttribute("st_summary"),text:a[h].getAttribute("displayText"),type:"stbar",count:h});a[h].setAttribute("st_processed","yes")}}else if(a[h].className.match(s)&&a[h].className.match(s).length>=2&&a[h].className.match(s)[1]){if(stButtons.testElem(a[h])==
false){x=true;u=a[h].className.match(s)[1];b.push({service:u,element:a[h],url:a[h].getAttribute("st_url"),title:a[h].getAttribute("st_title"),image:a[h].getAttribute("st_img")!=null?a[h].getAttribute("st_img"):a[h].getAttribute("st_image"),message:a[h].getAttribute("st_msg")!=null?a[h].getAttribute("st_msg"):a[h].getAttribute("st_message"),summary:a[h].getAttribute("st_summary"),text:a[h].getAttribute("displayText"),type:"stsmbar",count:h});a[h].setAttribute("st_processed","yes")}}else if(a[h].className.match(p)&&
a[h].className.match(p).length>=2&&a[h].className.match(p)[1]){if(stButtons.testElem(a[h])==false){x=true;u=a[h].className.match(p)[1];B=a[h].className.split("_");b.push({service:u,element:a[h],url:a[h].getAttribute("st_url"),title:a[h].getAttribute("st_title"),image:a[h].getAttribute("st_img")!=null?a[h].getAttribute("st_img"):a[h].getAttribute("st_image"),message:a[h].getAttribute("st_msg")!=null?a[h].getAttribute("st_msg"):a[h].getAttribute("st_message"),summary:a[h].getAttribute("st_summary"),
text:a[h].getAttribute("displayText"),type:"css",cssType:B[B.length-1]});a[h].setAttribute("st_processed","yes")}}else if(a[h].className.match(q)&&(a[h].className.match(q).length>=2&&a[h].className.match(q)[1])&&stButtons.testElem(a[h])==false){x=true;u=a[h].className.match(q)[1];b.push({service:u,element:a[h],url:a[h].getAttribute("st_url"),title:a[h].getAttribute("st_title"),image:a[h].getAttribute("st_img")!=null?a[h].getAttribute("st_img"):a[h].getAttribute("st_image"),message:a[h].getAttribute("st_msg")!=
null?a[h].getAttribute("st_msg"):a[h].getAttribute("st_message"),summary:a[h].getAttribute("st_summary"),text:a[h].getAttribute("displayText"),type:"chicklet"});a[h].setAttribute("st_processed","yes")}if(J&&x){for(x=0;x<A.length;x++)if(A[x].service==u){A[x].count++;D=true}D||A.push({service:u,count:1,doNotReplace:false,processed:false})}}}if(J){a=[];for(d=A.length-1;d>=0;d--)if(A[d].service=="sharethis"||A[d].doNotReplace)A[d].processed=true;else for(var w in stRecentServices){e=false;if(!stRecentServices[w].processed){for(g=
0;g<A.length;g++)if(w==A[g].service&&!A[g].processed){e=true;A[g].doNotReplace=true;stRecentServices[w].processed=true;break}if(e)A[d].processed=true;else{a.push({oldService:A[d].service,newService:w});for(e=0;e<b.length;e++)if(b[e].service==A[d].service){b[e].service=w;b[e].text=stRecentServices[w].title;b[e].element.setAttribute("displayText",stRecentServices[w].title);b[e].element.className=b[e].element.className.replace(A[d].service,w)}stRecentServices[w].processed=true;A[d].processed=true;break}}}}for(h=
0;h<b.length;h++)stWidget.addEntry(b[h])},odcss:function(a,b){this.head=document.getElementsByTagName("head")[0];this.scriptSrc=a;this.css=document.createElement("link");this.css.setAttribute("rel","stylesheet");this.css.setAttribute("type","text/css");this.css.setAttribute("href",this.scriptSrc);setTimeout(function(){b()},500);this.head.appendChild(this.css)},makeButtons:function(){if(typeof stButtons.button_css_called=="undefined"){stButtons.odcss("https:"==document.location.protocol?"https://ws.sharethis.com/button/css/buttons-secure.css":
"http://w.sharethis.com/button/css/buttons.20a85a6a67053717023e8d12a9dba430.css",function(){});stButtons.button_css_called=true}stButtons.locateElements()},getPlusOneFromGoogle:function(a){if(stButtons.plusOneLoaded==false){if(stButtons.plusOneLoading==false){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src","https://apis.google.com/js/plusone.js");b.async=stWidget.options.asyncPlusone;b.onload=function(){stButtons.renderPlusOneFromGoogle(a);stButtons.plusOneLoaded=
true;stButtons.plusOneLoading=false};b.onreadystatechange=function(){if(this.readyState=="complete"){stButtons.renderPlusOneFromGoogle(a);stButtons.plusOneLoaded=true;stButtons.plusOneLoading=false}};stButtons.plusOneLoading=true;document.getElementsByTagName("head")[0].appendChild(b)}}else stButtons.renderPlusOneFromGoogle(a)},renderPlusOneFromGoogle:function(a){a=="plusone"?gapi.plusone.go():(a=="googleplusfollow"||a=="googleplusadd")&&gapi.plus.go()},getXFBMLFromFB:function(a){if(!(typeof stWidget.options.fbLoad!=
"undefined"&&stWidget.options.fbLoad!=true))if(stButtons.xfbmlLoaded==false){if(stButtons.xfbmlLoading==false){stButtons.xfbmlLoading=true;var b=document.createElement("div");b.setAttribute("id","fb-root");document.body.appendChild(b);b="en_US";if(typeof stWidget.options.fbLang!="undefined"&&stWidget.options.fbLang!="")b=stWidget.options.fbLang;var d=document.getElementsByTagName("script")[0];if(document.getElementById("facebook-jssdk")){if(typeof FB!="undefined"&&typeof FB.XFBML!="undefined"&&typeof FB.XFBML.parse==
"function"){/iframe/.test(a.innerHTML)||FB.XFBML.parse(a);stButtons.trackFB();stButtons.xfbmlLoaded=true;stButtons.xfbmlLoading=false}}else{a=document.createElement("script");a.id="facebook-jssdk";a.src="//connect.facebook.net/"+b+"/all.js";a.async=stWidget.options.async;a.onload=function(){FB.init({appId:"",xfbml:true});stButtons.trackFB();stButtons.xfbmlLoaded=true;stButtons.xfbmlLoading=false};a.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){FB.init({appId:"",
xfbml:true});stButtons.trackFB();stButtons.xfbmlLoaded=true;stButtons.xfbmlLoading=false}};d.parentNode.insertBefore(a,d)}}}else{/iframe/.test(a.innerHTML)||FB.XFBML.parse(a);stButtons.trackFB()}},addCount:function(a){stButtons.counts.push(a)},getCountsFromService:function(a){if(stButtons.checkQueue(a)==false){var b=b+"-"+stButtons.cbVal,b="stButtons.processCB";stButtons.cbVal++;var d=document.referrer.replace("http://","").replace("https://","").split("/"),e=d.shift(),d=d.join("/"),e=encodeURIComponent(e),
d=encodeURIComponent(d),g=stLight.publisher,b="https:"==document.location.protocol?"https://ws.sharethis.com/api/getCount2.php?cb="+b+"&refDomain="+e+"&refQuery="+d+"&pgurl="+encodeURIComponent(document.location.href)+"&pubKey="+g+"&url=":"http://wd.sharethis.com/api/getCount2.php?cb="+b+"&refDomain="+e+"&refQuery="+d+"&pgurl="+encodeURIComponent(document.location.href)+"&pubKey="+g+"&url=";stLight.odjs(b+encodeURIComponent(a),function(){});stButtons.queue.push(a)}stButtons.countsResp[a]&&stButtons.processCount(stButtons.countsResp[a])},
checkQueue:function(a){for(var b=0;b<stButtons.queue.length;b++)if(stButtons.queue[b]==a)return true;return false},testElem:function(a){return a.getAttribute("st_processed")!=null?true:false}};
function Shareable(a){this.idx=-1;this.message=this.service=this.element=this.image=this.title=this.url=null;this.screen="home";this.frag=this.buttonText=this.content=this.summary=null;this.onhover=true;this.type=null;var b=this;this.attachButton=function(d){this.element=d;if((this.onhover==true||this.onhover=="true")&&!stlib.browser.mobile.isMobile()&&(!switchTo5x||switchTo5x&&(a.service=="sharethis"||a.service=="email"||a.service=="wordpress"))){d.onmouseover=this.mouseOn;d.onmouseout=this.mouseOut}d.onclick=
function(){b.decideFastShare()}};this.init=function(){stWidget.merge(this,a);stWidget.shareables.push(this);a.element!==null&&this.attachButton(a.element)};return this}
var stWidget=new function(){this.shareables=[];this.entries=0;this.widgetOpen=false;this.mouseOutTimer=this.mouseTimer=this.mouseOnTimer=null;this.buttonClicked=this.stopClosing=this.frameReady=false;this.frameUrl5x="https:"==document.location.protocol?"https://ws.sharethis.com/secure5x/index.html":"http://edge.sharethis.com/share5x/index.1ceb10777c1c51c2e7bf9ca649416efc.html";this.frameUrl4x="https:"==document.location.protocol?"https://ws.sharethis.com/secure/index.html":"http://edge.sharethis.com/share4x/index.c2670ee4b52a2b88a02bd11172df6393.html";
this.frameUrlChoice=switchTo5x?this.frameUrl5x:this.frameUrl4x;this.secure=false;try{this.mainstframe=document.createElement('<iframe name="stLframe" allowTransparency="true" style="body{background:transparent;}" ></iframe>');this.mainstframe.onreadystatechange=function(){if(stWidget.mainstframe.readyState==="complete"){stWidget.frameReady=true;stButtons.pumpInstance=new stlib.pump(stWidget.mainstframe,stWidget.mainstframe,function(){stButtons.messageQueueInstance.process()});stButtons.messageQueueInstance.setPumpInstance(stButtons.pumpInstance);
try{stButtons.pumpInstance.broadcastSendMessage("Buttons Ready")}catch(a){}}}}catch(a){this.mainstframe=document.createElement("iframe");this.mainstframe.allowTransparency="true";this.mainstframe.setAttribute("allowTransparency","true");this.mainstframe.onload=function(){stWidget.frameReady=true;stButtons.pumpInstance=new stlib.pump(stWidget.mainstframe,stWidget.mainstframe,function(){stButtons.messageQueueInstance.process()});stButtons.messageQueueInstance.setPumpInstance(stButtons.pumpInstance);
try{stButtons.pumpInstance.broadcastSendMessage("Buttons Ready")}catch(a){}}}this.mainstframe.id="stLframe";this.mainstframe.className="stLframe";this.mainstframe.name="stLframe";this.mainstframe.frameBorder="0";this.mainstframe.scrolling="no";this.mainstframe.width="353px";this.mainstframe.height="350px";this.mainstframe.style.top="0px";this.mainstframe.style.left="0px";this.mainstframe.src=this.frameUrlChoice;this.wrapper=document.createElement("div");this.wrapper.id="stwrapper";this.wrapper.className=
"stwrapper";this.wrapper.style.visibility="hidden";this.wrapper.style.top="-999px";this.wrapper.style.left="-999px";this.closewrapper=document.createElement("div");this.closewrapper.className="stclose";if(switchTo5x){this.mainstframe.width="500px";this.mainstframe.height="430px";this.wrapper.style.top="-999px";this.wrapper.style.left="-999px";this.wrapper.style.width="500px";this.wrapper.style.zIndex=89999999;this.overlay=document.createElement("div");this.overlay.style.height="100%";this.overlay.style.width=
"100%";this.overlay.style.backgroundColor="#000";this.overlay.style.opacity="0.6";this.overlay.style.filter="Alpha(Opacity=60)";this.overlay.style.position="fixed";if(document.all&&navigator.appVersion.indexOf("MSIE 6.")!=-1)this.overlay.style.position="absolute";this.overlay.style.display="none";this.overlay.style.left="0";this.overlay.style.top="0";this.overlay.style.zIndex=89999990;this.overlay.setAttribute("id","stOverlay");this.closewrapper.className="stCloseNew2"}this.closewrapper.onclick=function(){stWidget.closeWidget()};
this.wrapper.appendChild(this.closewrapper);this.wrapper.appendChild(this.mainstframe);this.desc=this.twittercard=this.twitterimg=this.twitterurl=this.twitterdesc=this.twittertitle=this.ogtype=this.ogimg=this.ogurl=this.ogdesc=this.ogtitle=null;this.initFire=false;this.merge=function(a,d){for(var e in d)a.hasOwnProperty(e)&&d[e]!==null&&(a[e]=d[e])};this.oldScroll=0;this.init=function(){if(stWidget.initFire==false){stWidget.initFire=true;if(stButtons.messageQueueInstance==null)stButtons.messageQueueInstance=
new stlib.messageQueue;stlib.browser.ieFallback?setTimeout("stButtons.messageQueueInstance.send(stWidget.createFrag(stlib.data,'data'), 'data');",1E3):stButtons.messageQueueInstance.send(stWidget.createFrag(stlib.data,"data"),"data");if(stlib.browser.ieFallback){setTimeout("stButtons.messageQueueInstance.send(stWidget.createFrag(null,'init'), 'init');",2E3);setTimeout("stWidget.initIE=true;",2500)}else stButtons.messageQueueInstance.send(stWidget.createFrag(null,"init"),"init")}}};
stWidget.options=new function(){this.fpc=stLight.fpc;this.publisher=this.sessionID=null;this.tracking=true;this.offsetTop=this.offsetLeft=this.headerbg=this.headerfg=this.headerTitle=this.exclusive_services=this.send_services=null;this.onhover=true;this.asyncPlusone=this.async=false;this.autoPosition=this.autoclose=true;this.embeds=false;this.minorServices=this.doneScreen=true;this.excludeServices=null;this.theme=1;this.textBoxFontColor=this.mainWidgetColor=this.helpTextColor=this.headerTextColor=
this.footerColor=this.shareButtonColor=this.serviceBarColor=null;this.textRightToLeft=false;this.shorten=true;this.popup=false;this.newOrZero="new";this.publisherGA=this.minShareCount=null;this.services="";this.relatedDomain=null;this.hashAddressBar=false;this.doNotCopy=this.doNotHash=true;this.nativeCount=false;this.fbLang=this.lang="";this.fbLoad=true;this.servicePopup=false;this.linkcause=this.textcause=null};
stWidget.addEntry=function(a){if(!a.element)return false;openWidget=a&&a.service&&(a.service=="email"||(a.service=="sharethis"||a.service=="wordpress")||stIsLoggedIn&&servicesLoggedIn&&typeof servicesLoggedIn[a.service]!="undefined"&&(useFastShare||!useFastShare&&switchTo5x)&&(a.service=="facebook"||a.service=="twitter"||a.service=="yahoo"||a.service=="linkedin"))?true:false;if(!openWidget){if(a.type!=="custom"){a.element.appendChild(stButtons.makeButton(a));(a.service=="plusone"||a.service=="googleplusfollow"||
a.service=="googleplusadd")&&stButtons.getPlusOneFromGoogle(a.service);(a.service=="fblike"||a.service=="fbsend"||a.service=="fbrec"||a.service=="fbLong"||a.service=="fbsub")&&stButtons.getXFBMLFromFB(a.element);stlib.nativeButtons.checkNativeButtonSupport(a.service)&&stlib.nativeButtons.loadService(a.service)}else stButtons.makeButton(a);stlib.buttonInfo.addButton(a);return true}if(a.type!="custom"){a.element.appendChild(stButtons.makeButton(a));(a.service=="plusone"||a.service=="googleplusfollow"||
a.service=="googleplusadd")&&stButtons.getPlusOneFromGoogle(a.service);(a.service=="fblike"||a.service=="fbsend"||a.service=="fbrec"||a.service=="fbLong"||a.service=="fbsub")&&stButtons.getXFBMLFromFB(a.element);stlib.nativeButtons.checkNativeButtonSupport(a.service)&&stlib.nativeButtons.loadService(a.service)}else stButtons.makeButton(a);var b=new Shareable(a);b.idx=stWidget.entries;stWidget.entries++;b.publisher=stLight.publisher;b.sessionID=stLight.sessionID;b.fpc=stLight.fpc;if(a.element.getAttribute("st_via")!=
null)b.via=a.element.getAttribute("st_via").replace(/^\s+|\s+$/g,"");b.url=stWidget.ogurl?stWidget.ogurl:stWidget.twitterurl?stWidget.twitterurl:document.location.href;b.url=a.url?a.url:b.url;if(!stlib.hash.doNotHash){b.url=stlib.hash.appendHash(b.url);a.url=b.url}stlib.data.set("url",b.url,"shareInfo");b.title=stWidget.ogtitle?stWidget.ogtitle:stWidget.twittertitle?stWidget.twittertitle:document.title;b.title=a.title?a.title:b.title;var d=stWidget.ogimg?stWidget.ogimg:stWidget.twitterimg?stWidget.twitterimg:
a.element.thumbnail?a.element.thumbnail:null;b.image=a.element.image?a.element.image:d;b.summary=stWidget.ogdesc?stWidget.ogdesc:stWidget.twitterdesc?stWidget.twitterdesc:stWidget.desc;b.summary=a.element.summary?a.element.summary:b.summary;stWidget.merge(b,stWidget.options);if(typeof stWidget.options.textRightToLeft!="undefined"&&stWidget.options.textRightToLeft!="null"&&stWidget.options.textRightToLeft==true){document.getElementById("stwrapper").style.top="auto";document.getElementById("stwrapper").style.left=
"auto"}b.mouseOn=function(){stWidget.mouseOnTimer=setTimeout(b.decideFastShare,500)};b.mouseOut=function(){clearInterval(stWidget.mouseOnTimer)};b.decideFastShare=function(){if(!stlib.browser.ieFallback||!(typeof stWidget.initIE=="undefined"||stWidget.initIE!=true))if(!useFastShare||!stIsLoggedIn||a.service=="email"||a.service=="sharethis"||a.service=="wordpress"||typeof servicesLoggedIn[a.service]=="undefined"&&(a.service=="facebook"||a.service=="twitter"||a.service=="linkedin"||a.service=="yahoo"))stlib.browser.mobile.handleForMobileFriendly(b,
a,stWidget.options)?stLight.log("widget","mobile",a.service,a.type):b.popup();else{stLight.log("widget","fastShare",a.service,a.type);stFastShareObj.url=b.url;stFastShareObj.title=b.title;stFastShareObj.image=b.image;if(typeof b.summary!="undefined"&&b.summary!=null)stFastShareObj.summary=b.summary;stFastShareObj.via=null;if(a.service=="twitter"&&b.element.getAttribute("st_via")!=null)stFastShareObj.via=b.element.getAttribute("st_via").replace(/^\s+|\s+$/g,"");stFastShareObj.message=b.message;stFastShareObj.element=
a.element;stFastShareObj.service=a.service;stFastShareObj.type=a.type;stFastShareObj.publisher=stlib.data.get("publisher","pageInfo");stFastShareObj.fpc=stlib.data.get("fpc","pageInfo");stFastShareObj.sessionID=stlib.data.get("sessionID","pageInfo");stFastShareObj.hostname=stlib.data.get("hostname","pageInfo");stFastShareObj.username=servicesLoggedIn[a.service];typeof fastShare=="undefined"?stLight.odjs("https:"==document.location.protocol?"https://ws.sharethis.com/button/fastShare.js":"http://w.sharethis.com/button/fastShare.js",
function(){fastShare.showWidget()}):fastShare.showWidget()}};b.popup=function(){if(stWidget.widgetOpen==false){switchTo5x||stWidget.stCancelClose();var d=stLight.getSource2(a);stLight.log("widget",d,a.service,a.type);if(stWidget.options.popup&&!switchTo5x){d=stWidget.createFrag(b);_$d_();_$d1("4x Popup Called");_$d1(d);_$d_();window.open(stWidget.frameUrl4x+"#"+d,"newstframe","status=1,toolbar=0,width=345,height=375")}else if(stWidget.options.popup&&switchTo5x){d="http://sharethis.com/share?url="+
b.url;b.title!=null&&(d=d+("&title="+b.title));b.image!=null&&(d=d+("&img="+b.image));b.summary!=null&&(d=d+("&summary="+b.summary));a.type!=null&&(d=d+("&type="+a.type));b.via!=null&&(d=d+("&via="+b.via));var g="";if(stlib.data){var g=stlib.json.encode(stlib.data.pageInfo),f=stlib.json.encode(stlib.data.shareInfo);if(stlib.browser.isFirefox()&&!stlib.browser.firefox8Version()){g=encodeURIComponent(encodeURIComponent(g));f=encodeURIComponent(encodeURIComponent(f))}else{g=encodeURIComponent(g);f=encodeURIComponent(f)}g=
"&pageInfo="+g+"&shareInfo="+f}window.open(d+g,"newstframe","status=1,toolbar=0,width=820,height=950")}else{stButtons.messageQueueInstance.send(stWidget.createFrag(b),"light");stWidget.positionWidget(b);stWidget.options.embeds==false&&stWidget.hideEmbeds();setTimeout(function(){st_showing=stWidget.widgetOpen=true},200)}}return false};b.init();stlib.buttonInfo.addButton(b);return b};
stWidget.createFrag=function(a,b){var d;d=stWidget.options.popup?"popup":"light";__stgetPubGA();if(b=="data"){d="data";for(var e in a)if(a.hasOwnProperty(e)==true&&a[e]!==null&&typeof a[e]!="function"){var g=typeof a[e]=="object"?stlib.json.encode(a[e]):a[e];d=stlib.browser.isFirefox()&&!stlib.browser.firefox8Version()?d+"/"+e+"="+encodeURIComponent(encodeURIComponent(g)):d+"/"+e+"="+encodeURIComponent(g)}}else if(b=="init"){d="init";if(stWidget.options.tracking&&stWidget.options.publisherGA==null)if(typeof pageTracker!=
"undefined"&&pageTracker!==null)stWidget.options.publisherGA=pageTracker._getAccount();else if(stWidget.options.publisherGA==null&&typeof __stPubGA!=="undefined")stWidget.options.publisherGA=__stPubGA;for(e in stWidget.options)if(stWidget.options.hasOwnProperty(e)==true&&stWidget.options[e]!==null&&typeof stWidget.options[e]!="function"&&typeof stWidget.options[e]!="object"){g=stWidget.options[e];try{g=decodeURIComponent(g);g=decodeURIComponent(g)}catch(f){}d=d+"/"+e+"="+encodeURIComponent(g)}d=d+
"/pUrl="+encodeURIComponent(encodeURIComponent(document.location.href))+(document.title!=""?"/title="+encodeURIComponent(encodeURIComponent(document.title)):"")+"/stLight=true"}else{for(e in a)a.hasOwnProperty(e)==true&&(a[e]!==null&&typeof a[e]!="function"&&typeof a[e]!="object"&&e!=="idx")&&(d=d+"/"+e+"-=-"+encodeURIComponent(encodeURIComponent(a[e])));a.service=="email"&&(d=d+"/page-=-send");switchTo5x&&(a.service=="facebook"?d=d+"/page-=-fbhome":a.service=="twitter"?d=d+"/page-=-twhome":a.service==
"yahoo"?d=d+"/page-=-ybhome":a.service=="linkedin"?d=d+"/page-=-lihome":a.service=="wordpress"&&(d=d+"/page-=-wphome"));if(stlib.data){e=stlib.json.encode(stlib.data.pageInfo);g=stlib.json.encode(stlib.data.shareInfo);if(stlib.browser.isFirefox()&&!stlib.browser.firefox8Version()){e=encodeURIComponent(encodeURIComponent(e));g=encodeURIComponent(encodeURIComponent(g))}else{e=encodeURIComponent(e);g=encodeURIComponent(g)}d=d+("/pageInfo-=-"+e)+("/shareInfo-=-"+g)}}return d};
stWidget.positionWidget=function(a){function b(a){for(var b=0,d=0,e=true;a!=null;){d=d+a.offsetLeft;e&&(b=b+a.offsetTop);if(window.getComputedStyle){if(document.defaultView.getComputedStyle(a,null).getPropertyValue("position")=="fixed"){b=b+(document.documentElement.scrollTop||document.body.scrollTop);e=false}}else if(a.currentStyle&&a.currentStyle.position=="fixed"){b=b+(document.documentElement.scrollTop||document.body.scrollTop);e=false}a=a.offsetParent}return{height:b,width:d}}if(!a)return false;
if(switchTo5x){document.getElementById("stOverlay").style.display="block";if(stWidget.options.autoPosition==true){stWidget.wrapper.style.left=document.all&&navigator.appVersion.indexOf("MSIE 7.")!=-1?"500px":"10%";stWidget.wrapper.style.right="10%";g=(document.documentElement.clientHeight-parseFloat(stWidget.wrapper.offsetHeight)/2)/2;g>20?g=20:g<5&&(g=5);stWidget.wrapper.style.top=g+"px";stWidget.wrapper.style.marginLeft="auto";stWidget.wrapper.style.marginRight="auto";stWidget.wrapper.style.textAlign=
"left";stWidget.wrapper.style.position="fixed";if(document.all&&navigator.appVersion.indexOf("MSIE 6.")!=-1){stWidget.wrapper.style.left="300px";stWidget.wrapper.style.position="absolute"}}if(stWidget.options.autoPosition=="center"){stWidget.wrapper.style.left=document.all&&navigator.appVersion.indexOf("MSIE 7.")!=-1?"500px":"10%";stWidget.wrapper.style.right="10%";stWidget.wrapper.style.marginLeft="auto";stWidget.wrapper.style.marginRight="auto";stWidget.wrapper.style.position="fixed";g=(document.documentElement.clientHeight-
parseFloat(stWidget.wrapper.offsetHeight)/2)/2;g>20?g=20:g<5&&(g=5);stWidget.wrapper.style.top=g+"px";if(document.all&&navigator.appVersion.indexOf("MSIE 6.")!=-1)stWidget.wrapper.style.position="absolute"}}else{shareel=a.element;var d=curtop=0,e=b(shareel),d=e.width;curtop=e.height;shareel=a.element;var g=e=a=0,f=0,e=a=0,a=curtop+shareel.offsetHeight+5,e=d+5,g=a+(stWidget.options.offsetTop?stWidget.options.offsetTop:0),a=g=eval(g),g=g+"px",f=e+(stWidget.options.offsetLeft?stWidget.options.offsetLeft:
0),e=f=eval(f);stWidget.wrapper.style.top=g;stWidget.wrapper.style.left=f+"px";if(stWidget.options.autoPosition==true){stWidget.oldScroll=document.body.scrollTop;g=stWidget.pageSize();d=330+a-(g.height+g.scrY);g=330+e-(g.width+g.scrX);a=a-d;e=e-g;f=b(shareel);if(d>0){f.height-330>0&&(a=f.height-330);stWidget.wrapper.style.top=a+"px"}if(g>0){f.width-330>0&&(e=f.width-330);stWidget.wrapper.style.left=e+"px"}}if(stWidget.options.autoPosition=="center"){stWidget.wrapper.style.top="15%";stWidget.wrapper.style.left=
"35%";stWidget.wrapper.style.position="fixed"}}stWidget.wrapper.style.visibility="visible";stWidget.mainstframe.style.visibility="visible"};stWidget.hideWidget=function(){if(stWidget.wrapper.style.visibility!=="hidden")stWidget.wrapper.style.visibility="hidden";if(stWidget.mainstframe.style.visibility!=="hidden")stWidget.mainstframe.style.visibility="hidden";if(switchTo5x)document.getElementById("stOverlay").style.display="none"};
stWidget.pageSize=function(){var a=[0,0,0,0],b=a=0,d=0,e=0;if(typeof window.pageYOffset=="number"){a=window.pageXOffset;b=window.pageYOffset}else if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){a=document.body.scrollLeft;b=document.body.scrollTop}else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){a=document.documentElement.scrollLeft;b=document.documentElement.scrollTop}if(window.innerWidth){d=window.innerWidth;e=window.innerHeight}else if(document.documentElement.offsetWidth){d=
document.documentElement.offsetWidth;e=document.documentElement.offsetHeight}return a={scrX:a,scrY:b,width:d,height:e}};stWidget.closetimeout=null;stWidget.stClose=function(a){a||(a=1E3);if(!switchTo5x&&stWidget.options.autoclose!=null&&(stWidget.options.autoclose==true||stWidget.options.autoclose=="true"))stWidget.openDuration<0.5&&stWidget.stopClosing==false?stWidget.closetimeout=setTimeout("stWidget.closeWidget()",a):stWidget.stopClosing=true};
stWidget.stCancelClose=function(){clearTimeout(stWidget.closetimeout);stWidget.buttonClicked=true;setTimeout(function(){stWidget.buttonClicked=false},100)};
stWidget.closeWidget=function(){if(st_showing==false)return false;st_showing=false;stWidget.widgetOpen=false;stWidget.wrapper.style.visibility="hidden";stWidget.mainstframe.style.visibility="hidden";stWidget.showEmbeds();stWidget.sendEvent("screen","home");if(switchTo5x)document.getElementById("stOverlay").style.display="none";else{stWidget.wrapper.style.top="-999px";stWidget.wrapper.style.left="-999px"}};
stWidget.hideEmbeds=function(){for(var a=document.getElementsByTagName("embed"),b=0;b<a.length;b++)a[b].style.visibility="hidden"};stWidget.showEmbeds=function(){if(stWidget.options.embeds==true)return true;for(var a=document.getElementsByTagName("embed"),b=0;b<a.length;b++)a[b].style.visibility="visible"};stWidget.sendEvent=function(a,b){stButtons.messageQueueInstance.send("widget/"+a+"="+b,"widget")};stWidget.getMetaTags=function(){stWidget.getOGTags();stWidget.getTwitterTags()};
stWidget.getOGTags=function(){for(var a=document.getElementsByTagName("meta"),b=0;b<a.length;b++){var d=a[b].getAttribute("property");d==null&&(d=a[b].getAttribute("name"));if(d=="og:title")stWidget.ogtitle=a[b].getAttribute("content");else if(d=="og:type")stWidget.ogtype=a[b].getAttribute("content");else if(d=="og:url")stWidget.ogurl=a[b].getAttribute("content");else if(d=="og:image")stWidget.ogimg=a[b].getAttribute("content");else if(d=="og:description")stWidget.ogdesc=a[b].getAttribute("content");
else if(d=="description"||d=="Description")stWidget.desc=a[b].getAttribute("content")}};
stWidget.getTwitterTags=function(){for(var a=document.getElementsByTagName("meta"),b=0;b<a.length;b++){var d=a[b].getAttribute("name");d==null&&(d=a[b].getAttribute("property"));if(d=="twitter:card")stWidget.twittercard=a[b].getAttribute("content");else if(d=="twitter:url")stWidget.twitterurl=a[b].getAttribute("content");else if(d=="twitter:title")stWidget.twittertitle=a[b].getAttribute("content");else if(d=="twitter:description")stWidget.twitterdesc=a[b].getAttribute("content");else if(d=="twitter:image")stWidget.twitterimg=
a[b].getAttribute("content");else if(d=="description"||d=="Description")stWidget.desc=a[b].getAttribute("content")}};
function shareLog(a){if(typeof pageTracker!="undefined"&&pageTracker!==null)pageTracker._trackEvent("ShareThis",a);else if(typeof _gaq!="undefined"&&_gaq!==null)_gaq.push(["_trackEvent","ShareThis",a]);else if(stButtons.publisherTracker!==null)stButtons.publisherTracker._trackEvent("ShareThis",a);else if(typeof _gat!="undefined"&&_gat!==null&&typeof stWidget.options.publisherGA!="undefined"&&stWidget.options.publisherGA!=null){stButtons.publisherTracker=_gat._getTracker(stWidget.options.publisherGA);
stButtons.publisherTracker._trackEvent("ShareThis",a)}}
stButtons.completeInit=function(){if(!stButtons.goToInit){stButtons.goToInit=true;stWidget.getMetaTags();document.body.appendChild(stWidget.wrapper);switchTo5x&&document.body.appendChild(stWidget.overlay);if(!switchTo5x)try{var a=document.getElementById("stLframe");a.onmouseover=function(){stWidget.stCancelClose();stWidget.inTime=(new Date).getTime()};a.onmouseout=function(){stWidget.outTime=(new Date).getTime();stWidget.openDuration=(stWidget.outTime-stWidget.inTime)/1E3;stWidget.stClose()};try{document.body.attachEvent?
document.body.attachEvent("onclick",function(){if(stWidget.buttonClicked==false){stWidget.stopClosing=false;stWidget.openDuration=0;stWidget.stClose(100)}}):document.body.setAttribute("onclick","if(stWidget.buttonClicked==false){stWidget.stopClosing=false;stWidget.openDuration=0;stWidget.stClose(100);}")}catch(b){document.body.onclick=function(){if(stWidget.buttonClicked==false){stWidget.stopClosing=false;stWidget.openDuration=0;stWidget.stClose(100)}}}}catch(d){}stButtons.makeButtons();stWidget.init()}};
plusoneCallback=function(a){if(a.state=="on"){stlib.data.resetShareData();stlib.data.set("url",a.href,"shareInfo");stlib.data.set("destination","plusone","shareInfo");stlib.data.setSource("chicklet");stlib.data.set("buttonType","chicklet","shareInfo");stlib.sharer.share()}};
stButtons.trackFB=function(){try{if(!stButtons.fbTracked&&typeof FB!="undefined"&&typeof FB.Event!="undefined"&&typeof FB.Event.subscribe!="undefined"){stButtons.fbTracked=true;FB.Event.subscribe("edge.create",function(a){stButtons.trackShare("fblike_auto",a);stLight.callSubscribers("click","fblike",a)});FB.Event.subscribe("edge.remove",function(a){stButtons.trackShare("fbunlike_auto",a);stLight.callSubscribers("click","fbunlike",a)});FB.Event.subscribe("message.send",function(a){stButtons.trackShare("fbsend_auto",
a);stLight.callSubscribers("click","fbsend",a)})}}catch(a){}};
stButtons.trackTwitter=function(){if(!stButtons.twitterTracked&&typeof twttr!="undefined"&&typeof twttr.events!="undefined"&&typeof twttr.events.bind!="undefined"){stButtons.twitterTracked=true;twttr.events.bind("click",function(){stButtons.trackTwitterEvent("click");stLight.callSubscribers("click","twitter")});twttr.events.bind("tweet",function(){stButtons.trackTwitterEvent("tweet")});twttr.events.bind("retweet",function(){stButtons.trackTwitterEvent("retweet");stLight.callSubscribers("click","retweet")});
twttr.events.bind("favorite",function(){stButtons.trackTwitterEvent("favorite");stLight.callSubscribers("click","favorite")});twttr.events.bind("follow",function(){stButtons.trackTwitterEvent("follow");stLight.callSubscribers("click","follow")})}};stButtons.trackTwitterEvent=function(a){stButtons.trackShare("twitter_"+a+"_auto")};
stButtons.trackShare=function(a,b){var d=typeof b!=="undefined"&&b!==null?b:document.location.href;stlib.data.resetShareData();stlib.data.set("url",d,"shareInfo");stlib.data.set("destination",a,"shareInfo");stlib.data.set("buttonType","chicklet","shareInfo");stlib.data.setSource("chicklet");stlib.sharer.share()};stLight.processSTQ=function(){if(typeof _stq!="undefined")for(var a=0;a<_stq.length;a++)stLight.options(_stq[a]);else return false};
stLight.onDomContentLoaded=function(){stLight.onReady();stButtons.trackTwitter()};stLight.onDomContentLoadedLazy=function(){stLight.loadServicesLoggedIn(function(){stlib.data.init();stButtons.locateElements();stButtons.makeButtons()})};stLight.messageReceiver=function(a){if(a&&(a.origin=="http://edge.sharethis.com"||a.origin=="https://ws.sharethis.com")){a=a.data;a=a.split("|");a[0]=="ShareThis"&&a.length>2&&stLight.callSubscribers(a[1],a[2],typeof a[3]=="undefined"?document.location.href:a[3])}};
stLight.subscribe=function(a,b){a=="click"?stLight.clickSubscribers.push(b):stLight.nonClickSubscribers.push(b)};stLight.callSubscribers=function(a,b,d){if(a=="click")for(a=0;a<stLight.clickSubscribers.length;a++)stLight.clickSubscribers[a]("click",b,d)};
stLight.gaTS=function(a,b,d){var e=a="";if(b=="fblike"){a="ShareThis_facebook";e="Like"}else if(b=="fbunlike"){a="ShareThis_facebook";e="UnLike"}else if(b=="fbsend"){a="ShareThis_facebook";e="Send"}else if(b=="twitter"){a="ShareThis_twitter";e="Share"}else if(b=="retweet"){a="ShareThis_twitter";e="ReTweet"}else if(b=="favorite"){a="ShareThis_twitter";e="Favorite"}else if(b=="follow"){a="ShareThis_twitter";e="Follow"}else{a="ShareThis_"+b;e="Share"}typeof _gaq!="undefined"&&_gaq.push(["_trackSocial",
a,e,d])};
stButtons.onReady=function(){for(var a=document.getElementsByTagName("*"),b=RegExp(/sharethis_smartbuttons/),d=false,e=0;e<a.length;e++)if(typeof a[e].className=="string"&&a[e].className!=""&&a[e].className.match(b)){d=true;break}if(d){a=document.getElementsByTagName("head")[0];b=["return=json","cb=stButtons.smartifyButtons"];b=b.join("&");b=("https:"==document.location.protocol?"https://ws.":"http://wd.")+"sharethis.com/api/getRecentServices.php?"+b;d=document.createElement("script");d.setAttribute("type","text/javascript");
d.setAttribute("src",b);a.appendChild(d);setTimeout("stButtons.completeInit()",2E3)}else stButtons.completeInit();stLight.subscribe("click",stLight.gaTS)};stLight.domReady=function(){stLight.onReady();stButtons.trackTwitter();__stgetPubGA();typeof __stPubGA!=="undefined"&&(stLight.readyRun==true&&stWidget.frameReady==true)&&stWidget.sendEvent("publisherGA",__stPubGA)};stButtons.goToInit=!1;stButtons.widget=!1;stButtons.widgetArray=[];stButtons.queue=[];stButtons.cbQueue=[];
stButtons.cbNativeQueue=[];stButtons.cbVal=0;stButtons.queuePos=0;stButtons.counts=[];st_showing=!1;stButtons.urlElements=[];stButtons.publisherTracker=null;stButtons.plusOneLoaded=!1;stButtons.plusOneLoading=!1;stButtons.xfbmlLoaded=!1;stButtons.xfbmlLoading=!1;stButtons.fbTracked=!1;stButtons.twitterTracked=!1;stButtons.pumpInstance=null;stButtons.messageQueueInstance=null;stButtons.countsResp=[];stButtons.countsNativeResp=[];stWidget.getMetaTags();stLight.clickSubscribers=[];
stLight.nonClickSubscribers=[];var __stPubGA;"completed"==window.document.readyState?stLight.domReady():"undefined"!=typeof window.addEventListener?window.addEventListener("load",stLight.domReady,!1):"undefined"!=typeof document.addEventListener?document.addEventListener("load",stLight.domReady,!1):"undefined"!=typeof window.attachEvent&&window.attachEvent("onload",stLight.domReady);
"undefined"!=typeof window.addEventListener?window.addEventListener("click",function(){stWidget.closeWidget()},!1):"undefined"!=typeof document.addEventListener?document.addEventListener("click",function(){stWidget.closeWidget()},!1):"undefined"!=typeof window.attachEvent&&window.attachEvent("onclick",function(){stWidget.closeWidget()});
"undefined"==typeof __st_loadLate?"undefined"!=typeof window.addEventListener?window.addEventListener("DOMContentLoaded",stLight.onDomContentLoaded,!1):"undefined"!=typeof document.addEventListener&&document.addEventListener("DOMContentLoaded",stLight.onDomContentLoaded,!1):"undefined"!=typeof window.addEventListener?window.addEventListener("DOMContentLoaded",stLight.onDomContentLoadedLazy,!1):"undefined"!=typeof document.addEventListener&&document.addEventListener("DOMContentLoaded",stLight.onDomContentLoadedLazy,
!1);"undefined"!=typeof window.addEventListener?window.addEventListener("message",stLight.messageReceiver,!1):"undefined"!=typeof document.addEventListener?document.addEventListener("message",stLight.messageReceiver,!1):"undefined"!=typeof window.attachEvent&&window.attachEvent("onmessage",stLight.messageReceiver);"complete"==document.readyState&&!1==stLight.readyRun&&stLight.domReady();(function(a,b,d){function e(a,d){var e=b.createElement(a||"div"),f;for(f in d)e[f]=d[f];return e}function g(a){for(var b=1,d=arguments.length;b<d;b++)a.appendChild(arguments[b]);return a}function f(a,b){var e=a.style,f,g;if(e[b]!==d)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(g=0;g<m.length;g++)if(f=m[g]+b,e[f]!==d)return f}function k(a,b){for(var d in b)a.style[f(a,d)||d]=b[d];return a}function l(a){for(var b=1;b<arguments.length;b++){var e=arguments[b],f;for(f in e)a[f]===d&&(a[f]=e[f])}return a}
function j(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var m=["webkit","Moz","ms","O"],n={},s,p,q=e("style");p=(g(b.getElementsByTagName("head")[0],q),q.sheet||q.styleSheet);var t={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto"},q=function C(a){if(!this.spin)return new C(a);this.opts=l(a||{},C.defaults,t)};q.defaults={};l(q.prototype,
{spin:function(a){this.stop();var b=this,d=b.opts,f=b.el=k(e(0,{className:d.className}),{position:"relative",zIndex:d.zIndex}),g=d.radius+d.length+d.width,l,h;a&&(a.insertBefore(f,a.firstChild||null),h=j(a),l=j(f),k(f,{left:("auto"==d.left?h.x-l.x+(a.offsetWidth>>1):d.left+g)+"px",top:("auto"==d.top?h.y-l.y+(a.offsetHeight>>1):d.top+g)+"px"}));f.setAttribute("aria-role","progressbar");b.lines(f,b.opts);if(!s){var m=0,n=d.fps,p=n/d.speed,o=(1-d.opacity)/(p*d.trail/100),q=p/d.lines;!function E(){m++;
for(var a=d.lines;a;a--){var e=Math.max(1-(m+a*q)%p*o,d.opacity);b.opacity(f,d.lines-a,e,d)}b.timeout=b.el&&setTimeout(E,~~(1E3/n))}()}return b},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=d),this},lines:function(a,b){function d(a,g){return k(e(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:g,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*f+b.rotate)+"deg) translate("+
b.radius+"px,0)",borderRadius:(b.width>>1)+"px"})}for(var f=0,j;f<b.lines;f++){j=e();var l=1+~(b.width/2)+"px",h=b.hwaccel?"translate3d(0,0,0)":"",m=b.opacity,o;if(o=s){o=b.opacity;var q=b.trail,r=f,t=b.lines,F=["opacity",q,~~(100*o),r,t].join("-"),r=0.01+100*(r/t),t=Math.max(1-(1-o)/q*(100-r),o),E=s.substring(0,s.indexOf("Animation")).toLowerCase(),E=E&&"-"+E+"-"||"";o=(n[F]||(p.insertRule("@"+E+"keyframes "+F+"{0%{opacity:"+t+"}"+r+"%{opacity:"+o+"}"+(r+0.01)+"%{opacity:1}"+(r+q)%100+"%{opacity:"+
o+"}100%{opacity:"+t+"}}",0),n[F]=1),F)+" "+1/b.speed+"s linear infinite"}j=k(j,{position:"absolute",top:l,transform:h,opacity:m,animation:o});b.shadow&&g(j,k(d("#000","0 0 4px #000"),{top:"2px"}));g(a,g(j,d(b.color,"0 0 1px rgba(0,0,0,.1)")))}return a},opacity:function(a,b,d){b<a.childNodes.length&&(a.childNodes[b].style.opacity=d)}});var r=function(a,b){return e("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',b)},o=k(e("group"),{behavior:"url(#default#VML)"});!f(o,"transform")&&
o.adj?(p.addRule(".spin-vml","behavior:url(#default#VML)"),q.prototype.lines=function(a,b){function d(){return k(r("group",{coordsize:j+" "+j,coordorigin:-f+" "+-f}),{width:j,height:j})}function e(a,h,j){g(l,g(k(d(),{rotation:360/b.lines*a+"deg",left:~~h}),g(k(r("roundrect",{arcsize:1}),{width:f,height:b.width,left:b.radius,top:-b.width>>1,filter:j}),r("fill",{color:b.color,opacity:b.opacity}),r("stroke",{opacity:0}))))}var f=b.length+b.width,j=2*f,h=2*-(b.width+b.length)+"px",l=k(d(),{position:"absolute",
top:h,left:h});if(b.shadow)for(h=1;h<=b.lines;h++)e(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=b.lines;h++)e(h);return g(a,l)},q.prototype.opacity=function(a,b,d,e){a=a.firstChild;e=e.shadow&&e.lines||0;a&&b+e<a.childNodes.length&&(a=a.childNodes[b+e],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=d))}):s=f(o,"animation");!0;a.Spinner=q})(window,document);!function(a){a(function(){var b=a.support,d;a:{d=document.createElement("bootstrap");var e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},g;for(g in e)if(void 0!==d.style[g]){d=e[g];break a}d=void 0}b.transition=d&&{end:d}})}(window.jQuery);
!function(a){var b=function(b,d){this.options=d;this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,d=a.Event("show");this.$element.trigger(d);!this.isShown&&!d.isDefaultPrevented()&&(this.isShown=!0,this.escape(),this.backdrop(function(){var d=a.support.transition&&
b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body);b.$element.show();d&&b.$element[0].offsetWidth;b.$element.addClass("in").attr("aria-hidden",!1);b.enforceFocus();d?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=a.Event("hide");this.$element.trigger(b);this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),
this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]!==a.target&&!b.$element.has(a.target).length&&b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},
hideWithTransition:function(){var b=this,d=setTimeout(function(){b.$element.off(a.support.transition.end);b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(d);b.hideModal()})},hideModal:function(){var a=this;this.$element.hide();this.backdrop(function(){a.removeBackdrop();a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null},backdrop:function(b){var d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&
this.options.backdrop){var f=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body);this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this));f&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");b&&(f?this.$backdrop.one(a.support.transition.end,b):b())}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?
this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var d=a.fn.modal;a.fn.modal=function(d){return this.each(function(){var g=a(this),f=g.data("modal"),k=a.extend({},a.fn.modal.defaults,g.data(),"object"==typeof d&&d);f||g.data("modal",f=new b(this,k));"string"==typeof d?f[d]():k.show&&f.show()})};a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0};a.fn.modal.Constructor=b;a.fn.modal.noConflict=function(){return a.fn.modal=d,this};a(document).on("click.modal.data-api",'[data-toggle="modal"]',
function(b){var d=a(this),f=d.attr("href"),k=a(d.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),f=k.data("modal")?"toggle":a.extend({remote:!/#/.test(f)&&f},k.data(),d.data());b.preventDefault();k.modal(f).one("hide",function(){d.focus()})})}(window.jQuery);
!function(a){var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,d,f){var k,l;this.type=b;this.$element=a(d);this.options=this.getOptions(f);this.enabled=!0;b=this.options.trigger.split(" ");for(f=b.length;f--;)d=b[f],"click"==d?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=d&&(k="hover"==d?"mouseenter":"focus",l="hover"==d?"mouseleave":"blur",this.$element.on(k+"."+this.type,this.options.selector,a.proxy(this.enter,
this)),this.$element.on(l+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var d=a.fn[this.type].defaults,f={},k;this._options&&a.each(this._options,function(a,b){d[a]!=b&&(f[a]=b)},this);k=
a(b.currentTarget)[this.type](f).data(this.type);if(!k.options.delay||!k.options.delay.show)return k.show();clearTimeout(this.timeout);k.hoverState="in";this.timeout=setTimeout(function(){"in"==k.hoverState&&k.show()},k.options.delay.show)},leave:function(b){var d=a(b.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!d.options.delay||!d.options.delay.hide)return d.hide();d.hoverState="out";this.timeout=setTimeout(function(){"out"==d.hoverState&&
d.hide()},d.options.delay.hide)},show:function(){var b,d,f,k,l;d=a.Event("show");if(this.hasContent()&&this.enabled&&(this.$element.trigger(d),!d.isDefaultPrevented())){b=this.tip();this.setContent();this.options.animation&&b.addClass("fade");k="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement;b.detach().css({top:0,left:0,display:"block"});this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element);d=
this.getPosition();f=b[0].offsetWidth;b=b[0].offsetHeight;switch(k){case "bottom":l={top:d.top+d.height,left:d.left+d.width/2-f/2};break;case "top":l={top:d.top-b,left:d.left+d.width/2-f/2};break;case "left":l={top:d.top+d.height/2-b/2,left:d.left-f};break;case "right":l={top:d.top+d.height/2-b/2,left:d.left+d.width}}this.applyPlacement(l,k);this.$element.trigger("shown")}},applyPlacement:function(a,b){var d=this.tip(),k=d[0].offsetWidth,l=d[0].offsetHeight,j,m,n,s;d.offset(a).addClass(b).addClass("in");
j=d[0].offsetWidth;m=d[0].offsetHeight;"top"==b&&m!=l&&(a.top=a.top+l-m,s=!0);"bottom"==b||"top"==b?(n=0,0>a.left&&(n=-2*a.left,a.left=0,d.offset(a),j=d[0].offsetWidth),this.replaceArrow(n-k+j,j,"left")):this.replaceArrow(m-l,m,"top");s&&d.offset(a)},replaceArrow:function(a,b,d){this.arrow().css(d,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b);a.removeClass("fade in top bottom left right")},hide:function(){var b=
this.tip(),d=a.Event("hide");this.$element.trigger(d);if(!d.isDefaultPrevented()){b.removeClass("in");if(a.support.transition&&this.$tip.hasClass("fade")){var f=setTimeout(function(){b.off(a.support.transition.end).detach()},500);b.one(a.support.transition.end,function(){clearTimeout(f);b.detach()})}else b.detach();return this.$element.trigger("hidden"),this}},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||
"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,d=this.options;return a=b.attr("data-original-title")||("function"==typeof d.title?d.title.call(b[0]):d.title),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=
this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){b=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;b.tip().hasClass("in")?b.hide():b.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var d=a.fn.tooltip;
a.fn.tooltip=function(d){return this.each(function(){var g=a(this),f=g.data("tooltip"),k="object"==typeof d&&d;f||g.data("tooltip",f=new b(this,k));"string"==typeof d&&f[d]()})};a.fn.tooltip.Constructor=b;a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(window.jQuery);
!function(a){var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),d=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b);a.find(".popover-content")[this.options.html?"html":"text"](d);a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,d=this.options;
return a=("function"==typeof d.content?d.content.call(b[0]):d.content)||b.attr("data-content"),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var d=a.fn.popover;a.fn.popover=function(d){return this.each(function(){var g=a(this),f=g.data("popover"),k="object"==typeof d&&d;f||g.data("popover",f=new b(this,k));"string"==typeof d&&f[d]()})};a.fn.popover.Constructor=b;a.fn.popover.defaults=
a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(window.jQuery);
!function(a){var b=function(b){a(b).on("click",'[data-dismiss="alert"]',this.close)};b.prototype.close=function(b){function d(){l.trigger("closed").remove()}var f=a(this),k=f.attr("data-target"),l;k||(k=f.attr("href"),k=k&&k.replace(/.*(?=#[^\s]*$)/,""));l=a(k);b&&b.preventDefault();l.length||(l=f.hasClass("alert")?f:f.parent());l.trigger(b=a.Event("close"));b.isDefaultPrevented()||(l.removeClass("in"),a.support.transition&&l.hasClass("fade")?l.on(a.support.transition.end,d):d())};var d=a.fn.alert;
a.fn.alert=function(d){return this.each(function(){var g=a(this),f=g.data("alert");f||g.data("alert",f=new b(this));"string"==typeof d&&f[d].call(g)})};a.fn.alert.Constructor=b;a.fn.alert.noConflict=function(){return a.fn.alert=d,this};a(document).on("click.alert.data-api",'[data-dismiss="alert"]',b.prototype.close)}(window.jQuery);
!function(a){var b=function(b,d){this.$element=a(b);this.options=a.extend({},a.fn.button.defaults,d)};b.prototype.setState=function(a){var b=this.$element,d=b.data(),k=b.is("input")?"val":"html",a=a+"Text";d.resetText||b.data("resetText",b[k]());b[k](d[a]||this.options[a]);setTimeout(function(){"loadingText"==a?b.addClass("disabled").attr("disabled","disabled"):b.removeClass("disabled").removeAttr("disabled")},0)};b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');
a&&a.find(".active").removeClass("active");this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=function(d){return this.each(function(){var g=a(this),f=g.data("button"),k="object"==typeof d&&d;f||g.data("button",f=new b(this,k));"toggle"==d?f.toggle():d&&f.setState(d)})};a.fn.button.defaults={loadingText:"loading..."};a.fn.button.Constructor=b;a.fn.button.noConflict=function(){return a.fn.button=d,this};a(document).on("click.button.data-api","[data-toggle^=button]",function(b){b=a(b.target);
b.hasClass("btn")||(b=b.closest(".btn"));b.button("toggle")})}(window.jQuery);(function(a,b,d){function e(a,b,d){for(var e=[],f=0;f<a.length;f++){var g=tinycolor(a[f]),h=0.5>g.toHsl().l?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light",h=h+(tinycolor.equals(b,a[f])?" sp-thumb-active":""),j=p?"background-color:"+g.toRgbString():"filter:"+g.toFilter();e.push('<span title="'+g.toRgbString()+'" data-color="'+g.toRgbString()+'" class="'+h+'"><span class="sp-thumb-inner" style="'+j+';" /></span>')}return"<div class='sp-cf "+d+"'>"+e.join("")+"</div>"}function g(a,d){var e=
a.outerWidth(),f=a.outerHeight(),g=d.outerHeight(),h=a[0].ownerDocument,j=h.documentElement,l=j.clientWidth+b(h).scrollLeft(),h=j.clientHeight+b(h).scrollTop(),j=d.offset();j.top+=g;j.left-=Math.min(j.left,j.left+e>l&&l>e?Math.abs(j.left+e-l):0);j.top-=Math.min(j.top,j.top+f>h&&h>f?Math.abs(f+g-0):0);return j}function f(){}function k(a){a.stopPropagation()}function l(a,b){var d=Array.prototype.slice,e=d.call(arguments,2);return function(){return a.apply(b,e.concat(d.call(arguments)))}}function j(d,
e,f,g){function h(a){a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.returnValue=!1}function j(a){if(m){if(s&&9>document.documentMode&&!a.button)return l();var b=a.originalEvent.touches,f=b?b[0].pageY:a.pageY,b=Math.max(0,Math.min((b?b[0].pageX:a.pageX)-n.left,p)),f=Math.max(0,Math.min(f-n.top,o));q&&h(a);e.apply(d,[b,f,a])}}function l(){m&&(b(k).unbind(r),b(k.body).removeClass("sp-dragging"),g.apply(d,arguments));m=!1}var e=e||function(){},f=f||function(){},g=g||function(){},
k=d.ownerDocument||document,m=!1,n={},o=0,p=0,q="ontouchstart"in a,r={};r.selectstart=h;r.dragstart=h;r[q?"touchmove":"mousemove"]=j;r[q?"touchend":"mouseup"]=l;b(d).bind(q?"touchstart":"mousedown",function(a){if(!(a.which?3==a.which:2==a.button)&&!m&&!1!==f.apply(d,arguments))m=!0,o=b(d).height(),p=b(d).width(),n=b(d).offset(),b(k).bind(r),b(k.body).addClass("sp-dragging"),q||j(a),h(a)})}var m={beforeShow:f,move:f,change:f,show:f,hide:f,color:!1,flat:!1,showInput:!1,showButtons:!0,clickoutFiresChange:!1,
showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",preferredFormat:!1,className:"",showAlpha:!1,theme:"sp-light",palette:["fff","000"],selectionPalette:[],disabled:!1},n=[],s=!!/msie/i.exec(a.navigator.userAgent),p,q=document.createElement("div").style;q.cssText="background-color:rgba(0,0,0,.5)";p=!!~(""+q.backgroundColor).indexOf("rgba")||!!~(""+q.backgroundColor).indexOf("hsla");var t,q="";if(s)for(var r=
1;6>=r;r++)q+="<div class='sp-"+r+"'></div>";t=["<div class='sp-container'><div class='sp-palette-container'><div class='sp-palette sp-thumb sp-cf'></div></div><div class='sp-picker-container'><div class='sp-top sp-cf'><div class='sp-fill'></div><div class='sp-top-inner'><div class='sp-color'><div class='sp-sat'><div class='sp-val'><div class='sp-dragger'></div></div></div></div><div class='sp-hue'><div class='sp-slider'></div>",q,"</div></div><div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div></div><div class='sp-input-container sp-cf'><input class='sp-input' type='text' spellcheck='false'  /></div><div class='sp-initial sp-thumb sp-cf'></div><div class='sp-button-container sp-cf'><a class='sp-cancel' href='#'></a><button class='sp-choose'></button></div></div></div>"].join("");
b.fn.spectrum=function(f,h){if("string"==typeof f){var N=this,o=Array.prototype.slice.call(arguments,1);this.each(function(){var a=n[b(this).data("spectrum.id")];if(a){var d=a[f];if(!d)throw Error("Spectrum: no such method: '"+f+"'");"get"==f?N=a.get():"container"==f?N=a.container:"option"==f?N=a.option.apply(a,o):"destroy"==f?(a.destroy(),b(this).removeData("spectrum.id")):d.apply(a,o)}});return N}return this.spectrum("destroy").each(function(){var h,o=function(){y.toggleClass("sp-flat",D);y.toggleClass("sp-input-disabled",
!z.showInput);y.toggleClass("sp-alpha-enabled",z.showAlpha);y.toggleClass("sp-buttons-disabled",!z.showButtons||D);y.toggleClass("sp-palette-disabled",!z.showPalette);y.toggleClass("sp-palette-only",z.showPaletteOnly);y.toggleClass("sp-initial-disabled",!z.showInitial);y.addClass(z.className);E()},N=function(d){if(L&&(d=tinycolor(d).toRgbString(),-1===b.inArray(d,T)&&T.push(d),U&&a.localStorage))try{a.localStorage[U]=T.join(";")}catch(e){}},Ja=function(){var a=[],b=T,d={},e;if(z.showPalette){for(var f=
0;f<ea.length;f++)for(var g=0;g<ea[f].length;g++)e=tinycolor(ea[f][g]).toRgbString(),d[e]=!0;for(f=0;f<b.length;f++)e=tinycolor(b[f]).toRgbString(),d.hasOwnProperty(e)||(a.push(b[f]),d[e]=!0)}return a.reverse().slice(0,z.maxSelectionSize)},q=function(){var a=A(),d=b.map(ea,function(b,d){return e(b,a,"sp-palette-row sp-palette-row-"+d)});T&&d.push(e(Ja(),a,"sp-palette-row sp-palette-row-selection"));ya.html(d.join(""))},r=function(){if(z.showInitial){var a=Q,b=A();za.html(e([a,b],b,"sp-palette-row-initial"))}},
u=function(){(0===R||0===Y||0===fa)&&E();y.addClass(Aa)},wa=function(){y.removeClass(Aa)},v=function(){var a=tinycolor(O.val());a.ok?B(a):O.addClass("sp-validation-error")},xa=function(){Z?w():x()},x=function(){if(Z)E();else if(!1!==aa.beforeShow(A())){for(var d=0;d<n.length;d++)n[d]&&n[d].hide();Z=!0;b(ga).bind("click.spectrum",w);b(a).bind("resize.spectrum",M);V.addClass("sp-active");y.show();z.showPalette&&q();E();F();Q=A();r();aa.show(Q)}},w=function(d){if((!d||!("click"==d.type&&2==d.button))&&
Z&&!D)Z=!1,b(ga).unbind("click.spectrum",w),b(a).unbind("resize.spectrum",M),V.removeClass("sp-active"),y.hide(),tinycolor.equals(A(),Q)||(va&&"cancel"!==d?G(!0):B(Q,!0)),aa.hide(A())},B=function(a,b){if(!tinycolor.equals(a,A())){var d=tinycolor(a),e=d.toHsv();ba=e.h;ha=e.s;ia=e.v;P=e.a;F();b||(ja=na||d.format)}},A=function(){return tinycolor.fromRatio({h:ba,s:ha,v:ia,a:Math.round(100*P)/100})},C=function(){F();aa.move(A())},F=function(){O.removeClass("sp-validation-error");H();var a=tinycolor({h:ba,
s:"1.0",v:"1.0"});ka.css("background-color",a.toHexString());a=ja;if(1>P&&("hex"===a||"name"===a))a="rgb";var b=A(),d=b.toHexString(),e=b.toRgbString();p||1===b.alpha?oa.css("background-color",e):(oa.css("background-color","transparent"),oa.css("filter",b.toFilter()));if(z.showAlpha){e=b.toRgb();e.a=0;var e=tinycolor(e).toRgbString(),f="linear-gradient(left, "+e+", "+d+")";s?ca.css("filter",tinycolor(e).toFilter({gradientType:1},d)):(ca.css("background","-webkit-"+f),ca.css("background","-moz-"+f),
ca.css("background","-ms-"+f),ca.css("background",f))}if(z.showInput){if(1>P&&("hex"===a||"name"===a))a="rgb";O.val(b.toString(a))}z.showPalette&&q();r()},H=function(){var a=ha*Y,b=R-ia*R,a=Math.max(-S,Math.min(Y-S,a-S)),b=Math.max(-S,Math.min(R-S,b-S));Ba.css({top:b,left:a});Ca.css({left:P*pa-X/2});Da.css({top:ba*fa-Ea})},G=function(a){var b=A();qa&&K.val(b.toString(ja)).change();var d=!tinycolor.equals(b,Q);Q=b;N(b);a&&d&&aa.change(b)},E=function(){Y=ka.width();R=ka.height();S=Ba.height();ra.width();
fa=ra.height();Ea=Da.height();pa=Fa.width();X=Ca.width();D||y.offset(g(y,da));H()};h=function(){w();sa=!0;K.attr("disabled",!0);da.addClass("sp-disabled")};var z,I=b.extend({},m,f);I.callbacks={move:l(I.move,this),change:l(I.change,this),show:l(I.show,this),hide:l(I.hide,this),beforeShow:l(I.beforeShow,this)};z=I;var D=z.flat,L=z.showSelectionPalette,U=z.localStorageKey,J=z.theme,aa=z.callbacks,M,W=E,ta;M=function(){var a=this,b=arguments;ta||(ta=setTimeout(function(){ta=null;W.apply(a,b)},10))};
var Z=!1,Y=0,R=0,S=0,fa=0,pa=0,X=0,Ea=0,ba=0,ha=0,ia=0,P=1,I=z.palette.slice(0),ea=b.isArray(I[0])?I:[I],T=z.selectionPalette.slice(0),Aa="sp-dragging",ga=this.ownerDocument,I=ga.body,K=b(this),sa=!1,y=b(t,ga).addClass(J),ka=y.find(".sp-color"),Ba=y.find(".sp-dragger"),ra=y.find(".sp-hue"),Da=y.find(".sp-slider"),ca=y.find(".sp-alpha-inner"),Fa=y.find(".sp-alpha"),Ca=y.find(".sp-alpha-handle"),O=y.find(".sp-input"),ya=y.find(".sp-palette"),za=y.find(".sp-initial"),Ga=y.find(".sp-cancel"),Ha=y.find(".sp-choose"),
qa=K.is("input"),ua=qa&&!D,V=ua?b("<div class='sp-replacer'><div class='sp-preview'><div class='sp-preview-inner'></div></div><div class='sp-dd'>&#9660;</div></div>").addClass(J):b([]),da=ua?V:K,oa=V.find(".sp-preview-inner"),la=z.color||qa&&K.val(),Q=!1,na=z.preferredFormat,ja=na,va=!z.showButtons||z.clickoutFiresChange,J=function(a){a.data&&a.data.ignore?(B(b(this).data("color")),C()):(B(b(this).data("color")),G(!0),C(),w());return!1};s&&y.find("*:not(input)").attr("unselectable","on");o();ua&&
K.hide().after(V);D?K.after(y).hide():b(I).append(y.hide());if(U&&a.localStorage){try{var Ia=a.localStorage[U].split(",#");1<Ia.length&&(delete a.localStorage[U],b.each(Ia,function(a,b){N(b)}))}catch(Ka){}try{T=a.localStorage[U].split(";")}catch(La){}}da.bind("click.spectrum touchstart.spectrum",function(a){sa||xa();a.stopPropagation();b(a.target).is("input")||a.preventDefault()});(K.is(":disabled")||!0===z.disabled)&&h();y.click(k);O.change(v);O.bind("paste",function(){setTimeout(v,1)});O.keydown(function(a){13==
a.keyCode&&v()});Ga.text(z.cancelText);Ga.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();w("cancel")});Ha.text(z.chooseText);Ha.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();O.hasClass("sp-validation-error")||(G(!0),w())});j(Fa,function(a,b,d){P=a/pa;d.shiftKey&&(P=Math.round(10*P)/10);C()});j(ra,function(a,b){ba=parseFloat(b/fa);C()},u,wa);j(ka,function(a,b){ha=parseFloat(a/Y);ia=parseFloat((R-b)/R);C()},u,wa);la?(B(la),F(),ja=na||tinycolor(la).format,
N(la)):F();D&&x();u=s?"mousedown.spectrum":"click.spectrum touchstart.spectrum";ya.delegate(".sp-thumb-el",u,J);za.delegate(".sp-thumb-el:nth-child(1)",u,{ignore:!0},J);var ma={show:x,hide:w,toggle:xa,reflow:E,option:function(a,e){if(a===d)return b.extend({},z);if(e===d)return z[a];z[a]=e;o()},enable:function(){sa=false;K.attr("disabled",false);da.removeClass("sp-disabled")},disable:h,set:function(a){B(a);G()},get:A,destroy:function(){K.show();da.unbind("click.spectrum touchstart.spectrum");y.remove();
V.remove();n[ma.id]=null},container:y};ma.id=n.push(ma)-1;h=ma;b(this).data("spectrum.id",h.id)})};b.fn.spectrum.load=!0;b.fn.spectrum.loadOpts={};b.fn.spectrum.draggable=j;b.fn.spectrum.defaults=m;b.spectrum={};b.spectrum.localization={};b.spectrum.palettes={};b.fn.spectrum.processNativeColorInputs=function(){var a=b("<input type='color' value='!' />")[0];"color"===a.type&&"!"!=a.value||b("input[type=color]").spectrum({preferredFormat:"hex6"})};var o=function(a){var b,d,e,f,g;if("object"==typeof a&&
a.hasOwnProperty("_tc_id"))return a;d=a;var j=0,l=0,k=0,a=1,m=!1,n=!1;if("string"==typeof d)a:{d=d.replace(A,"").replace(J,"").toLowerCase();var p=!1;if(E[d])d=E[d],p=!0;else if("transparent"==d){d={r:0,g:0,b:0,a:0};break a}d=(b=L.rgb.exec(d))?{r:b[1],g:b[2],b:b[3]}:(b=L.rgba.exec(d))?{r:b[1],g:b[2],b:b[3],a:b[4]}:(b=L.hsl.exec(d))?{h:b[1],s:b[2],l:b[3]}:(b=L.hsla.exec(d))?{h:b[1],s:b[2],l:b[3],a:b[4]}:(b=L.hsv.exec(d))?{h:b[1],s:b[2],v:b[3]}:(b=L.hex6.exec(d))?{r:parseInt(b[1],16),g:parseInt(b[2],
16),b:parseInt(b[3],16),format:p?"name":"hex"}:(b=L.hex3.exec(d))?{r:parseInt(b[1]+""+b[1],16),g:parseInt(b[2]+""+b[2],16),b:parseInt(b[3]+""+b[3],16),format:p?"name":"hex"}:!1}if("object"==typeof d&&(d.hasOwnProperty("r")&&d.hasOwnProperty("g")&&d.hasOwnProperty("b")?(j=255*u(d.r,255),l=255*u(d.g,255),k=255*u(d.b,255),m=!0,n="rgb"):d.hasOwnProperty("h")&&d.hasOwnProperty("s")&&d.hasOwnProperty("v")?(n=d.h,l=d.s,k=d.v,n=6*u(n,360),l=u(l,100),k=u(k,100),j=B.floor(n),m=n-j,n=k*(1-l),b=k*(1-m*l),m=k*
(1-(1-m)*l),p=j%6,j=255*[k,b,n,n,m,k][p],l=255*[m,k,k,b,n,n][p],k=255*[n,n,m,k,k,b][p],m=!0,n="hsv"):d.hasOwnProperty("h")&&(d.hasOwnProperty("s")&&d.hasOwnProperty("l"))&&(j=d.h,n=d.s,k=d.l,l=function(a,b,d){0>d&&(d+=1);1<d&&(d-=1);return d<1/6?a+6*(b-a)*d:0.5>d?b:d<2/3?a+6*(b-a)*(2/3-d):a},j=u(j,360),n=u(n,100),k=u(k,100),0===n?n=k=b=k:(b=0.5>k?k*(1+n):k+n-k*n,m=2*k-b,n=l(m,b,j+1/3),k=l(m,b,j),b=l(m,b,j-1/3)),j=255*n,l=255*k,k=255*b,m=!0,n="hsl"),d.hasOwnProperty("a")))a=d.a;j=H(255,G(j,0));l=H(255,
G(l,0));k=H(255,G(k,0));1>j&&(j=w(j));1>l&&(l=w(l));1>k&&(k=w(k));b=m;d=d&&d.format||n;e=j;f=l;g=k;var q=F(a);return{ok:b,format:d,_tc_id:h++,alpha:q,toHsv:function(){var a=C(e,f,g);return{h:a.h,s:a.s,v:a.v,a:q}},toHsvString:function(){var a=C(e,f,g),b=w(360*a.h),d=w(100*a.s),a=w(100*a.v);return 1==q?"hsv("+b+", "+d+"%, "+a+"%)":"hsva("+b+", "+d+"%, "+a+"%, "+q+")"},toHsl:function(){var a=v(e,f,g);return{h:a.h,s:a.s,l:a.l,a:q}},toHslString:function(){var a=v(e,f,g),b=w(360*a.h),d=w(100*a.s),a=w(100*
a.l);return 1==q?"hsl("+b+", "+d+"%, "+a+"%)":"hsla("+b+", "+d+"%, "+a+"%, "+q+")"},toHex:function(){return x(e,f,g)},toHexString:function(a){return"#"+x(e,f,g,a)},toRgb:function(){return{r:w(e),g:w(f),b:w(g),a:q}},toRgbString:function(){return 1==q?"rgb("+w(e)+", "+w(f)+", "+w(g)+")":"rgba("+w(e)+", "+w(f)+", "+w(g)+", "+q+")"},toName:function(){return va[x(e,f,g)]||!1},toFilter:function(a,b){var d=x(e,f,g,!0),h=d,j=Math.round(255*F(q)).toString(16),k=j,l=a&&a.gradientType?"GradientType = 1, ":"";
b&&(k=o(b),h=k.toHex(),k=Math.round(255*F(k.alpha)).toString(16));return"progid:DXImageTransform.Microsoft.gradient("+l+"startColorstr=#"+D(j)+d+",endColorstr=#"+D(k)+h+")"},toString:function(a){var a=a||this.format,b=!1;"rgb"===a&&(b=this.toRgbString());"hex"===a&&(b=this.toHexString());"hex6"===a&&(b=this.toHexString(!0));"name"===a&&(b=this.toName());"hsl"===a&&(b=this.toHslString());"hsv"===a&&(b=this.toHsvString());return b||this.toHexString(!0)}}},v=function(a,b,d){var a=u(a,255),b=u(b,255),
d=u(d,255),e=G(a,b,d),f=H(a,b,d),g,h=(e+f)/2;if(e==f)g=f=0;else{var j=e-f,f=0.5<h?j/(2-e-f):j/(e+f);switch(e){case a:g=(b-d)/j+(b<d?6:0);break;case b:g=(d-a)/j+2;break;case d:g=(a-b)/j+4}g/=6}return{h:g,s:f,l:h}},C=function(a,b,d){var a=u(a,255),b=u(b,255),d=u(d,255),e=G(a,b,d),f=H(a,b,d),g,h=e-f;if(e==f)g=0;else{switch(e){case a:g=(b-d)/h+(b<d?6:0);break;case b:g=(d-a)/h+2;break;case d:g=(a-b)/h+4}g/=6}return{h:g,s:0===e?0:h/e,v:e}},x=function(a,b,d,e){a=[D(w(a).toString(16)),D(w(b).toString(16)),
D(w(d).toString(16))];return!e&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")},u=function(a,b){"string"==typeof a&&(-1!=a.indexOf(".")&&1===F(a))&&(a="100%");var d="string"===typeof a&&-1!=a.indexOf("%"),a=H(b,G(0,F(a)));d&&(a*=b/100);return 1E-6>B.abs(a-b)?1:1<=a?a%b/F(b):a},D=function(a){return 1==a.length?"0"+a:""+a},A=/^[\s,#]+/,J=/\s+$/,h=0,B=Math,w=B.round,H=B.min,G=B.max,W=B.random,F=this.parseFloat;
o.fromRatio=function(a){if("object"==typeof a)for(var b in a)1===a[b]&&(a[b]="1.0");return o(a)};o.equals=function(a,b){return!a||!b?!1:o(a).toRgbString()==o(b).toRgbString()};o.random=function(){return o.fromRatio({r:W(),g:W(),b:W()})};o.desaturate=function(a,b){var d=o(a).toHsl();d.s-=(b||10)/100;d.s=H(1,G(0,d.s));return o(d)};o.saturate=function(a,b){var d=o(a).toHsl();d.s+=(b||10)/100;d.s=H(1,G(0,d.s));return o(d)};o.greyscale=function(a){return o.desaturate(a,100)};o.lighten=function(a,b){var d=
o(a).toHsl();d.l+=(b||10)/100;d.l=H(1,G(0,d.l));return o(d)};o.darken=function(a,b){var d=o(a).toHsl();d.l-=(b||10)/100;d.l=H(1,G(0,d.l));return o(d)};o.complement=function(a){a=o(a).toHsl();a.h=(a.h+0.5)%1;return o(a)};o.triad=function(a){var b=o(a).toHsl(),d=360*b.h;return[o(a),o({h:(d+120)%360,s:b.s,l:b.l}),o({h:(d+240)%360,s:b.s,l:b.l})]};o.tetrad=function(a){var b=o(a).toHsl(),d=360*b.h;return[o(a),o({h:(d+90)%360,s:b.s,l:b.l}),o({h:(d+180)%360,s:b.s,l:b.l}),o({h:(d+270)%360,s:b.s,l:b.l})]};
o.splitcomplement=function(a){var b=o(a).toHsl(),d=360*b.h;return[o(a),o({h:(d+72)%360,s:b.s,l:b.l}),o({h:(d+216)%360,s:b.s,l:b.l})]};o.analogous=function(a,b,d){var b=b||6,d=d||30,e=o(a).toHsl(),d=360/d,a=[o(a)];e.h*=360;for(e.h=(e.h-(d*b>>1)+720)%360;--b;)e.h=(e.h+d)%360,a.push(o(e));return a};o.monochromatic=function(a,b){for(var b=b||6,d=o(a).toHsv(),e=d.h,f=d.s,d=d.v,g=[],h=1/b;b--;)g.push(o({h:e,s:f,v:d})),d=(d+h)%1;return g};o.readable=function(a,b){var d=o(a).toRgb(),e=o(b).toRgb();return 10404<
(e.r-d.r)*(e.r-d.r)+(e.g-d.g)*(e.g-d.g)+(e.b-d.b)*(e.b-d.b)};var E=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",
darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",
ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",
lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",
oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",
slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},q=o,r=E,X={},M;for(M in r)r.hasOwnProperty(M)&&(X[r[M]]=M);var va=q.hexNames=X,L;L={rgb:RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
rgba:RegExp("rgba[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsl:RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsla:RegExp("hsla[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hsv:RegExp("hsv[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};this.tinycolor=o;b(function(){b.fn.spectrum.load&&b.fn.spectrum.processNativeColorInputs()})})(window,jQuery);
define("storymaps/ui/loadingIndicator/LoadingIndicator",[],function(){return function(t,n){var r=null,i=0,s=dojo.byId(t),o=dojo.byId(n);this.init=function(){if(this.spinner!=null)return;var e={lines:16,length:7,width:7,radius:30,rotate:0,color:"#000",speed:1.1,trail:25,shadow:!0,hwaccel:!0,className:"spinner",top:4,left:6};r=(new Spinner(e)).spin(s)},this.start=function(){!r&&this.init(),this.itemCount||(r.spin(s),s.style.visibility="visible"),i=1},this.stop=function(){i--,i<=0&&(r.stop(),s.style.visibility="hidden",i=0),o&&(o.style.visibility="hidden")},this.setMessage=function(e,t){o&&(t&&(o.style.marginTop="-50px"),o.innerHTML=e,o.style.visibility="visible")},this.forceHide=function(){s.style.display="none",o&&(o.style.display="none")}}}),define("storymaps/utils/Helper",["dojo/cookie","dojo/has"],function(e,t){return{isMobile:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/IEMobile/i)},getWebmapsIDs:function(e){var t=esri.urlToObject(document.location.search).query||{},n=t.webmaps;return n&&n.indexOf(",")!=-1?(configOptions.layerIndex=0,n.split(",")):t.webmap&&t.webmap.indexOf(",")!=-1?(configOptions.layerIndex=0,t.webmap.split(",")):t.webmap?(configOptions.layerIndex=0,[t.webmap]):configOptions.webmaps},getAppID:function(e){var t=esri.urlToObject(document.location.search).query||{};return t.appid},getGraphicsLayerByName:function(e,t){var n;for(var r=0;r<e.graphicsLayerIds.length;r++){n=e.getLayer(e.graphicsLayerIds[r]);if(n.name==t)return n}return null},getWebMapExtentFromItem:function(e){if(!e.extent||e.extent.length!=2)return null;var t=esri.geometry.geographicToWebMercator(new esri.geometry.Point(e.extent[0][0],e.extent[0][1])),n=esri.geometry.geographicToWebMercator(new esri.geometry.Point(e.extent[1][0],e.extent[1][1]));return new esri.geometry.Extent({xmax:n.x,xmin:t.x,ymax:n.y,ymin:t.y,spatialReference:{wkid:102100}})},serializeExtentToItem:function(e){if(!e||!e.spatialReference)return null;var t=e.spatialReference.wkid==4326?e:esri.geometry.webMercatorToGeographic(e);return[[Math.round(t.xmin*1e4)/1e4,Math.round(t.ymin*1e4)/1e4],[Math.round(t.xmax*1e4)/1e4,Math.round(t.ymax*1e4)/1e4]]},serializedExtentEquals:function(e,t){return e&&t&&e.length==t.length&&e.length==2&&e[0][0]==t[0][0]&&e[0][1]==t[0][1]&&e[1][0]==t[1][0]&&e[1][1]==t[1][1]},cloneLayer:function(e){return e.url&&e.url.match(/virtualearth\./)?new esri.layers.ArcGISTiledMapServiceLayer("http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"):e instanceof esri.layers.ArcGISTiledMapServiceLayer?new esri.layers.ArcGISTiledMapServiceLayer(e.url):e instanceof esri.layers.ArcGISDynamicMapServiceLayer?new esri.layers.ArcGISDynamicMapServiceLayer(e.url):e.id=="OpenStreetMap"?esri.layers.OpenStreetMapLayer():new esri.layers.ArcGISTiledMapServiceLayer("http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer")},extentToPolygon:function(e){var t=new esri.geometry.Polygon(e.spatialReference);return t.addRing([[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]),t},getFirstLevelWhereExtentFit:function(e,t){var n=t.width,r=t.height,i=t._params.lods;for(var s=i.length-1;s>=0;s--)if(n*t._params.lods[s].resolution>e.getWidth()&&r*t._params.lods[s].resolution>e.getHeight())return s;return-1},getPortalUser:function(){var t=e("esri_auth");return t?JSON.parse(t.replace('"ssl":undefined','"ssl":""')).email:null},getPortalRole:function(){var t=e("esri_auth");return t?JSON.parse(t.replace('"ssl":undefined','"ssl":""')).role:null},prepareWebmapItemForCloning:function(e){dojo.forEach(e.baseMap.baseMapLayers,function(e){delete e.errors,delete e.layerObject,delete e.resourceInfo}),dojo.forEach(e.operationalLayers,function(e){delete e.errors,delete e.layerObject,delete e.resourceInfo,e.featureCollection&&e.featureCollection.layers&&dojo.forEach(e.featureCollection.layers,function(e){delete e.layerObject})})},getWebmapViewerLinkFromSharingURL:function(e){var t=configOptions.sharingurl.split("/sharing/")[0];return t+"/home/webmap/viewer.html"},browserSupportAttachementUsingFileReader:function(){return!!window.FileReader&&!!window.FormData&&!!this.browserSupportCanvas()&&!!window.Blob},browserSupportCanvas:function(){var e=document.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},browserSupportFileReaderBinaryString:function(){if(!window.FileReader)return!1;var e=new window.FileReader;return"readAsArrayBuffer"in e},getBinaryStringFromArrayBuffer:function(e){var t=new Uint8Array(e),n="";for(var r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return n},addCSSRule:function(e){if(t("ie")<=8)return;$("<style>").prop("type","text/css").html(e).appendTo("head")},hex2rgba:function(e,t){var n=e.replace("#","").match(/../g),r=[],i;for(i in n)r.push(parseInt(n[i],16));return r.push(t),"rgba("+r.join()+")"}}}),define("storymaps/swipe/core/Config",[],function(){return{checkConfigFileIsOK:function(){return APPCFG&&APPCFG.COLORS&&APPCFG.COLORS.length==2&&APPCFG.COLOR_SCHEMES&&APPCFG.DEFAULT_SHARING_URL&&APPCFG.MINIMUM_MAP_WIDTH&&APPCFG.TIMEOUT_VIEWER_LOAD&&APPCFG.TIMEOUT_VIEWER_REQUEST&&APPCFG.TIMEOUT_BUILDER_REQUEST&&APPCFG.HEADER_LOGO_URL!=undefined&&APPCFG.HEADER_LOGO_TARGET!=undefined&&APPCFG.HEADER_LINK_TEXT!=undefined&&APPCFG.HEADER_LINK_URL!=undefined&&APPCFG.CORS_SERVER}}}),define("storymaps/swipe/core/WebApplicationData",["dojo/_base/lang"],function(e){var t={},n={values:{}};return{set:function(r){t=e.clone(r);if(!r||!r.values)return;n=r},get:function(){var t=e.clone(n);return t.values.template="Swipe",t.values.templateVersion=version,t},getBlank:function(){return{values:{webmap:n.values.webmap}}},restoreOriginalData:function(){this.set(t)},getWebmap:function(){return n.values.webmap||configOptions.webmap},getWebmaps:function(){return n.values.webmaps?n.values.webmaps:n.values.webmap?[n.values.webmap]:configOptions.webmaps},setWebmaps:function(e){n.values.webmaps=e},getLayers:function(){if(n.values.layers)return n.values.layers;if(!app.maps[0])return null;var e=app.maps[0].layerIds||[];e.concat(app.maps[0].graphicsLayerIds);var t=e[e.length-1-configOptions.layerIndex];return t?[t]:app.maps[0].layerIds[0]?[app.maps[0].layerIds[app.maps[0].layerIds.length-1]]:null},setLayers:function(e){n.values.layers=e},getDataModel:function(){return n.values.dataModel},setDataModel:function(e){n.values.dataModel=e},getPopupTitles:function(){return n.values.popupTitles||configOptions.popupTitles},setPopupTitles:function(e){n.values.popupTitles=e},getPopupColors:function(){return n.values.popupColors||configOptions.popupColors},setPopupColors:function(e){n.values.popupColors=e},getTitle:function(){return n.values.title||configOptions.title},setTitle:function(e){n.values.title=e},getSubtitle:function(){return n.values.subtitle||configOptions.subtitle},setSubtitle:function(e){n.values.subtitle=e},setColors:function(e,t){n.values.colors=e+";"+t},getColors:function(){return n.values.colors?n.values.colors.split(";"):APPCFG.COLORS},setLogoURL:function(e){n.values.logoURL=e},getLogoURL:function(){return n.values.logoURL},setLogoTarget:function(e){n.values.logoTarget=e},getLogoTarget:function(){return n.values.logoTarget},getLayout:function(){return n.values.layout||configOptions.layout},setLayout:function(e){n.values.layout=e},getLegend:function(){return n.values.legend!=null?n.values.legend:configOptions.legend},setLegend:function(e){n.values.legend=e},getDescription:function(){return n.values.description!=null?n.values.description:configOptions.description},setDescription:function(e){n.values.description=e},getBookmarks:function(){return n.values.bookmarks},setBookmarks:function(e){n.values.bookmarks=e},getHeaderLinkText:function(){return n.values.headerLinkText},getHeaderLinkURL:function(){return n.values.headerLinkURL},setHeaderLink:function(e,t){n.values.headerLinkText=e,n.values.headerLinkURL=t},getSidePanelDescription:function(){return n.values.sidePanelDescription||configOptions.sidePanelDescription},setSidePanelDescription:function(e){n.values.sidePanelDescription=e}}}),define("storymaps/swipe/core/Data",["storymaps/swipe/core/WebApplicationData","storymaps/utils/Helper"],function(e,t){return function(){var r=this,i=null,s=null;this.getWebMapItem=function(){return i},this.setWebMapItem=function(e){i=e},this.getAppItem=function(){return s||{}},this.setAppItem=function(e){s=e},this.discardChanges=function(){},this.updateAfterSave=function(){},this.getWebAppData=function(){return e.get()},this.userIsAppOwnerOrAdmin=function(){return t.getPortalRole()=="account_admin"||t.getPortalUser()!=null&&t.getPortalUser()==this.getAppItem().owner||app.portal&&app.portal.getPortalUser()&&app.portal.getPortalUser().username==this.getAppItem().owner}}}),define("storymaps/swipe/core/SwipeHelper",[],function(){return{isOnMobileView:function(){return $("#headerMobile").css("display")=="block"}}}),define("storymaps/ui/inlineFieldEdit/InlineFieldEdit",["dojo/has"],function(e){return function(n,r,i){function o(e,t,n){if(!e||!t||!n)return;typeof r=="function"&&r(),s=n,t.parent().parent().addClass("isEditing"),t.hide(),e.hide(),n.val(t.html()),n.show(),n.select()}function u(t){if(!t||!t.get(0))return;s=null;var n=t.get(0).value,r=t.parent().find(".text_edit_label"),o=t.parent().find(".text_edit_icon"),u=r.parent().first();r.parent().parent().removeClass("isEditing"),r.html(n),r.show(),t.hide(),o.css("display","inline-block"),e("ios")&&document.activeElement.blur(),typeof i=="function"&&i(u,n)}var s=null;$(n+" .text_edit_icon").click(function(){o($(this),$(this).parent().find(".text_edit_label"),$(this).parent().find(".text_edit_input"))}),$(n+" .text_edit_label").click(function(){o($(this).parent().find(".text_edit_icon"),$(this),$(this).parent().find(".text_edit_input"))}),$(n+" .text_edit_input").blur(function(){u($(this))}),e("ios")&&$("body").bind("touchstart",function(e){s&&e.target!=s.get(0)&&u(s)}),$(n+" .text_edit_input").keypress(function(e){var t=e.keyCode?e.keyCode:e.which;t=="13"&&u($(this))})}}),define("storymaps/ui/header/Header",["storymaps/ui/inlineFieldEdit/InlineFieldEdit","dojo/has"],function(e,t){return function(r,i){function o(e){$(r+" #headerMobile .banner").slideDown(e===!0?0:250)}function u(){s||$(r+" #builderPanel",r).fadeOut("fast"),s=!1}function a(e,n){s=!0,setTimeout(function(){s&&$(r+" #builderPanel",r).fadeIn("fast"),s=!1},t("ios")||t("ie")==10?500:100),setTimeout(function(){dojo.publish("HEADER_EDITED",{src:$(e).attr("class"),value:n}),$(r+" #headerMobile .banner ."+$(e).attr("class")).html(n)},t("ios")||t("ie")==10?700:0)}var s=!1;this.init=function(t,n,s,f,l,c,h,p){this.setColor(s),this.setLogoInfo(f,l),$(r+" #headerMobile .title").html(t),$(r+" #headerMobile .subtitle").html(n),i&&($(r).addClass("isBuilder"),t="<p class='text_edit_label'>"+(t||i18n.builder.header.editMe)+"</p>",t+="<div class='text_edit_icon' title='"+i18n.builder.header.templateTitle+"'></div>",t+="<textarea rows='1' class='text_edit_input' type='text'></textarea>",n="<span class='text_edit_label'>"+(n||i18n.builder.header.editMe)+"</span>",n+="<div class='text_edit_icon' title='"+i18n.builder.header.templateSubtitle+"'></div>",n+="<textarea rows='2' class='text_edit_input' type='text'></textarea>"),$(r+" #headerDesktop .title").html(t),$(r+" #headerDesktop .subtitle").html(n),i&&new e(r,u,a),!i&&!n&&($(r+" #headerDesktop .title").css("padding-top",40),$(r+" #headerDesktop .subtitle").css("height",32)),$(window).scroll(this.hideMobileBanner),$(r+" #headerMobile .banner").fastClick(this.hideMobileBanner),$(".navBar span").fastClick(function(){$(this).hasClass("current")||(location.hash=$(this).data("viewid"))}),c&&($(r+" .switchBuilder").fastClick(this.switchToBuilder),$(r+" .switchBuilder").show()),o(!0),this.setTopRightLink(h,p),$(r).css("display","block")},this.resize=function(e){$(r+" #headerDesktop .textArea").width(e-$(r+" #headerDesktop .rightArea").outerWidth()-35)},this.hideMobileBanner=function(e){$(r+" #headerMobile .banner").slideUp(e===!0?0:250),$(r+" #headerMobile").removeClass("firstDisplay")},this.mobileHeaderIsInFirstState=function(){return $(r+" #headerMobile").hasClass("firstDisplay")},this.setColor=function(e){$(r+" #headerDesktop").css("background-color",e),$(r+" #headerMobile").css("background-color",e),$(r+" #builderPanel").css("background-color",e)},this.setLogoInfo=function(e,t){!e||e=="NO_LOGO"?$(r+" .logo img").hide():($(r+" .logo img").attr("src",e),t?($(r+" .logo img").closest("a").css("cursor","pointer"),$(r+" .logo img").closest("a").attr("href",t)):$(r+" .logo img").closest("a").css("cursor","default"),$(r+" .logo img").show())},this.setTopRightLink=function(e,t){t?$(r+" .social .msLink").html(e?'<a href="'+t+'" target="_blank">'+e+"</a>":""):e?$(r+" .social .msLink").html("<span>"+e+"</a>"):$(r+" .social .msLink").html("")},this.switchToBuilder=function(){document.location.search.match(/appid/)?document.location=document.location.protocol+"//"+document.location.host+document.location.pathname+document.location.search+"&edit"+document.location.hash:document.location.search.slice(-1)=="?"?document.location=document.location.protocol+"//"+document.location.host+document.location.pathname+"edit"+document.location.hash:document.location=document.location.protocol+"//"+document.location.host+document.location.pathname+"?edit"+document.location.hash},this.initLocalization=function(){$(r+" #closeHeaderMobile").html(i18n.viewer.mobileView.hideIntro),$(r+" #leftViewLink").html(i18n.viewer.mobileView.navLeft),$(r+" #mapViewLink").html(i18n.viewer.mobileView.navMap),$(r+" #rightViewLink").html(i18n.viewer.mobileView.navRight),$(r+" .msLink").html(i18n.viewer.desktopView.storymapsText),$(r+" .switchBuilder").html('<div><img src="resources/icons/builder-edit-fields.png" /></div>'+i18n.viewer.desktopView.builderButton)}}}),define("storymaps/ui/mapCommand/MapCommand",["dojo/has"],function(e){return function(n,r,i){function o(){navigator.geolocation.getCurrentPosition(function(e){i(!0,new esri.geometry.Point(e.coords.longitude,e.coords.latitude),e)},u,{timeout:2e3})}function u(e){i(!1,e)}var s=$('<div class="esriSimpleSliderIncrementButton"><img style="vertical-align: -2px;" src="resources/icons/mapcommand-home.png"></div>');s.fastClick(function(){r&&typeof r=="function"?r(n._params.extent):n.setExtent(n._params.extent)}),$(n.container).find(".esriSimpleSlider div:nth-child(1)").after(s),navigator&&navigator.geolocation&&i&&typeof i=="function"&&($(".esriSimpleSlider",n.container).after('<div id="mainMap_zoom_location" class="esriSimpleSlider esriSimpleSliderVertical mapCommandLocation"><div><img src="resources/icons/mapcommand-location.png"></div></div>'),$("#mainMap_zoom_location div",n.container).fastClick(o)),e("touch")&&$(".esriSimpleSlider",n.container).addClass("touch"),this.setMobile=function(e){$(".esriSimpleSlider",n.container).toggleClass("touch",e)},this.destroy=function(){$(n.container).find(".esriSimpleSliderIncrementButton").remove(),$(n.container).find("#mainMap_zoom_location").remove()}}}),define("storymaps/core/Core",["esri/map","esri/arcgis/Portal","esri/arcgis/utils","esri/dijit/Legend","storymaps/utils/Helper","storymaps/swipe/core/Config","storymaps/swipe/core/Data","storymaps/swipe/core/WebApplicationData","storymaps/swipe/core/SwipeHelper","storymaps/ui/header/Header","storymaps/ui/mapCommand/MapCommand","dojo/has"],function(e,t,n,r,i,s,o,u,a,f,l,c){function d(e,t){console.log("swipe.core.Core - init"),p=e,q();var n=t!=null&&i.getAppID(R())!=null;if(!s.checkConfigFileIsOK()){C("invalidConfig");return}app={map:null,maps:[],mapResponse:[],currentMapIndex:-1,portal:null,mode:"TWO_LAYERS",layout:"swipe",data:new o,builder:t,isInBuilderMode:n,header:new f("#header",n),loadingTimeout:null,initInProgress:!1,config:{}};if(!p.init(this))return;R()||dojo.connect(esri.id,"onDialogCreate",function(){dojo.connect(esri.id.dialog,"onShow",function(){esri.id.dialog.txtUser_.set("value","guest"),esri.id.dialog.txtPwd_.set("value","guest"),esri.id.dialog.btnSubmit_.onClick()})}),j(),configOptions.sharingurl?configOptions.sharingurl=location.protocol+configOptions.sharingurl:configOptions.sharingurl=location.protocol+"//"+location.host+"/sharing/content/items",commonConfig&&commonConfig.helperServices&&commonConfig.helperServices.geometry&&(esri.config.defaults.geometryService=new esri.tasks.GeometryService(commonConfig.helperServices.geometry.url)),configOptions.proxyurl=configOptions.proxyurl?location.protocol+configOptions.proxyurl:location.protocol+"//"+location.host+"/sharing/proxy",esri.arcgis.utils.arcgisUrl=configOptions.sharingurl,esri.config.defaults.io.proxyUrl=configOptions.proxyurl,esri.id&&esri.id.setProtocolErrorHandler(function(){return!0}),n&&APPCFG.CORS_SERVER&&$.each(APPCFG.CORS_SERVER,function(e,t){esriConfig.defaults.io.corsEnabledServers.push(t)}),n?esri.config.defaults.io.timeout=APPCFG.TIMEOUT_BUILDER_REQUEST:esri.config.defaults.io.timeout=APPCFG.TIMEOUT_VIEWER_REQUEST,$(document).ready(dojo.hitch(this,v))}function v(){console.log("swipe.core.Core - initStep2"),app.header.initLocalization(),p.initLocalization(),$(window).resize(O),$("form").bind("keydown",function(e){if(e.keyCode==13)return!1});var e=i.getAppID(R()),t=i.getWebmapsIDs(R()).slice(0,2);u.setWebmaps(t),dojo.connect(esri.id,"onDialogCreate",M),dojo.subscribe("CORE_UPDATE_UI",A),dojo.subscribe("CORE_RESIZE",O),loadingIndicator.setMessage(i18n.viewer.loading.step2),e?m(e):t&&t.length==2?w(t):t.length||webmapId?E(t[0]):C("invalidConfigNoWebmap")}function m(e){console.log("swipe.core.Core - loadWebMappingApp - appId:",e);var t=esri.urlToObject(document.location.search).query||{},n=t.forceLogin!=undefined;n||!R()||R()&&i.getPortalUser()||R()&&app.isInBuilderMode&&!i.getPortalUser()?b().then(function(){g(e)},function(){C("notAuthorized")}):g(e)}function g(e){var t=esri.request({url:configOptions.sharingurl+"/"+e+"",content:{f:"json"},callbackParamName:"callback",load:function(e){app.data.setAppItem(e)},error:function(){}}),n=esri.request({url:configOptions.sharingurl+"/"+e+"/data",content:{f:"json"},callbackParamName:"callback",load:function(e){u.set(e)},error:function(){}}),r=new dojo.DeferredList([t,n]);r.then(function(){if(!n.results||!n.results[0]||!t.results||!t.results[0]){t.results&&t.results[1]&&t.results[1]&&t.results[1].httpCode==403?C("notAuthorized"):C("invalidApp");return}var e=u.getWebmaps();if(app.isInBuilderMode&&!app.data.userIsAppOwnerOrAdmin()){C("notAuthorized");return}e&&e.length==2&&u.getDataModel()=="TWO_WEBMAPS"?w(e):e&&u.getDataModel()&&u.getLayers()!=null?E(e[0]):e&&app.isInBuilderMode?E(e[0]):e&&!app.isInBuilderMode?app.data.userIsAppOwnerOrAdmin()?(loadingIndicator.setMessage(i18n.viewer.loading.loadBuilder),setTimeout(function(){app.header.switchToBuilder()},1200)):C("noLayerView"):C("invalidApp")})}function y(){if($("#initPopup").is(":visible"))return;F(),app.initInProgress=!0,C("initMobile",null,!0),O();var e=app.builder.presentInitPopup();e.then(function(){app.initInProgress=!1,D();var e=u.getWebmaps();e&&e.length==2?w(u.getWebmaps()):E(e[0])},function(){k("noLayerView"),$("#loadingOverlay").css("top","0px"),$("#header").css("display","inherit"),$("#fatalError").css("display","block"),app.initInProgress=!1,O()})}function b(){var e=new dojo.Deferred,t=configOptions.sharingurl.split("/sharing/")[0];return app.portal=new esri.arcgis.Portal(t),dojo.connect(esri.id,"onDialogCreate",_),app.portal.signIn().then(function(){e.resolve()},function(t){e.reject()}),e}function w(e){u.getWebmaps().length==2&&(app.mode="TWO_WEBMAPS");var t=[];$.each(e,function(e,n){t.push(E(n,e))}),(new dojo.DeferredList(t)).then(function(){setTimeout(p.webmapLoaded,0)})}function E(e,t){console.log("swipe.core.Core - loadWebMap - webmapId:",e,t),t=t||0;var n="mainMap"+t;t==1&&u.getLayout()=="spyglass"&&app.mode=="TWO_WEBMAPS"&&(n="lensMapNode");var r=esri.arcgis.utils.createMap(e,n,{mapOptions:{slider:n!="lensMapNode",autoResize:!1,infoWindow:app.popup[t],showAttribution:n!="lensMapNode"},ignorePopups:!1,bingMapsKey:commonConfig.bingMapsKey}),i=new dojo.Deferred;return r.addCallback(function(e){setTimeout(function(){x(e,i)},0)}),r.addErrback(function(){C("createMap")}),i}function S(e){return $.inArray(e,i.getWebmapsIDs(R()))}function x(e,t){console.log("swipe.core.Core - webMapInitCallback");if(app.mode=="TWO_WEBMAPS"){var n=$.inArray(e.itemInfo.item.id,u.getWebmaps());app.mapResponse[n]=e,app.maps[n]=e.map,n==0?(app.data.setWebMapItem(e.itemInfo),app.map=e.map):t.resolve();if(u.getLegend()||configOptions.legend)if(app.mode=="TWO_WEBMAPS"&&u.getLayout()=="swipe")if(n==0){var s=new r({map:app.maps[0],layerInfos:esri.arcgis.utils.getLegendLayers(e)},"legend1");s.startup()}else{var o=new r({map:app.maps[1],layerInfos:esri.arcgis.utils.getLegendLayers(e)},"legend0");o.startup()}else if(n==0){var o=new r({map:app.maps[0],layerInfos:esri.arcgis.utils.getLegendLayers(e)},"legend0");o.startup()}else{var s=new r({map:app.maps[1],layerInfos:esri.arcgis.utils.getLegendLayers(e)},"legend1");s.startup()}}else{app.maps=[e.map],app.data.setWebMapItem(e.itemInfo);var a=app.maps[0].getLayer(u.getLayers()[0])||{},f=a.id,l=(app.maps[0].layerIds||[]).concat(app.maps[0].graphicsLayerIds),c=$.grep(l,function(e){return e==f});c.length||(f=(app.maps[0].layerIds||[]).concat(app.maps[0].graphicsLayerIds).slice(-1),a=app.maps[0].getLayer(f),u.setLayers(f));if(u.getLegend()||configOptions.legend){var h=a&&a.arcgisProps&&a.arcgisProps.title?a.arcgisProps.title:a&&a.name?a.name:a,d=esri.arcgis.utils.getLegendLayers(e),v=$.grep(d,function(e){return e.title!=h}),m=$.grep(d,function(e){return e.title==h}),o=new r({map:app.maps[0],layerInfos:v},"legend0");o.startup();var s=new r({map:app.maps[0],layerInfos:m},"legend1");s.startup()}}var g=configOptions.title||u.getTitle()||e.itemInfo.item.title,b=configOptions.subtitle||u.getSubtitle()||e.itemInfo.item.snippet;L(u.getLayout()||configOptions.layout),O();var w=u.getColors(),E=u.getLogoURL()||APPCFG.HEADER_LOGO_URL,S=E==APPCFG.HEADER_LOGO_URL?APPCFG.HEADER_LOGO_TARGET:u.getLogoTarget();app.header.init(g,b,w[0],E,S,!app.isInBuilderMode&&i.getAppID()&&(!R()||app.data.userIsAppOwnerOrAdmin()),u.getHeaderLinkText()==undefined?APPCFG.HEADER_LINK_TEXT:u.getHeaderLinkText(),u.getHeaderLinkURL()==undefined?APPCFG.HEADER_LINK_URL:u.getHeaderLinkURL()),document.title=$("<div>"+g+"</div>").text();try{t.resolve()}catch(x){}if(app.isInBuilderMode&&u.getWebmaps().length!=2&&!u.getDataModel()){dojo.connect(app.maps[0],"onUpdateEnd",y),setTimeout(y,6e3);return}app.mode=="TWO_LAYERS"&&setTimeout(p.webmapLoaded,0)}function T(){console.log("swipe.core.Core - initMap");var e=0;u.getLayout()=="swipe"&&app.mode=="TWO_WEBMAPS"&&(e=1),new l(app.maps[e],function(){app.maps[0].setExtent(i.getWebMapExtentFromItem(app.data.getWebMapItem().item))},p.zoomToDeviceLocation),O(),location.hash&&(location.hash="map"),window.onhashchange=function(e){if(!(location.hash!=""&&location.hash!="#"||!app.data.getIntroData()))return;H(),location.hash=="#map"?($("#mapViewLink").addClass("current"),B()):p.onHashChange()},p.appInitComplete()}function N(){app.loadingTimeout!=null&&($("#loadingOverlay").fadeOut(),loadingIndicator.stop()),F()}function C(e,t,n){P(),F(),loadingIndicator.stop();if(e=="noLayerView"){loadingIndicator.setMessage(i18n.viewer.errors[e],!0);return}!e=="initMobile"&&loadingIndicator.forceHide(),$("#fatalError .error-msg").html(i18n.viewer.errors[e]),n||$("#fatalError").show()}function k(e){$("#fatalError .error-msg").html(i18n.viewer.errors[e])}function L(e){$("body").toggleClass("modern-layout",e=="integrated")}function A(){console.log("swipe.core.Core - updateUI");var e=u.getColors();L(u.getLayout()),app.header.setColor(e[0]);var t=u.getLogoURL()||APPCFG.HEADER_LOGO_URL;app.header.setLogoInfo(t,t==APPCFG.HEADER_LOGO_URL?APPCFG.HEADER_LOGO_TARGET:u.getLogoTarget()),app.header.setTopRightLink(u.getHeaderLinkText()==undefined?APPCFG.HEADER_LINK_TEXT:u.getHeaderLinkText(),u.getHeaderLinkURL()==undefined?APPCFG.HEADER_LINK_URL:u.getHeaderLinkURL()),p.updateUI(),O()}function O(){var e=a.isOnMobileView(),t=$("#mapViewLink").hasClass("current");e?$("body").addClass("mobile-view"):$("body").removeClass("mobile-view");var n=$("body").width(),r=$("body").height(),i=$("#header").height(),s=r-i;app.header.resize(n),p.resize({isMobileView:e,isOnMobileMapView:t,width:n,height:s}),$("#contentPanel").height(s),$("#contentPanel").width(n),$("#mapPanel").width(n-$("#picturePanel").width()),app.isInBuilderMode&&app.builder.resize({isMobileView:e});if(!e||e&&t)try{app.maps[0]?app.maps[0].resize(!0):app.maps[1]&&app.mode!="TWO_WEBMAPS"&&app.layout!="spyglass"&&app.maps[1].resize(!0)}catch(o){}e?$("#mainMap .esriControlsBR > div").first().removeClass("logo-med").addClass("logo-sm"):$("#mainMap .esriControlsBR > div").first().removeClass("logo-sm").addClass("logo-med")}function M(){$(".esriSignInDialog td label").siblings("br").css("display","none"),$(".esriSignInDialog .dijitDialogPaneContentArea div:nth(1)").css("display","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("padding","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("margin-bottom","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("border","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-webkit-border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-moz-border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-webkit-box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-moz-box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitValidationContainer").css("display","none"),$(".esriSignInDialog .esriErrorMsg").css("margin-top","10px"),$(".esriSignInDialog").find(".dijitDialogTitleBar").find(".dijitDialogTitle").first().html("Authentication is required"),$(".esriSignInDialog").find(".dijitDialogPaneContentArea:first-child").find(":first-child").first().css("display","none"),$(".esriSignInDialog").find(".dijitDialogPaneContentArea:first-child").find(":first-child").first().after("<div id='dijitDialogPaneContentAreaLoginText'>Please sign in with an account on <a href='http://"+esri.id._arcgisUrl+"' title='"+esri.id._arcgisUrl+"' target='_blank'>"+esri.id._arcgisUrl+"</a> to access the application.</div>")}function _(){$(".esriSignInDialog").find("#dijitDialogPaneContentAreaLoginText").css("display","none"),$(".esriSignInDialog").find(".dijitDialogPaneContentArea:first-child").find(":first-child").first().after("<div id='dijitDialogPaneContentAreaAtlasLoginText'>Please sign in with an account on <a href='http://"+esri.id._arcgisUrl+"' title='"+esri.id._arcgisUrl+"' target='_blank'>"+esri.id._arcgisUrl+"</a> to configure this application.</div>")}function D(){dojo.publish("BUILDER_INCREMENT_COUNTER"),dijit.byId("legend0")&&dijit.byId("legend0").destroy(),dijit.byId("legend1")&&dijit.byId("legend1").destroy(),$("#legendPanel").html('<div id="legend0"></div><div id="legend1"></div>'),app.maps[0]&&(app.maps[0].destroy(),app.maps[0]=null),app.maps[1]&&(app.maps[1].destroy(),app.maps[1]=null),$("#header").css("display","inherit"),$("#footer").css("display","inherit"),$("#fatalError").css("display","none"),$("#loadingOverlay").css("top","0px"),loadingIndicator.start(),loadingIndicator.setMessage(i18n.viewer.loading.step2),j(),O()}function P(){$("#header").hide(),$(".mobileView").hide(),$("#footer").hide(),$(".modal").hide()}function H(){$(".mobileView").hide(),$("#footerMobile").hide(),$(".navBar span").removeClass("current")}function B(){$("#contentPanel").show(),$("#footerMobile").show(),$("#mapPanel").show(),O()}function j(){app.loadingTimeout=setTimeout(I,APPCFG.TIMEOUT_VIEWER_LOAD)}function F(){typeof app!="undefined"&&app.loadingTimeout&&(clearTimeout(app.loadingTimeout),app.loadingTimeout=null)}function I(){if(esri.id&&esri.id.dialog&&esri.id.dialog._alreadyInitialized&&!esri.id.loadingTimeoutAlreadyFired){clearTimeout(app.loadingTimeout),j(),esri.id._busy||(esri.id.loadingTimeoutAlreadyFired=!0);return}loadingIndicator.stop(),loadingIndicator.setMessage(i18n.viewer.loading.fail+'<br /><button type="button" class="btn btn-medium btn-info" style="margin-top: 5px;" onclick="document.location.reload()">'+i18n.viewer.loading.failButton+"</button>",!0),app.map&&app.map.destroy()}function q(){dojo.query("#fatalError .error-title")[0].innerHTML=i18n.viewer.errors.boxTitle}function R(){return h.environment!=["TPL","ENV","DEV"].join("_")}var h={environment:"TPL_ENV_PRODUCTION"},p=null;return{init:d,isProd:R,appInitComplete:T,displayApp:N,openInitPopup:y,initError:C}}),define("storymaps/swipe/ui/desktop/SwipeSidePanel",["storymaps/ui/inlineFieldEdit/InlineFieldEdit","storymaps/swipe/core/WebApplicationData","esri/dijit/Legend"],function(e,t,n){return function(n,r){function v(){$("#legendView1").empty(),$("#legendView2").empty(),$("#legendView1").append($("#legend0").children().clone()),$("#legendView2").append($("#legend1").children().clone())}function m(e,t,n){var u=$("#legendTitle").height();$("#legendTitle").css("line-height",u+"px");var a=i.find("div");t==1?r?nicEditors.findEditor("descriptionArea").setContent(e):a.html(e):(i.css("display","none"),s.height("55%"));if(n==1)var f=setTimeout(v,1e3);else s.css("display","none"),o.css("display","none"),$("#legendView .noData").css("display","block");if(p==0&&h==0){$("#sidePanelTabImg").css("display","none");return}app.mode=="TWO_WEBMAPS"&&l=="spyglass"?$("#mainMap1_zoom_slider").css("display","none"):app.mode=="TWO_WEBMAPS"&&l=="swipe"&&$("#mainMap0_zoom_slider").css("display","none")}function g(){if($("body").hasClass("mobile-view"))return;y()=="open"?b():w()}function y(){return $("#sidePanelTabImg").hasClass("open")?"open":"close"}function b(){if($("#swipeSidePanel").css("left")<0)return;E("in"),dojo.removeClass("sidePanelTabImg","closeImg"),$("#sidePanelTabImg").hasClass("open")&&$("#sidePanelTabImg").removeClass("open")}function w(){E("out"),dojo.addClass("sidePanelTabImg","closeImg"),$("#sidePanelTabImg").hasClass("open")||$("#sidePanelTabImg").addClass("open")}function E(e){$("#swipeSidePanel").animate({left:e=="in"?-350:0,queue:!1},750),$("#mainMap_zoom_location").animate({left:e=="in"?20:370,queue:!1},750),app.mode=="TWO_LAYERS"||l=="spyglass"?$("#mainMap0_zoom_slider").animate({left:e=="in"?20:370,queue:!1},750):($("#mainMap0_zoom_slider").css("display","none"),$("#mainMap1_zoom_slider").animate({left:e=="in"?20:370,queue:!1},750))}function S(e,t){i.css("background-color",e),i.find("#description").css("background-color",e),s.css("background-color",e),o.css("background-color",t)}var i=n.find("#descriptionPanel"),s=n.find("#legendPanel"),o=n.find("#legendTitle"),u="",a=null,f=null,l=null,c=null,h=null,p=null,d=this;this.init=function(e,n,i,s,a,y){f=y,l=t.getLayout(),c=t.getDataModel(),h=s,p=a;if(r&&s){var b=(new nicEditor({buttonList:["fontSize","fontFamily","bold","italic","underline","left","center","right","ul","html"]})).panelInstance("descriptionArea");u=e,b.addEvent("blur",function(){if(u==nicEditors.findEditor("descriptionArea").getContent())return;t.setSidePanelDescription(nicEditors.findEditor("descriptionArea").getContent()),u=nicEditors.findEditor("descriptionArea").getContent(),dojo.publish("BUILDER_INCREMENT_COUNTER")}),$(".nicEdit-main").parent().css("width","342px"),$(".nicEdit-main").css("width","330px"),$(".nicEdit-main").parent().css("border","none")}S(n,i),m(e,s,a),dojo.connect(dojo.byId("sidePanelTabImg"),"onclick",g),o.html(i18n.swipe.swipeSidePanel.legendTitle),dojo.connect(app.maps[0],"onUpdateEnd",v),$(window).resize(function(){var e=$("#legendTitle").height();$("#legendTitle").css("line-height",e+"px"),d.resize()})},this.update=function(e,t){S(e,t)},this.resize=function(e,t){n.height(t-1),$(".nicEdit-panelContain").parent().css("width","348px")}}}),define("storymaps/swipe/ui/mobile/MobileSwipeView",[],function(){return function(t,n){function i(e){var t=2;if(e.length!=t)return;r=new SwipeView(n,{numberOfPages:t,loop:!1});for(var i=0;i<t;i++){var s=e[i];$(r.masterPages[i+1]).html(s)}}function s(e){r.onTouchStart(function(e){}),r.onFlip(function(e){r.currentMasterPage==1?$(t).find(".swiper").removeClass("left").addClass("right"):$(t).find(".swiper").removeClass("right").addClass("left")}),r.onMoveOut(function(){})}function o(e){$(t).css("background-color",e)}var r=null;this.init=function(e,t){o(t),i(e),s(e)},this.update=function(e){o(e)},this.show=function(){$(t).show(),r.refreshSize(),r.goToPage(0)}}}),define("storymaps/swipe/ui/MapSwipe",["esri/widgets","dijit/registry","dojo/has"],function(e,t,n){return function(r){function p(){$(".esriPopup .titleButton").css("display","none"),$(".esriPopup .title").css("display","none"),$(".esriPopup .title").after('<div class="swipeTitle"></div>')}function d(){$("#resizeWrapper").css("width","0%"),$("#mainMap1").css("width","0%");var e=dojo.query(r+" #sliderDiv"),t=new dojo.dnd.move.parentConstrainedMoveable(e[0],{area:"mainMap0",within:!0});n("touch")&&$(".moveable").addClass("touch"),t.node.style.height=i[0].height+"px",t.node.style.top="0px",t.node.style.left=$("#mainMap0").width()/2+a+"px",$("#swipeImg").css("left",$("#mainMap0").width()/2-34+a+"px"),$("#swipeImg").css("top",$("#mainMap0").height()/2-26+"px"),$("#swipeImg").show(),v(t),app.maps[0].reposition(),app.maps[0].resize()}function v(e){var t=null,n=e.node.offsetLeft;g(n),dojo.connect(app.popup[0],"onSetFeatures",function(){y(t)}),dojo.connect(i[0],"onClick",function(e){t=e,$("#swipeImg").fadeOut()}),dojo.connect(e,"onMove",function(r){var s=parseInt(e.node.offsetLeft);if(s<=0||s>=i[0].width)return;n=s,y(t),g(n)}),$(window).resize(function(){e.node.style.height=i[0].height+"px"}),dojo.connect(e,"onMoveStart",function(e){$("#swipeImg").fadeOut()}),dojo.connect(e,"onMoveStop",function(e){}),dojo.connect(i[0],"onPan",function(n){y(t),g(e.node.offsetLeft)});var r=app.maps[0].getLayer(s[0]).type=="Feature Layer";if(r){dojo.connect(i[0],"onPanEnd",function(t){g(e.node.offsetLeft)});var o=app.maps[0].getLayer(s[0]);if(o._collection)dojo.connect(app.maps[0],"onZoomEnd",g(e.node.offsetLeft));else{var u=o._params&&o._params.opacity?o._params.opacity:1,a=!1;dojo.connect(app.maps[0],"onZoomStart",function(){a=!0}),dojo.connect(app.maps[0].getLayer(s[0]),"onUpdateStart",function(){a&&app.maps[0].getLayer(s[0]).setOpacity(0)}),dojo.connect(app.maps[0].getLayer(s[0]),"onUpdateEnd",function(){a&&app.maps[0].getLayer(s[0]).setOpacity(u),g(e.node.offsetLeft),a=!1})}}i[0].navigationMode==="css-transforms"&&dojo.connect(i[0],"onPan",function(t){g(e.node.offsetLeft)})}function m(e){var t=app.maps[0].toMap(new esri.geometry.Point(0,app.maps[0].height,app.maps[0].spatialReference)),n=app.maps[0].toMap(new esri.geometry.Point(e,0,app.maps[0].spatialReference)),r=new esri.geometry.Extent(t.x,t.y,n.x,n.y,app.maps[0].spatialReference);$.each(i[0].getLayer(s[0]).graphics,function(e,t){var n=t.geometry.type=="point"?t.geometry:t.geometry.getExtent().getCenter();r.contains(n)?t.show():t.hide()})}function g(e){var t=dojo.byId("sliderDiv"),n=i[0].getLayer(s[0])._div;if(t!=null){offset_left=parseFloat(t.style.left),offset_top=parseFloat(t.style.top);var r,o,u,a;offset_left>0?(r=parseFloat(e)-Math.abs(offset_left),o=offset_left):offset_left<0?(o=0,r=parseFloat(e)+Math.abs(offset_left)):(o=0,r=parseFloat(e)),offset_top>0?(u=-offset_top,a=i[0].height-offset_top):offset_top<0?(u=0,a=i[0].height+Math.abs(offset_top)):(u=0,a=i[0].height);var f=app.maps[0].getLayer(s[0]).type=="Feature Layer";if(f){m(o);return}var l=0,c=0;if(i[0].navigationMode==="css-transforms"){var h="";dojo.isWebKit?h="-webkit-":dojo.isFF?h="-moz-":dojo.isIE?h="-ms-":dojo.isOpera&&(h="-o-");var p=n.style.getPropertyValue(h+"transform");if(p){p.toLowerCase().indexOf("translate3d")!==-1?p=p.replace("translate3d(","").replace(")","").replace(/px/ig,"").replace(/\s/i,"").split(","):p.toLowerCase().indexOf("translate")!==-1&&(p=p.replace("translate(","").replace(")","").replace(/px/ig,"").replace(/\s/i,"").split(","));try{l=parseFloat(p[0]),c=parseFloat(p[1])}catch(d){alert("Error cannot continue"),console.error(d)}o-=l,r-=l,u-=c,a-=c}}var v="rect("+u+"px, "+o+"px, "+a+"px, "+r+"px)";n.style.clip=v}}function y(e){if(!e||!app.popup[0])return;var t=app.maps[0].getLayer(s[0]).type=="Feature Layer",n=parseInt(dojo.byId("sliderDiv").style.left.split("px",1)),r=e.pageX<n,i=s[0]+(t?"":"_1"),a=r?1:0;f=e;if(!app.popup[0].features)return;var l=!1;for(var c=0;c<app.popup[0].features.length;c++){var h=app.popup[0].features[c],p=h._graphicsLayer.id;if(r&&p==i||!r&&p!=i){l=!0,$(".esriPopup .titlePane").css("backgroundColor","#"+o[a]),$(".esriPopup .swipeTitle").html(u[a]||"&nbsp;"),$(".esriPopup .swipeTitle").append('<div id="popup0" class="closePopup"><a ><i class="icon-remove icon-white"></i></a></div>'),dojo.connect(dojo.byId("popup0"),"onclick",function(){$(".esriPopup").css("visibility","hidden")}),app.popup[0].select(c);var h=app.popup[0].getSelectedFeature();break}}l||($(".esriPopup .titlePane").css("backgroundColor","#"+o[0]),$(".esriPopup .swipeTitle").html(u[0]||"&nbsp;"),$(".esriPopup .swipeTitle").append('<div id="popup0" class="closePopup"><a ><i class="icon-remove icon-white"></i></a></div>'));var d=!1,v=!1;for(var c=0;c<app.popup[0].features.length;c++){var h=app.popup[0].features[c],p=h._graphicsLayer.id;!d&&p!=i&&(d=!0,C(0,h)),!v&&p==i&&(v=!0,C(1,h));if(d&&v)break}}function b(){$("#resizeWrapper").resizable({handles:"e",containement:"parent",minWidth:2}),n("touch")&&$(".ui-resizable-e").addClass("touch"),$("#mainMap1").css("width","100%"),$(".esriPopup").css("zIndex","99");var e=null;w(),dojo.connect(i[0],"onClick",function(t,n){app.popup[0].hide(),app.popup[1].hide(),$("#swipeImg1").fadeOut(),e=t,h="open";if(app.popup[0].isShowing==1)return;if(n=="other")return;i[1].onClick(t,"other")}),dojo.connect(app.popup[0],"onSetFeatures",function(){N(e,0)}),dojo.connect(i[1],"onClick",function(t,n){app.popup[0].hide(),app.popup[1].hide(),e=t,h="open";if(app.popup[1].isShowing==1)return;app.popup[1].deferreds&&app.popup[1].deferreds[0].then(function(){N(e,1)});if(n=="other")return;i[0].onClick(t,"other")}),dojo.connect(i[0],"onPanEnd",function(e){var t={};if(app.popup[0].isShowing==1)t.x=app.popup[0].domNode.offsetLeft;else{if(app.popup[1].isShowing!=1)return;t.x=app.popup[1].domNode.offsetLeft}N(t)}),dojo.connect(i[1],"onPanEnd",function(e){var t={};if(app.popup[0].isShowing==1)t.x=app.popup[0].domNode.offsetLeft;else{if(app.popup[1].isShowing!=1)return;t.x=app.popup[1].domNode.offsetLeft}N(t)}),$(window).resize(function(){var e=null;app.popup[0].isShowing&&(e=app.popup[0].domNode.offsetLeft),app.popup[1].isShowing&&(e=app.popup[1].domNode.offsetLeft),$("#swipeImg1").fadeOut(),E({x:e})});var t=$("#mainMap0").find(".esriPopup");t.after($("#mainMap1").find(".esriPopup")),dojo.style(dojo.byId("sliderDiv"),"display","none"),T()}function w(){$(".esriPopup .titlePane").eq(0).css("backgroundColor","#"+o[0]),$(".esriPopup .swipeTitle").eq(0).html(u[0]||"&nbsp;"),$(".esriPopup .swipeTitle").eq(0).append('<div id="closePopup0" class="closePopup"><a ><i class="icon-remove icon-white"></i></a></div>'),dojo.connect(dojo.byId("closePopup0"),"onclick",function(){h="closed",$(".esriPopup").css("visibility","hidden")}),$(".esriPopup .titlePane").eq(1).css("backgroundColor","#"+o[1]),$(".esriPopup .swipeTitle").eq(1).html(u[1]||"&nbsp;"),$(".esriPopup .swipeTitle").eq(1).append('<div id="closePopup1" class="closePopup"><a ><i class="icon-remove icon-white"></i></a></div>'),dojo.connect(dojo.byId("closePopup1"),"onclick",function(){h="closed",$(".esriPopup").css("visibility","hidden")})}function E(e){$("#mainMap1").css("width",dojo.byId("mainMap0").clientWidth),$("#mainMap1").css("height",dojo.byId("mainMap0").clientHeight),i[0]&&i[0].resize(),i[1]&&i[1].resize(),e.x&&N(e)}function S(){if(l==1){l=!1;return}l=!0,i[1].setExtent(i[0].extent)}function x(){if(l==1){l=!1;return}l=!0,i[0].setExtent(i[1].extent)}function T(){$("#mainMap1").css("width",dojo.byId("mainMap0").clientWidth),$("#resizeWrapper").css("width",$("#mainMap0").width()/2+a),$("#swipeImg1").css("left",$("#mainMap0").width()/2-44+a+"px"),$("#swipeImg1").css("top",$("#mainMap0").height()/2-26+"px"),$("#swipeImg1").show(),app.maps[1].resize(!0),i[1].setExtent(i[0].extent).then(function(){dojo.connect(i[0],"onExtentChange",S),dojo.connect(i[1],"onExtentChange",x),l=!1})}function N(e,t){if(!e||h=="closed")return;c=e.y?e.mapPoint:c;var n=e.x>$("#resizeWrapper").width()?0:1;app.popup[n].show(c),app.popup[n?0:1].hide(),t!=null&&C(t,(app.popup[t].features||[null])[0])}function C(e,n){n?t.byId("infoView-mobile"+e).set("content",n.getContent()):t.byId("infoView-mobile"+e).set("content",'<div class="noDataMap"><div class="title">'+i18n.swipe.mobileData.noDataMap+"</div></div>"),$("#infoWindowView .noData").hide(),$(".swiper.infoWindowView").css("display","block")}var i=null,s=null,o=null,u=null,a=null,f=null,l=!0,c=null,h=null;this.init=function(e,t,n,r,f){console.log("MapSwipe init",e,t,n,r),i=e,s=t,o=n,u=r,a=f,$("#infoWindowTabImg").css("display","none"),$("#infoWindow").css("display","none"),p(),i.length==1?d():b()},this.updateSettings=function(e,t){if(!i||i.length==0)return;o=e,u=t,i.length==1&&(f?y(f):w())}}}),define("storymaps/swipe/ui/SpyGlass",["dojo/_base/declare","dojo/_base/connect","dojo/_base/html","dojo/_base/lang","dojo/dnd/move","dojo/has","dojo/dom","dojo/dom-attr","dojo/dom-style","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/registry"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function v(e,t,n){e?h.byId("infoView-mobile"+t).set("content",e.getContent()):h.byId("infoView-mobile"+t).set("content",'<div class="noDataMap"><div class="title">'+i18n.swipe.mobileData.noDataMap+"</div></div>"),$("#infoWindowView .noData").hide(),$(".swiper.infoWindowView").css("display","block");if(n!=0){$("#infoWindowContent").removeClass("noData");var r=e.getContent();h.byId("infoWindowContent").set("content",r)}}function m(e,t,n){var r=app.popup[e].getSelectedFeature();if(!r){$("#infoWindowTitle").css("backgroundColor","#"+_popupColors[t]),$("#infoWindowTitle").html(_popupTitles[t]||"&nbsp;"),$("#infoWindowContent").html(i18n.swipe.mobileData.noPopup);return}v(r,e,n),n!=0&&($("#infoWindowTitle").css("backgroundColor","#"+_popupColors[t]),$("#infoWindowTitle").html(_popupTitles[t]||"&nbsp;"),p.getInfoWindowState()=="close"&&!p._popupClosedByUser&&p.openInfoWindow())}var p=null,d=e([f,l,c],{templateString:"<div></div>",_lensMap:null,_started:!1,_clickPoint:null,_popupColors:null,_popupTitles:null,_layers:null,_displayedPopupIndex:null,_spyExtent:null,_rightVal:null,_leftVal:null,_topVal:null,_bottomVal:null,_isGraphics:!1,_moving:!1,_popupClosedByUser:!1,_clickOnLens:!1,startup:function(e,o,u,f,l,c,h){p=this,this.lensWin="lensWin",$("#lensWin").css("display","block"),dojo.style(dojo.byId("sliderDiv"),"display","none"),$("#mapPanel").css("overflowX","hidden"),$("#infoWindowTitle").html(i18n.swipe.infoWindow.noFeature),$("#infoWindowContent").html('<div class="noFeature">'+i18n.swipe.infoWindow.noFeatureExplain+"</div>"),_layers=c,_popupColors=u,_popupTitles=f;var d=function(){var e=n.coords("mainMap0"),t={};return t.t=0,t.l=0,t.w=e.l+e.w,t.h=e.h+e.t,t},v=function(e){setTimeout(function(){if(p._moving){p._moving=!1;return}var t=e.pageX,n=e.pageY-$("#header").height();e.x=t,e.y=n,e.screenPoint={x:t,y:n},e.type="click",e.fromLens=!0,e.mapPoint=app.maps[0].toMap(new esri.geometry.Point(t,n,app.maps[0].spatialReference)),app.maps[0].onClick(e,"other"),p._moving=!1},100)},g=$("#lensTool"),y=!1,b=0,w=0,E=0,S=0;g.on("touchstart mousedown",function(e){e.preventDefault(),E=e.pageX,S=e.pageY,y=!0,setTimeout(function(){b=e.pageX,w=e.pageY,E===b&&!y&&S===w&&v(e.originalEvent)},200)}),g.on("touchend mouseup touchcancel",function(e){e.preventDefault(),y=!1}),g.on("touchmove mousemove",function(e){e.preventDefault()}),t.connect(dojo.byId("lensTool"),"onclick",function(e){v(e)}),this.draggableWin=new i.constrainedMoveable(this.lensWin,{handle:this.lensWin,constraints:d,within:!0});var x=130;$("#lensTool").css("width")=="200px"&&(x=100);var T=Math.floor(parseInt($("#mainMap0").css("height"))/2)-x+"px",N=Math.floor(parseInt($("#mainMap0").css("width"))/2)-x+h+"px";a.set(this.lensWin,{top:T,left:N}),dojo.connect(app.popup[0],"onSetFeatures",function(){l=="TWO_WEBMAPS"?(p._clickOnLens||m(0,1),p._displayedPopupIndex=p._clickOnLens?1:0):(p.calculateSpyExtent(),p._displayedPopupIndex=0)}),dojo.connect(app.popup[1],"onSetFeatures",function(e){m(1,0,p._clickOnLens?!0:!1)}),t.connect(app.maps[0],"onClick",function(e){p._popupClosedByUser=!1,app.popup[0].hide(),p._clickPoint=e,p._clickOnLens=e.fromLens;var t=e.pageX-$("#lensWin").position().left,n=e.pageY-($("#lensWin").position().top+$("#header").height());e.x=t,e.y=n,e.screenPoint.x=t,e.screenPoint.y=n,l=="TWO_WEBMAPS"&&app.maps[1].onClick(e,"other")}),t.connect(app.maps[1],"onClick",function(e){app.popup[1].hide()}),t.connect(dojo.byId("infoWindowTabImg"),"onclick",p.toggleInfoWindow),t.connect(this.draggableWin,"onMove",function(){p._moving=!0});if(l=="TWO_WEBMAPS"){_popupColors.reverse(),_popupTitles.reverse(),$("#lensTool").addClass("twoMaps"),esri.config.defaults.map.panDuration=0;var C=function(){var e=esri.geometry.webMercatorToGeographic(app.maps[0].extent.getCenter());return[parseFloat(e.x.toFixed(3)),parseFloat(e.y.toFixed(3))]}();this._lensMap=app.maps[1],t.connect(this.draggableWin,"onMove",r.hitch(this,this.syncLensExtent)),t.connect(app.maps[0],"onPan",r.hitch(this,this.syncLensExtent)),t.connect(app.maps[0],"onExtentChange",r.hitch(this,this.syncLensExtent)),s("touch")?(t.connect(this.draggableWin,"onMoveStop",r.hitch(this,this.checkLensFeature)),t.connect(app.maps[0],"onPanEnd",r.hitch(this,this.checkLensFeature))):(t.connect(this.draggableWin,"onMove",r.hitch(this,this.checkLensFeature)),t.connect(app.maps[0],"onPan",r.hitch(this,this.checkLensFeature))),(dojo.isSafari||dojo.isIE==8)&&$("#lensMapNode, #lensTool").addClass("safariFix"),r.hitch(this,this.syncLensExtent())}else{$("#lensTool").addClass("twoLayers"),p._isGraphics=app.maps[0].getLayer(_layers[0]).type=="Feature Layer",p._isGraphics||(t.connect(this.draggableWin,"onMove",r.hitch(this,this.clipGlass)),t.connect(app.maps[0],"onPan",r.hitch(this,this.clipGlass)),s("touch")&&(t.connect(this.draggableWin,"onMoveStop",r.hitch(this,this.calculateSpyExtent)),t.connect(app.maps[0],"onPanEnd",r.hitch(this,this.calculateSpyExtent)))),t.connect(this.draggableWin,"onMove",r.hitch(this,this.calculateSpyExtent)),t.connect(app.maps[0],"onPan",r.hitch(this,this.calculateSpyExtent));if(p._isGraphics){var k=app.maps[0].getLayer(_layers[0]);if(k._collection)t.connect(app.maps[0],"onZoomEnd",r.hitch(this,this.calculateSpyExtent));else{var L=k._params&&k._params.opacity?k._params.opacity:1,A=!1;t.connect(app.maps[0],"onZoomStart",function(){A=!0}),t.connect(app.maps[0].getLayer(_layers[0]),"onUpdateStart",function(){A&&app.maps[0].getLayer(_layers[0]).setOpacity(0)}),t.connect(app.maps[0].getLayer(_layers[0]),"onUpdateEnd",r.hitch(this,function(){A&&app.maps[0].getLayer(_layers[0]).setOpacity(L),this.calculateSpyExtent(),A=!1}))}}$(window).resize(function(){p._isGraphics?this.calculateSpyExtent:p.clipGlass()}),p._isGraphics?setTimeout(this.calculateSpyExtent,1500):setTimeout(this.clipGlass,0),$("#lensWin").css({borderRadius:0})}p._isGraphics&&t.connect(app.maps[0],"onPanEnd",r.hitch(this,this.calculateSpyExtent)),this._started=!0},syncLensExtent:function(){var e=n.coords(p.lensWin),t=app.maps[0].toMap(new esri.geometry.Point(e.l,e.t+400,app.maps[0].spatialReference)),r=app.maps[0].toMap(new esri.geometry.Point(e.l+400,e.t,app.maps[0].spatialReference));_spyExtent=new esri.geometry.Extent(t.x,t.y,r.x,r.y,app.maps[0].spatialReference),p._lensMap.setExtent(_spyExtent);if($("#lensTool").css("width")=="200px")return},checkLensFeature:function(){var e=400,t=$("#lensTool").width(),n=new esri.geometry.Point(_spyExtent.xmin+(_spyExtent.xmax-_spyExtent.xmin)/e*t/2,_spyExtent.ymax+(_spyExtent.ymin-_spyExtent.ymax)/e*t/2,_spyExtent.spatialReference),r=(_spyExtent.xmax-_spyExtent.xmin)/(e/t)/2,i=[];for(var s=1;s<31;s++){var o=s*12*Math.PI/180,u=n.x+r*Math.cos(o),a=n.y+r*Math.sin(o);i.push([u,a])}i.push(i[0]);var f=new esri.geometry.Polygon(new esri.SpatialReference(app.maps[0].spatialReference));f.addRing(i),p._clickPoint&&(f.contains(p._clickPoint.mapPoint)?m(1,0):m(0,1))},clipGlass:function(){var e=$("#lensWin"),t=app.maps,n=t[0].getLayer(_layers[0])._div;if(e!=null){_leftVal=parseFloat(e.css("left")),_rightVal=_leftVal+parseInt($("#lensWin").css("width")),_topVal=parseFloat(e.css("top")),_bottomVal=_topVal+parseInt($("#lensWin").css("height")),$("#lensTool").css("width")=="200px"?(_leftVal+=6,_rightVal+=-6,_topVal+=6,_bottomVal+=-6):(_leftVal+=9,_rightVal+=-9,_topVal+=9,_bottomVal+=-9);var r=0,i=0;if(t[0].navigationMode==="css-transforms"){var s="";dojo.isWebKit?s="-webkit-":dojo.isFF?s="-moz-":dojo.isIE?s="-ms-":dojo.isOpera&&(s="-o-");var o=n.style.getPropertyValue(s+"transform");if(o){o.toLowerCase().indexOf("translate3d")!==-1?o=o.replace("translate3d(","").replace(")","").replace(/px/ig,"").replace(/\s/i,"").split(","):o.toLowerCase().indexOf("translate")!==-1&&(o=o.replace("translate(","").replace(")","").replace(/px/ig,"").replace(/\s/i,"").split(","));try{r=parseFloat(o[0]),i=parseFloat(o[1])}catch(u){alert("Error cannot continue"),console.error(u)}_leftVal-=r,_rightVal-=r,_topVal-=i,_bottomVal-=i}}var a="rect("+_topVal+"px, "+_rightVal+"px, "+_bottomVal+"px, "+_leftVal+"px)";n.style.clip=a}},calculateSpyExtent:function(e){var t=app.maps[0].extent,n=app.maps[0].width,r=app.maps[0].height;if(p._isGraphics){var i=$("#lensWin");i!=null&&(_leftVal=parseFloat(i.css("left")),_rightVal=_leftVal+parseInt($("#lensWin").css("width")),_topVal=parseFloat(i.css("top")),_bottomVal=_topVal+parseInt($("#lensWin").css("height")),$("#lensTool").css("width")=="200px"?(_leftVal+=6,_rightVal+=-6,_topVal+=6,_bottomVal+=-6):(_leftVal+=9,_rightVal+=-9,_topVal+=9,_bottomVal+=-9))}var s=new esri.geometry.ScreenPoint(_rightVal,_topVal),o=new esri.geometry.ScreenPoint(_leftVal,_bottomVal),u=new esri.geometry.toMapGeometry(t,n,r,s),a=new esri.geometry.toMapGeometry(t,n,r,o),f=null;spyExtent=new esri.geometry.Extent(a.x,a.y,u.x,u.y,new esri.SpatialReference(app.maps[0].spatialReference));var f=null;spyExtent=new esri.geometry.Extent(a.x,a.y,u.x,u.y,new esri.SpatialReference(app.maps[0].spatialReference)),p.checkSelectedFeature(spyExtent),p._isGraphics&&p.hideGraphics(spyExtent)},hideGraphics:function(e){$.each(app.maps[0].getLayer(_layers[0]).graphics,function(t,n){var r=n.geometry.type=="point"?n.geometry:n.geometry.getExtent().getCenter();e.contains(r)?n.show():n.hide()})},checkSelectedFeature:function(e){e=e;if(p._clickPoint!=null&&app.popup[0].features){var t=e.contains(p._clickPoint.mapPoint),n=_layers[0]+(p._isGraphics?"":"_1");colorTitleIndex=t?1:0;for(var r=0;r<app.popup[0].features.length;r++){var i=app.popup[0].features[r],s=i._graphicsLayer.id;if(!t&&s==n){var o=app.popup[0].features[r];h.byId("infoView-mobile1").set("content",o.getContent()),$("#infoWindowView .noData").hide(),$(".swiper.infoWindowView").css("display","block");break}}for(var r=0;r<app.popup[0].features.length;r++){var o=app.popup[0].features[r],s=o._graphicsLayer.id;if(t&&s==n||!t&&s!=n){app.popup[0].select(r),m(0,colorTitleIndex);break}}p._displayedPopupIndex=colorTitleIndex}},toggleInfoWindow:function(){p.getInfoWindowState()=="open"?p.closeInfoWindow():p.openInfoWindow(),p._popupClosedByUser=!p._popupClosedByUser},getInfoWindowState:function(){return $("#infoWindowTabImg").hasClass("open")?"open":"close"},closeInfoWindow:function(){if($("#infoWindow").css("right")=="-260px")return;p.infoWindowSlide("in"),dojo.removeClass("infoWindowTabImg","closeImg"),$("#infoWindowTabImg").hasClass("open")&&$("#infoWindowTabImg").removeClass("open")},openInfoWindow:function(){p.infoWindowSlide("out"),dojo.addClass("infoWindowTabImg","closeImg"),$("#infoWindowTabImg").hasClass("open")||$("#infoWindowTabImg").addClass("open")},infoWindowSlide:function(e){$("#infoWindow").animate({right:e=="in"?-240:3},{duration:1e3})},updateSettings:function(e,t){if(!this._started)return;if(this._displayedPopupIndex==null)return;$("#infoWindowTitle").css("backgroundColor","#"+_popupColors[this._displayedPopupIndex]),$("#infoWindowTitle").html(_popupTitles[this._displayedPopupIndex]||"&nbsp;")}});return d}),define("storymaps/swipe/core/MainView",["dojo/dom-construct","dojo/_base/window","storymaps/swipe/core/WebApplicationData","storymaps/swipe/ui/desktop/SwipeSidePanel","storymaps/swipe/ui/mobile/MobileSwipeView","storymaps/swipe/ui/MapSwipe","storymaps/swipe/ui/SpyGlass","storymaps/swipe/core/SwipeHelper","storymaps/utils/Helper","dojo/has"],function(e,t,n,r,i,s,o,u,a,f){return function(){var l=null,c=this;this.init=function(t){l=t;if(app.isInBuilderMode&&f("ie")&&f("ie")<9)return l.initError("noBuilderIE8"),!1;app.mapSwipe=new s("#mapPanel");var u=e.create("div",{id:"lensWidget"},"mapPanel");return app.spyGlass=new o(n.getWebmaps()[1],u),app.swipeSidePanel=new r($("#swipeSidePanel"),app.isInBuilderMode),app.mobileInfoWindowView=new i("#infoWindowView","#infoWindowViewCarousel"),app.mobileLegendView=new i("#legendView","#legendViewCarousel"),dojo.subscribe("CORE_UPDATE_EXTENT",this.setMapExtent),app.popup=[],app.popup[0]=new esri.dijit.Popup({highlight:!0,offsetX:0},dojo.create("div")),app.popup[1]=new esri.dijit.Popup({highlight:!0,offsetX:0},dojo.create("div")),!0},this.webmapLoaded=function(){var e=n.getColors(),t=n.getDescription(),r=n.getLegend(),i=n.getSidePanelDescription();loadingIndicator.setMessage(i18n.viewer.loading.step3),t==null&&(t=!0),r==null&&(r=!0),!i&&app.isInBuilderMode&&(i=i18n.builder.header.editMe),app.swipeSidePanel.init(i,e[1],e[0],t,r,n.getLayers());if(dojo.isIE==undefined||dojo.isIE>8)app.mobileInfoWindowView.init([$("#infoView-mobile1"),$("#infoView-mobile0")],e[1]),app.mobileLegendView.init(["<div id='legendView2'></div>","<div id='legendView1'></div>"],e[1]);c.setMapExtent(a.getWebMapExtentFromItem(app.data.getWebMapItem().item)).then(function(){if(app.maps.length==2&&app.maps[0].spatialReference.wkid!=app.maps[1].spatialReference.wkid){l.appInitComplete(),$("#projectionPopup").modal();return}n.getLayout()=="spyglass"?app.spyGlass.startup(n.getWebmaps()[1],$("#lensWidget"),n.getPopupColors(),n.getPopupTitles(),app.mode,n.getLayers(),!u.isOnMobileView()&&(t||r)?175:0):app.mapSwipe.init(app.maps,n.getLayers(),n.getPopupColors(),n.getPopupTitles(),!u.isOnMobileView()&&(t||r)?175:0);if(app.mode=="TWO_WEBMAPS")var e=dojo.connect(app.maps[1],"onExtentChange",function(){dojo.disconnect(e),setTimeout(function(){l.appInitComplete()},n.getLayout()=="spyglass"?3e3:1e3)});else setTimeout(function(){l.appInitComplete()},n.getLayout()=="spyglass"?2e3:500)})},this.appInitComplete=function(){l.displayApp(),n&&!n.getLegend()&&!n.getDescription()||!configOptions.legend&&!configOptions.description?($("#mainMap1_zoom_slider").addClass("closed"),$("#mainMap0_zoom_slider").addClass("closed"),$("#mainMap_zoom_location").addClass("closed")):$("#mainMap1_zoom_slider").addClass("open"),$("#mainMap0_zoom_slider").addClass("open"),$("#mainMap_zoom_location").addClass("open")},this.onHashChange=function(){location.hash=="#swipe"?($("#leftViewLink").addClass("current"),app.mobileLegendView.show()):location.hash=="#list"&&($("#rightViewLink").addClass("current"),app.mobileInfoWindowView.show())},this.updateUI=function(){var e=n.getColors();app.swipeSidePanel.update(e[1],e[0]),app.mobileInfoWindowView.update(e[1]),app.mobileLegendView.update(e[1])},this.resize=function(e){app.initInProgress&&($("#loadingOverlay").css("top",e.isMobileView?"0px":$("#header").height()),$("#header").css("display",e.isMobileView?"none":"block"),$("#fatalError").css("display",e.isMobileView?"block":"none")),e.isMobileView==0&&$("#infoWindowView").css("display","none"),app.swipeSidePanel.resize(e.width,e.height)},this.centerMap=function(e,t){t?app.map.centerAndZoom(e,t):app.maps[0].centerAt(e)},this.setMapExtent=function(e){var t=new dojo.Deferred,n=[];return $.each(app.maps,function(t,r){n.push(r.setExtent(e,!0))}),(new dojo.DeferredList(n)).then(function(){t.resolve()}),t},this.zoomToDeviceLocation=function(e,t){e&&(app.maps[0].spatialReference.wkid==102100?t=esri.geometry.geographicToWebMercator(t):app.maps[0].spatialReference.wkid!=4326&&esri.config.defaults.geometryService.project([t],app.maps[0].spatialReference,function(e){if(!e||!e[0])return;c.centerMap(e[0])}),c.centerMap(t))},this.initLocalization=function(){$("#infoWindowView .noData .title").html(i18n.swipe.mobileData.noData),$("#infoWindowView .noData .explain").html(i18n.swipe.mobileData.noDataExplain),$("#legendView .noData .title").html(i18n.swipe.mobileLegend.noLegend),$("#projectionPopup").find("h3").html(i18n.viewer.errors.conflictingProjectionsTitle),$(".projectionExplain").html(i18n.viewer.errors.conflictingProjections),$("#projectionPopup").find(".btnClose").html(i18n.viewer.errors.cpButton)}}}),require(["storymaps/ui/loadingIndicator/LoadingIndicator","storymaps/core/Core","storymaps/swipe/core/MainView"],function(){}),define("storymaps/swipe/BuildConfigViewer",function(){});