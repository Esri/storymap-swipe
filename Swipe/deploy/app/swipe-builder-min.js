!function(a,b){function c(a){var b=a.length,c=ib.type(a);return ib.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=xb[a]={};return ib.each(a.match(kb)||[],function(a,c){b[c]=!0}),b}function e(a,c,d,e){if(ib.acceptData(a)){var f,g,h=ib.expando,i="string"==typeof c,j=a.nodeType,k=j?ib.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=_.pop()||ib.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=ib.noop)),("object"==typeof c||"function"==typeof c)&&(e?k[l]=ib.extend(k[l],c):k[l].data=ib.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[ib.camelCase(c)]=d),i?(g=f[c],null==g&&(g=f[ib.camelCase(c)])):g=f,g}}function f(a,b,c){if(ib.acceptData(a)){var d,e,f,g=a.nodeType,i=g?ib.cache:a,j=g?a[ib.expando]:ib.expando;if(i[j]){if(b&&(f=c?i[j]:i[j].data)){ib.isArray(b)?b=b.concat(ib.map(b,ib.camelCase)):b in f?b=[b]:(b=ib.camelCase(b),b=b in f?[b]:b.split(" "));for(d=0,e=b.length;e>d;d++)delete f[b[d]];if(!(c?h:ib.isEmptyObject)(f))return}(c||(delete i[j].data,h(i[j])))&&(g?ib.cleanData([a],!0):ib.support.deleteExpando||i!=i.window?delete i[j]:i[j]=null)}}}function g(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(zb,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:yb.test(d)?ib.parseJSON(d):d}catch(f){}ib.data(a,c,d)}else d=b}return d}function h(a){var b;for(b in a)if(("data"!==b||!ib.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function i(){return!0}function j(){return!1}function k(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function l(a,b,c){if(b=b||0,ib.isFunction(b))return ib.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return ib.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=ib.grep(a,function(a){return 1===a.nodeType});if(Rb.test(b))return ib.filter(b,d,!c);b=ib.filter(b,d)}return ib.grep(a,function(a){return ib.inArray(a,b)>=0===c})}function m(a){var b=Ub.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function n(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function o(a){var b=a.getAttributeNode("type");return a.type=(b&&b.specified)+"/"+a.type,a}function p(a){var b=ec.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function q(a,b){for(var c,d=0;null!=(c=a[d]);d++)ib._data(c,"globalEval",!b||ib._data(b[d],"globalEval"))}function r(a,b){if(1===b.nodeType&&ib.hasData(a)){var c,d,e,f=ib._data(a),g=ib._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)ib.event.add(b,c,h[c][d])}g.data&&(g.data=ib.extend({},g.data))}}function s(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ib.support.noCloneEvent&&b[ib.expando]){e=ib._data(b);for(d in e.events)ib.removeEvent(b,d,e.handle);b.removeAttribute(ib.expando)}"script"===c&&b.text!==a.text?(o(b).text=a.text,p(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ib.support.html5Clone&&a.innerHTML&&!ib.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bc.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function t(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==V?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==V?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||ib.nodeName(e,c)?g.push(e):ib.merge(g,t(e,c));return c===b||c&&ib.nodeName(a,c)?ib.merge([a],g):g}function u(a){bc.test(a.type)&&(a.defaultChecked=a.checked)}function v(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=yc.length;e--;)if(b=yc[e]+c,b in a)return b;return d}function w(a,b){return a=b||a,"none"===ib.css(a,"display")||!ib.contains(a.ownerDocument,a)}function x(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ib._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&w(d)&&(f[g]=ib._data(d,"olddisplay",B(d.nodeName)))):f[g]||(e=w(d),(c&&"none"!==c||!e)&&ib._data(d,"olddisplay",e?c:ib.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function y(a,b,c){var d=rc.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ib.css(a,c+xc[f],!0,e)),d?("content"===c&&(g-=ib.css(a,"padding"+xc[f],!0,e)),"margin"!==c&&(g-=ib.css(a,"border"+xc[f]+"Width",!0,e))):(g+=ib.css(a,"padding"+xc[f],!0,e),"padding"!==c&&(g+=ib.css(a,"border"+xc[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=kc(a),g=ib.support.boxSizing&&"border-box"===ib.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=lc(a,b,f),(0>e||null==e)&&(e=a.style[b]),sc.test(e))return e;d=g&&(ib.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a){var b=W,c=uc[a];return c||(c=C(a,b),"none"!==c&&c||(jc=(jc||ib("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(jc[0].contentWindow||jc[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=C(a,b),jc.detach()),uc[a]=c),c}function C(a,b){var c=ib(b.createElement(a)).appendTo(b.body),d=ib.css(c[0],"display");return c.remove(),d}function D(a,b,c,d){var e;if(ib.isArray(b))ib.each(b,function(b,e){c||Ac.test(a)?d(a,e):D(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ib.type(b))d(a,b);else for(e in b)D(a+"["+e+"]",b[e],c,d)}function E(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(kb)||[];if(ib.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function F(a,c,d,e){function f(i){var j;return g[i]=!0,ib.each(a[i]||[],function(a,i){var k=i(c,d,e);return"string"!=typeof k||h||g[k]?h?!(j=k):b:(c.dataTypes.unshift(k),f(k),!1)}),j}var g={},h=a===Rc;return f(c.dataTypes[0])||!g["*"]&&f("*")}function G(a,c){var d,e,f=ib.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);return d&&ib.extend(!0,a,d),a}function H(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(h in k)h in d&&(c[k[h]]=d[h]);for(;"*"===j[0];)j.shift(),f===b&&(f=a.mimeType||c.getResponseHeader("Content-Type"));if(f)for(h in i)if(i[h]&&i[h].test(f)){j.unshift(h);break}if(j[0]in d)g=j[0];else{for(h in d){if(!j[0]||a.converters[h+" "+j[0]]){g=h;break}e||(e=h)}g=g||e}return g?(g!==j[0]&&j.unshift(g),d[g]):b}function I(a,b){var c,d,e,f,g={},h=0,i=a.dataTypes.slice(),j=i[0];if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i[1])for(e in a.converters)g[e.toLowerCase()]=a.converters[e];for(;d=i[++h];)if("*"!==d){if("*"!==j&&j!==d){if(e=g[j+" "+d]||g["* "+d],!e)for(c in g)if(f=c.split(" "),f[1]===d&&(e=g[j+" "+f[0]]||g["* "+f[0]])){e===!0?e=g[c]:g[c]!==!0&&(d=f[0],i.splice(h--,0,d));break}if(e!==!0)if(e&&a["throws"])b=e(b);else try{b=e(b)}catch(k){return{state:"parsererror",error:e?k:"No conversion from "+j+" to "+d}}}j=d}return{state:"success",data:b}}function J(){try{return new a.XMLHttpRequest}catch(b){}}function K(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function L(){return setTimeout(function(){$c=b}),$c=ib.now()}function M(a,b){ib.each(b,function(b,c){for(var d=(ed[b]||[]).concat(ed["*"]),e=0,f=d.length;f>e;e++)if(d[e].call(a,b,c))return})}function N(a,b,c){var d,e,f=0,g=dd.length,h=ib.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$c||L(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ib.extend({},b),opts:ib.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$c||L(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ib.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(O(k,j.opts.specialEasing);g>f;f++)if(d=dd[f].call(j,a,k,j.opts))return d;return M(j,k),ib.isFunction(j.opts.start)&&j.opts.start.call(a,j),ib.fx.timer(ib.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function O(a,b){var c,d,e,f,g;for(e in a)if(d=ib.camelCase(e),f=b[d],c=a[e],ib.isArray(c)&&(f=c[1],c=a[e]=c[0]),e!==d&&(a[d]=c,delete a[e]),g=ib.cssHooks[d],g&&"expand"in g){c=g.expand(c),delete a[d];for(e in c)e in a||(a[e]=c[e],b[e]=f)}else b[d]=f}function P(a,b,c){var d,e,f,g,h,i,j,k,l,m=this,n=a.style,o={},p=[],q=a.nodeType&&w(a);c.queue||(k=ib._queueHooks(a,"fx"),null==k.unqueued&&(k.unqueued=0,l=k.empty.fire,k.empty.fire=function(){k.unqueued||l()}),k.unqueued++,m.always(function(){m.always(function(){k.unqueued--,ib.queue(a,"fx").length||k.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],"inline"===ib.css(a,"display")&&"none"===ib.css(a,"float")&&(ib.support.inlineBlockNeedsLayout&&"inline"!==B(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",ib.support.shrinkWrapBlocks||m.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(e in b)if(g=b[e],ad.exec(g)){if(delete b[e],i=i||"toggle"===g,g===(q?"hide":"show"))continue;p.push(e)}if(f=p.length){h=ib._data(a,"fxshow")||ib._data(a,"fxshow",{}),"hidden"in h&&(q=h.hidden),i&&(h.hidden=!q),q?ib(a).show():m.done(function(){ib(a).hide()}),m.done(function(){var b;ib._removeData(a,"fxshow");for(b in o)ib.style(a,b,o[b])});for(e=0;f>e;e++)d=p[e],j=m.createTween(d,q?h[d]:0),o[d]=h[d]||ib.style(a,d),d in h||(h[d]=j.start,q&&(j.end=j.start,j.start="width"===d||"height"===d?1:0))}}function Q(a,b,c,d,e){return new Q.prototype.init(a,b,c,d,e)}function R(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=xc[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function S(a){return ib.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var T,U,V=typeof b,W=a.document,X=a.location,Y=a.jQuery,Z=a.$,$={},_=[],ab="1.9.1",bb=_.concat,cb=_.push,db=_.slice,eb=_.indexOf,fb=$.toString,gb=$.hasOwnProperty,hb=ab.trim,ib=function(a,b){return new ib.fn.init(a,b,U)},jb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,kb=/\S+/g,lb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,mb=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,nb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ob=/^[\],:{}\s]*$/,pb=/(?:^|:|,)(?:\s*\[)+/g,qb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rb=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,sb=/^-ms-/,tb=/-([\da-z])/gi,ub=function(a,b){return b.toUpperCase()},vb=function(a){(W.addEventListener||"load"===a.type||"complete"===W.readyState)&&(wb(),ib.ready())},wb=function(){W.addEventListener?(W.removeEventListener("DOMContentLoaded",vb,!1),a.removeEventListener("load",vb,!1)):(W.detachEvent("onreadystatechange",vb),a.detachEvent("onload",vb))};ib.fn=ib.prototype={jquery:ab,constructor:ib,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:mb.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof ib?c[0]:c,ib.merge(this,ib.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:W,!0)),nb.test(e[1])&&ib.isPlainObject(c))for(e in c)ib.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}if(f=W.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=W,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ib.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),ib.makeArray(a,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return db.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){var b=ib.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ib.each(this,a,b)},ready:function(a){return ib.ready.promise().done(a),this},slice:function(){return this.pushStack(db.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},map:function(a){return this.pushStack(ib.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:cb,sort:[].sort,splice:[].splice},ib.fn.init.prototype=ib.fn,ib.extend=ib.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||ib.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(ib.isPlainObject(d)||(c=ib.isArray(d)))?(c?(c=!1,g=a&&ib.isArray(a)?a:[]):g=a&&ib.isPlainObject(a)?a:{},h[e]=ib.extend(k,g,d)):d!==b&&(h[e]=d));return h},ib.extend({noConflict:function(b){return a.$===ib&&(a.$=Z),b&&a.jQuery===ib&&(a.jQuery=Y),ib},isReady:!1,readyWait:1,holdReady:function(a){a?ib.readyWait++:ib.ready(!0)},ready:function(a){if(a===!0?!--ib.readyWait:!ib.isReady){if(!W.body)return setTimeout(ib.ready);ib.isReady=!0,a!==!0&&--ib.readyWait>0||(T.resolveWith(W,[ib]),ib.fn.trigger&&ib(W).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===ib.type(a)},isArray:Array.isArray||function(a){return"array"===ib.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?$[fb.call(a)]||"object":typeof a},isPlainObject:function(a){if(!a||"object"!==ib.type(a)||a.nodeType||ib.isWindow(a))return!1;try{if(a.constructor&&!gb.call(a,"constructor")&&!gb.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||gb.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||W;var d=nb.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ib.buildFragment([a],b,e),e&&ib(e).remove(),ib.merge([],d.childNodes))},parseJSON:function(c){return a.JSON&&a.JSON.parse?a.JSON.parse(c):null===c?c:"string"==typeof c&&(c=ib.trim(c),c&&ob.test(c.replace(qb,"@").replace(rb,"]").replace(pb,"")))?Function("return "+c)():(ib.error("Invalid JSON: "+c),b)},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||ib.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&ib.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(sb,"ms-").replace(tb,ub)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:hb&&!hb.call("﻿ ")?function(a){return null==a?"":hb.call(a)}:function(a){return null==a?"":(a+"").replace(lb,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ib.merge(d,"string"==typeof a?[a]:a):cb.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(eb)return eb.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return bb.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(f=a[c],c=a,a=f),ib.isFunction(a)?(d=db.call(arguments,2),e=function(){return a.apply(c||this,d.concat(db.call(arguments)))},e.guid=a.guid=a.guid||ib.guid++,e):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===ib.type(d)){f=!0;for(i in d)ib.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,ib.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(ib(a),c)})),c))for(;j>i;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:function(){return(new Date).getTime()}}),ib.ready.promise=function(b){if(!T)if(T=ib.Deferred(),"complete"===W.readyState)setTimeout(ib.ready);else if(W.addEventListener)W.addEventListener("DOMContentLoaded",vb,!1),a.addEventListener("load",vb,!1);else{W.attachEvent("onreadystatechange",vb),a.attachEvent("onload",vb);var c=!1;try{c=null==a.frameElement&&W.documentElement}catch(d){}c&&c.doScroll&&function e(){if(!ib.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}wb(),ib.ready()}}()}return T.promise(b)},ib.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){$["[object "+b+"]"]=b.toLowerCase()}),U=ib(W);var xb={};ib.Callbacks=function(a){a="string"==typeof a?xb[a]||d(a):ib.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(e=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,c=!0;j&&g>h;h++)if(j[h].apply(b[0],b[1])===!1&&a.stopOnFalse){e=!1;break}c=!1,j&&(k?k.length&&l(k.shift()):e?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function d(b){ib.each(b,function(b,c){var e=ib.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),c?g=j.length:e&&(i=b,l(e))}return this},remove:function(){return j&&ib.each(arguments,function(a,b){for(var d;(d=ib.inArray(b,j,d))>-1;)j.splice(d,1),c&&(g>=d&&g--,h>=d&&h--)}),this},has:function(a){return a?ib.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],this},disable:function(){return j=k=e=b,this},disabled:function(){return!j},lock:function(){return k=b,e||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||f&&!k||(c?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},ib.extend({Deferred:function(a){var b=[["resolve","done",ib.Callbacks("once memory"),"resolved"],["reject","fail",ib.Callbacks("once memory"),"rejected"],["notify","progress",ib.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ib.Deferred(function(c){ib.each(b,function(b,f){var g=f[0],h=ib.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&ib.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ib.extend(a,d):d}},e={};return d.pipe=d.then,ib.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=db.call(arguments),g=f.length,h=1!==g||a&&ib.isFunction(a.promise)?g:0,i=1===h?a:ib.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?db.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=Array(g),c=Array(g),d=Array(g);g>e;e++)f[e]&&ib.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),ib.support=function(){var b,c,d,e,f,g,h,i,j,k,l=W.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=l.getElementsByTagName("*"),d=l.getElementsByTagName("a")[0],!c||!d||!c.length)return{};f=W.createElement("select"),h=f.appendChild(W.createElement("option")),e=l.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b={getSetAttribute:"t"!==l.className,leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:!!e.value,optSelected:h.selected,enctype:!!W.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==W.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===W.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},e.checked=!0,b.noCloneChecked=e.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!h.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}e=W.createElement("input"),e.setAttribute("value",""),b.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),b.radioValue="t"===e.value,e.setAttribute("checked","t"),e.setAttribute("name","t"),g=W.createDocumentFragment(),g.appendChild(e),b.appendChecked=e.checked,b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(i="on"+k,"t"),b[k+"Bubbles"]=i in a||l.attributes[i].expando===!1;return l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===l.style.backgroundClip,ib(function(){var c,d,e,f="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",g=W.getElementsByTagName("body")[0];g&&(c=W.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=l.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",j=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=j&&0===e[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===l.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==g.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(W.createElement("div")),d.style.cssText=l.style.cssText=f,d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==V&&(l.innerHTML="",l.style.cssText=f+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(g.style.zoom=1)),g.removeChild(c),c=l=e=d=null)}),c=f=g=h=d=e=null,b}();var yb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,zb=/([A-Z])/g;ib.extend({cache:{},expando:"jQuery"+(ab+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?ib.cache[a[ib.expando]]:a[ib.expando],!!a&&!h(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&ib.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),ib.fn.extend({data:function(a,c){var d,e,f=this[0],h=0,i=null;if(a===b){if(this.length&&(i=ib.data(f),1===f.nodeType&&!ib._data(f,"parsedAttrs"))){for(d=f.attributes;d.length>h;h++)e=d[h].name,e.indexOf("data-")||(e=ib.camelCase(e.slice(5)),g(f,e,i[e]));ib._data(f,"parsedAttrs",!0)}return i}return"object"==typeof a?this.each(function(){ib.data(this,a)}):ib.access(this,function(c){return c===b?f?g(f,a,ib.data(f,a)):null:(this.each(function(){ib.data(this,a,c)}),b)},null,c,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){ib.removeData(this,a)})}}),ib.extend({queue:function(a,c,d){var e;return a?(c=(c||"fx")+"queue",e=ib._data(a,c),d&&(!e||ib.isArray(d)?e=ib._data(a,c,ib.makeArray(d)):e.push(d)),e||[]):b},dequeue:function(a,b){b=b||"fx";var c=ib.queue(a,b),d=c.length,e=c.shift(),f=ib._queueHooks(a,b),g=function(){ib.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),f.cur=e,e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ib._data(a,c)||ib._data(a,c,{empty:ib.Callbacks("once memory").add(function(){ib._removeData(a,b+"queue"),ib._removeData(a,c)})})}}),ib.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),d>arguments.length?ib.queue(this[0],a):c===b?this:this.each(function(){var b=ib.queue(this,a,c);ib._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&ib.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ib.dequeue(this,a)})},delay:function(a,b){return a=ib.fx?ib.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=ib.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=ib._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var Ab,Bb,Cb=/[\t\r\n]/g,Db=/\r/g,Eb=/^(?:input|select|textarea|button|object)$/i,Fb=/^(?:a|area)$/i,Gb=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Hb=/^(?:checked|selected)$/i,Ib=ib.support.getSetAttribute,Jb=ib.support.input;ib.fn.extend({attr:function(a,b){return ib.access(this,ib.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ib.removeAttr(this,a)})},prop:function(a,b){return ib.access(this,ib.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ib.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(ib.isFunction(a))return this.each(function(b){ib(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(kb)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Cb," "):" ")){for(f=0;e=b[f++];)0>d.indexOf(" "+e+" ")&&(d+=e+" ");c.className=ib.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(ib.isFunction(a))return this.each(function(b){ib(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(kb)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Cb," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?ib.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return ib.isFunction(a)?this.each(function(c){ib(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=ib(this),h=b,i=a.match(kb)||[];e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else(c===V||"boolean"===c)&&(this.className&&ib._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ib._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Cb," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];return arguments.length?(e=ib.isFunction(a),this.each(function(c){var f,g=ib(this);1===this.nodeType&&(f=e?a.call(this,c,g.val()):a,null==f?f="":"number"==typeof f?f+="":ib.isArray(f)&&(f=ib.map(f,function(a){return null==a?"":a+""})),d=ib.valHooks[this.type]||ib.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==b||(this.value=f))})):f?(d=ib.valHooks[f.type]||ib.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(c=d.get(f,"value"))!==b?c:(c=f.value,"string"==typeof c?c.replace(Db,""):null==c?"":c)):void 0}}),ib.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(ib.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&ib.nodeName(c.parentNode,"optgroup"))){if(b=ib(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c=ib.makeArray(b);return ib(a).find("option").each(function(){this.selected=ib.inArray(ib(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attr:function(a,c,d){var e,f,g,h=a.nodeType;return a&&3!==h&&8!==h&&2!==h?typeof a.getAttribute===V?ib.prop(a,c,d):(f=1!==h||!ib.isXMLDoc(a),f&&(c=c.toLowerCase(),e=ib.attrHooks[c]||(Gb.test(c)?Bb:Ab)),d===b?e&&f&&"get"in e&&null!==(g=e.get(a,c))?g:(typeof a.getAttribute!==V&&(g=a.getAttribute(c)),null==g?b:g):null!==d?e&&f&&"set"in e&&(g=e.set(a,d,c))!==b?g:(a.setAttribute(c,d+""),d):(ib.removeAttr(a,c),b)):void 0},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(kb);if(f&&1===a.nodeType)for(;c=f[e++];)d=ib.propFix[c]||c,Gb.test(c)?!Ib&&Hb.test(c)?a[ib.camelCase("default-"+c)]=a[d]=!1:a[d]=!1:ib.attr(a,c,""),a.removeAttribute(Ib?c:d)},attrHooks:{type:{set:function(a,b){if(!ib.support.radioValue&&"radio"===b&&ib.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;return a&&3!==h&&8!==h&&2!==h?(g=1!==h||!ib.isXMLDoc(a),g&&(c=ib.propFix[c]||c,f=ib.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]):void 0},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):Eb.test(a.nodeName)||Fb.test(a.nodeName)&&a.href?0:b}}}}),Bb={get:function(a,c){var d=ib.prop(a,c),e="boolean"==typeof d&&a.getAttribute(c),f="boolean"==typeof d?Jb&&Ib?null!=e:Hb.test(c)?a[ib.camelCase("default-"+c)]:!!e:a.getAttributeNode(c);return f&&f.value!==!1?c.toLowerCase():b
},set:function(a,b,c){return b===!1?ib.removeAttr(a,c):Jb&&Ib||!Hb.test(c)?a.setAttribute(!Ib&&ib.propFix[c]||c,c):a[ib.camelCase("default-"+c)]=a[c]=!0,c}},Jb&&Ib||(ib.attrHooks.value={get:function(a,c){var d=a.getAttributeNode(c);return ib.nodeName(a,"input")?a.defaultValue:d&&d.specified?d.value:b},set:function(a,c,d){return ib.nodeName(a,"input")?(a.defaultValue=c,b):Ab&&Ab.set(a,c,d)}}),Ib||(Ab=ib.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&("id"===c||"name"===c||"coords"===c?""!==d.value:d.specified)?d.value:b},set:function(a,c,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=c+="","value"===d||c===a.getAttribute(d)?c:b}},ib.attrHooks.contenteditable={get:Ab.get,set:function(a,b,c){Ab.set(a,""===b?!1:b,c)}},ib.each(["width","height"],function(a,c){ib.attrHooks[c]=ib.extend(ib.attrHooks[c],{set:function(a,d){return""===d?(a.setAttribute(c,"auto"),d):b}})})),ib.support.hrefNormalized||(ib.each(["href","src","width","height"],function(a,c){ib.attrHooks[c]=ib.extend(ib.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null==d?b:d}})}),ib.each(["href","src"],function(a,b){ib.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}})),ib.support.style||(ib.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}}),ib.support.optSelected||(ib.propHooks.selected=ib.extend(ib.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),ib.support.enctype||(ib.propFix.enctype="encoding"),ib.support.checkOn||ib.each(["radio","checkbox"],function(){ib.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),ib.each(["radio","checkbox"],function(){ib.valHooks[this]=ib.extend(ib.valHooks[this],{set:function(a,c){return ib.isArray(c)?a.checked=ib.inArray(ib(a).val(),c)>=0:b}})});var Kb=/^(?:input|select|textarea)$/i,Lb=/^key/,Mb=/^(?:mouse|contextmenu)|click/,Nb=/^(?:focusinfocus|focusoutblur)$/,Ob=/^([^.]*)(?:\.(.+)|)$/;ib.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=ib._data(a);if(r){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=ib.guid++),(h=r.events)||(h=r.events={}),(l=r.handle)||(l=r.handle=function(a){return typeof ib===V||a&&ib.event.triggered===a.type?b:ib.event.dispatch.apply(l.elem,arguments)},l.elem=a),c=(c||"").match(kb)||[""],i=c.length;i--;)g=Ob.exec(c[i])||[],o=q=g[1],p=(g[2]||"").split(".").sort(),k=ib.event.special[o]||{},o=(f?k.delegateType:k.bindType)||o,k=ib.event.special[o]||{},m=ib.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&ib.expr.match.needsContext.test(f),namespace:p.join(".")},j),(n=h[o])||(n=h[o]=[],n.delegateCount=0,k.setup&&k.setup.call(a,e,p,l)!==!1||(a.addEventListener?a.addEventListener(o,l,!1):a.attachEvent&&a.attachEvent("on"+o,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,m):n.push(m),ib.event.global[o]=!0;a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ib.hasData(a)&&ib._data(a);if(q&&(k=q.events)){for(b=(b||"").match(kb)||[""],j=b.length;j--;)if(h=Ob.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ib.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ib.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ib.event.remove(a,n+b[j],c,d,!0);ib.isEmptyObject(k)&&(delete q.handle,ib._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||W],o=gb.call(c,"type")?c.type:c,p=gb.call(c,"namespace")?c.namespace.split("."):[];if(i=l=e=e||W,3!==e.nodeType&&8!==e.nodeType&&!Nb.test(o+ib.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),h=0>o.indexOf(":")&&"on"+o,c=c[ib.expando]?c:new ib.Event(o,"object"==typeof c&&c),c.isTrigger=!0,c.namespace=p.join("."),c.namespace_re=c.namespace?RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:ib.makeArray(d,[c]),k=ib.event.special[o]||{},f||!k.trigger||k.trigger.apply(e,d)!==!1)){if(!f&&!k.noBubble&&!ib.isWindow(e)){for(j=k.delegateType||o,Nb.test(j+o)||(i=i.parentNode);i;i=i.parentNode)n.push(i),l=i;l===(e.ownerDocument||W)&&n.push(l.defaultView||l.parentWindow||a)}for(m=0;(i=n[m++])&&!c.isPropagationStopped();)c.type=m>1?j:k.bindType||o,g=(ib._data(i,"events")||{})[c.type]&&ib._data(i,"handle"),g&&g.apply(i,d),g=h&&i[h],g&&ib.acceptData(i)&&g.apply&&g.apply(i,d)===!1&&c.preventDefault();if(c.type=o,!(f||c.isDefaultPrevented()||k._default&&k._default.apply(e.ownerDocument,d)!==!1||"click"===o&&ib.nodeName(e,"a")||!ib.acceptData(e)||!h||!e[o]||ib.isWindow(e))){l=e[h],l&&(e[h]=null),ib.event.triggered=o;try{e[o]()}catch(q){}ib.event.triggered=b,l&&(e[h]=l)}return c.result}},dispatch:function(a){a=ib.event.fix(a);var c,d,e,f,g,h=[],i=db.call(arguments),j=(ib._data(this,"events")||{})[a.type]||[],k=ib.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=ib.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,d=((ib.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),d!==b&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(j.disabled!==!0||"click"!==a.type)){for(f=[],g=0;i>g;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?ib(d,this).index(j)>=0:ib.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return c.length>i&&h.push({elem:this,handlers:c.slice(i)}),h},fix:function(a){if(a[ib.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Mb.test(e)?this.mouseHooks:Lb.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ib.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||W),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(e=a.target.ownerDocument||W,f=e.documentElement,d=e.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},click:{trigger:function(){return ib.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):b}},focus:{trigger:function(){if(this!==W.activeElement&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===W.activeElement&&this.blur?(this.blur(),!1):b},delegateType:"focusout"},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ib.extend(new ib.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ib.event.trigger(e,null,b):ib.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ib.removeEvent=W.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===V&&(a[d]=null),a.detachEvent(d,c))},ib.Event=function(a,c){return this instanceof ib.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?i:j):this.type=a,c&&ib.extend(this,c),this.timeStamp=a&&a.timeStamp||ib.now(),this[ib.expando]=!0,b):new ib.Event(a,c)},ib.Event.prototype={isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=i,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=i,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},ib.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){ib.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ib.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ib.support.submitBubbles||(ib.event.special.submit={setup:function(){return ib.nodeName(this,"form")?!1:(ib.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=ib.nodeName(c,"input")||ib.nodeName(c,"button")?c.form:b;d&&!ib._data(d,"submitBubbles")&&(ib.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),ib._data(d,"submitBubbles",!0))}),b)},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ib.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return ib.nodeName(this,"form")?!1:(ib.event.remove(this,"._submit"),b)}}),ib.support.changeBubbles||(ib.event.special.change={setup:function(){return Kb.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ib.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ib.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ib.event.simulate("change",this,a,!0)})),!1):(ib.event.add(this,"beforeactivate._change",function(a){var b=a.target;Kb.test(b.nodeName)&&!ib._data(b,"changeBubbles")&&(ib.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ib.event.simulate("change",this.parentNode,a,!0)}),ib._data(b,"changeBubbles",!0))}),b)},handle:function(a){var c=a.target;return this!==c||a.isSimulated||a.isTrigger||"radio"!==c.type&&"checkbox"!==c.type?a.handleObj.handler.apply(this,arguments):b},teardown:function(){return ib.event.remove(this,"._change"),!Kb.test(this.nodeName)}}),ib.support.focusinBubbles||ib.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){ib.event.simulate(b,a.target,ib.event.fix(a),!0)};ib.event.special[b]={setup:function(){0===c++&&W.addEventListener(a,d,!0)},teardown:function(){0===--c&&W.removeEventListener(a,d,!0)}}}),ib.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=j;else if(!e)return this;return 1===f&&(h=e,e=function(a){return ib().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=ib.guid++)),this.each(function(){ib.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,ib(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=j),this.each(function(){ib.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){ib.event.trigger(a,b,this)})},triggerHandler:function(a,c){var d=this[0];return d?ib.event.trigger(a,c,d,!0):b}}),function(a,b){function c(a){return ob.test(a+"")}function d(){var a,b=[];return a=function(c,d){return b.push(c+=" ")>y.cacheLength&&delete a[b.shift()],a[c]=d}}function e(a){return a[N]=!0,a}function f(a){var b=F.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}}function g(a,b,c,d){var e,f,g,h,i,j,k,n,o,p;if((b?b.ownerDocument||b:O)!==F&&E(b),b=b||F,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(!H&&!d){if(e=pb.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&L(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return Z.apply(c,$.call(b.getElementsByTagName(a),0)),c;if((g=e[3])&&P.getByClassName&&b.getElementsByClassName)return Z.apply(c,$.call(b.getElementsByClassName(g),0)),c}if(P.qsa&&!I.test(a)){if(k=!0,n=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=l(a),(k=b.getAttribute("id"))?n=k.replace(sb,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=nb.test(a)&&b.parentNode||b,p=j.join(",")}if(p)try{return Z.apply(c,$.call(o.querySelectorAll(p),0)),c}catch(q){}finally{k||b.removeAttribute("id")}}}return u(a.replace(gb,"$1"),b,c,d)}function h(a,b){var c=b&&a,d=c&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a,b){var c,d,e,f,h,i,j,k=T[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=y.preFilter;h;){(!c||(d=hb.exec(h)))&&(d&&(h=h.slice(d[0].length)||h),i.push(e=[])),c=!1,(d=jb.exec(h))&&(c=d.shift(),e.push({value:c,type:d[0].replace(gb," ")}),h=h.slice(c.length));for(f in y.filter)!(d=mb[f].exec(h))||j[f]&&!(d=j[f](d))||(c=d.shift(),e.push({value:c,type:f,matches:d}),h=h.slice(c.length));if(!c)break}return b?h.length:h?g.error(a):T(a,i).slice(0)}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=R++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=Q+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[N]||(b[N]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===x)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||x,i[1]===!0)return!0}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function q(a,b,c,d,f,g){return d&&!d[N]&&(d=q(d)),f&&!f[N]&&(f=q(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,q=e||t(b||"*",h.nodeType?[h]:h,[]),r=!a||!e&&b?q:p(q,m,a,h,i),s=c?f||(e?a:o||d)?[]:g:r;if(c&&c(r,s,h,i),d)for(j=p(s,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?_.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else s=p(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):Z.apply(g,s)})}function r(a){for(var b,c,d,e=a.length,f=y.relative[a[0].type],g=f||y.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return _.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=y.relative[a[h].type])k=[n(o(k),c)];else{if(c=y.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!y.relative[a[d].type];d++);return q(h>1&&o(k),h>1&&m(a.slice(0,h-1)).replace(gb,"$1"),c,d>h&&r(a.slice(h,d)),e>d&&r(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function s(a,b){var c=0,d=b.length>0,f=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],q=0,r="0",s=e&&[],t=null!=k,u=D,v=e||f&&y.find.TAG("*",k&&h.parentNode||h),w=Q+=null==u?1:Math.random()||.1;for(t&&(D=h!==F&&h,x=c);null!=(l=v[r]);r++){if(f&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}t&&(Q=w,x=++c)}d&&((l=!n&&l)&&q--,e&&s.push(l))}if(q+=r,d&&r!==q){for(m=0;n=b[m++];)n(s,o,h,i);if(e){if(q>0)for(;r--;)s[r]||o[r]||(o[r]=Y.call(j));o=p(o)}Z.apply(j,o),t&&!e&&o.length>0&&q+b.length>1&&g.uniqueSort(j)}return t&&(Q=w,D=u),s};return d?e(h):h}function t(a,b,c){for(var d=0,e=b.length;e>d;d++)g(a,b[d],c);return c}function u(a,b,c,d){var e,f,g,h,i,j=l(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&!H&&y.relative[f[1].type]){if(b=y.find.ID(g.matches[0].replace(ub,vb),b)[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=mb.needsContext.test(a)?0:f.length;e--&&(g=f[e],!y.relative[h=g.type]);)if((i=y.find[h])&&(d=i(g.matches[0].replace(ub,vb),nb.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return Z.apply(c,$.call(d,0)),c;break}}return B(a,j)(d,b,H,c,nb.test(a)),c}function v(){}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P={},Q=0,R=0,S=d(),T=d(),U=d(),V=typeof b,W=1<<31,X=[],Y=X.pop,Z=X.push,$=X.slice,_=X.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},ab="[\\x20\\t\\r\\n\\f]",bb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",cb=bb.replace("w","w#"),db="([*^$|!~]?=)",eb="\\["+ab+"*("+bb+")"+ab+"*(?:"+db+ab+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+cb+")|)|)"+ab+"*\\]",fb=":("+bb+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+eb.replace(3,8)+")*)|.*)\\)|)",gb=RegExp("^"+ab+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ab+"+$","g"),hb=RegExp("^"+ab+"*,"+ab+"*"),jb=RegExp("^"+ab+"*([\\x20\\t\\r\\n\\f>+~])"+ab+"*"),kb=RegExp(fb),lb=RegExp("^"+cb+"$"),mb={ID:RegExp("^#("+bb+")"),CLASS:RegExp("^\\.("+bb+")"),NAME:RegExp("^\\[name=['\"]?("+bb+")['\"]?\\]"),TAG:RegExp("^("+bb.replace("w","w*")+")"),ATTR:RegExp("^"+eb),PSEUDO:RegExp("^"+fb),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ab+"*(even|odd|(([+-]|)(\\d*)n|)"+ab+"*(?:([+-]|)"+ab+"*(\\d+)|))"+ab+"*\\)|)","i"),needsContext:RegExp("^"+ab+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ab+"*((?:-\\d)?\\d*)"+ab+"*\\)|)(?=[^-]|$)","i")},nb=/[\x20\t\r\n\f]*[+~]/,ob=/^[^{]+\{\s*\[native code/,pb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qb=/^(?:input|select|textarea|button)$/i,rb=/^h\d$/i,sb=/'|\\/g,tb=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,ub=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,vb=function(a,b){var c="0x"+b-65536;return c!==c?b:0>c?String.fromCharCode(c+65536):String.fromCharCode(55296|c>>10,56320|1023&c)};try{$.call(O.documentElement.childNodes,0)[0].nodeType}catch(wb){$=function(a){for(var b,c=[];b=this[a++];)c.push(b);return c}}A=g.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},E=g.setDocument=function(a){var d=a?a.ownerDocument||a:O;return d!==F&&9===d.nodeType&&d.documentElement?(F=d,G=d.documentElement,H=A(d),P.tagNameNoComments=f(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),P.attributes=f(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),P.getByClassName=f(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&a.getElementsByClassName("e").length?(a.lastChild.className="e",2===a.getElementsByClassName("e").length):!1}),P.getByName=f(function(a){a.id=N+0,a.innerHTML="<a name='"+N+"'></a><div name='"+N+"'></div>",G.insertBefore(a,G.firstChild);var b=d.getElementsByName&&d.getElementsByName(N).length===2+d.getElementsByName(N+0).length;return P.getIdNotName=!d.getElementById(N),G.removeChild(a),b}),y.attrHandle=f(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==V&&"#"===a.firstChild.getAttribute("href")})?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},P.getIdNotName?(y.find.ID=function(a,b){if(typeof b.getElementById!==V&&!H){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},y.filter.ID=function(a){var b=a.replace(ub,vb);return function(a){return a.getAttribute("id")===b}}):(y.find.ID=function(a,c){if(typeof c.getElementById!==V&&!H){var d=c.getElementById(a);return d?d.id===a||typeof d.getAttributeNode!==V&&d.getAttributeNode("id").value===a?[d]:b:[]}},y.filter.ID=function(a){var b=a.replace(ub,vb);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),y.find.TAG=P.tagNameNoComments?function(a,c){return typeof c.getElementsByTagName!==V?c.getElementsByTagName(a):b}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},y.find.NAME=P.getByName&&function(a,c){return typeof c.getElementsByName!==V?c.getElementsByName(name):b},y.find.CLASS=P.getByClassName&&function(a,c){return typeof c.getElementsByClassName===V||H?b:c.getElementsByClassName(a)},J=[],I=[":focus"],(P.qsa=c(d.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||I.push("\\["+ab+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||I.push(":checked")}),f(function(a){a.innerHTML="<input type='hidden' i=''/>",a.querySelectorAll("[i^='']").length&&I.push("[*^$]="+ab+"*(?:\"\"|'')"),a.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),I.push(",.*:")})),(P.matchesSelector=c(K=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector))&&f(function(a){P.disconnectedMatch=K.call(a,"div"),K.call(a,"[s!='']:x"),J.push("!=",fb)}),I=RegExp(I.join("|")),J=RegExp(J.join("|")),L=c(G.contains)||G.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},M=G.compareDocumentPosition?function(a,b){var c;return a===b?(C=!0,0):(c=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b))?1&c||a.parentNode&&11===a.parentNode.nodeType?a===d||L(O,a)?-1:b===d||L(O,b)?1:0:4&c?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var c,e=0,f=a.parentNode,g=b.parentNode,i=[a],j=[b];if(a===b)return C=!0,0;if(!f||!g)return a===d?-1:b===d?1:f?-1:g?1:0;if(f===g)return h(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?h(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},C=!1,[0,0].sort(M),P.detectDuplicates=C,F):F},g.matches=function(a,b){return g(a,null,null,b)},g.matchesSelector=function(a,b){if((a.ownerDocument||a)!==F&&E(a),b=b.replace(tb,"='$1']"),!(!P.matchesSelector||H||J&&J.test(b)||I.test(b)))try{var c=K.call(a,b);if(c||P.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return g(b,F,null,[a]).length>0},g.contains=function(a,b){return(a.ownerDocument||a)!==F&&E(a),L(a,b)},g.attr=function(a,b){var c;return(a.ownerDocument||a)!==F&&E(a),H||(b=b.toLowerCase()),(c=y.attrHandle[b])?c(a):H||P.attributes?a.getAttribute(b):((c=a.getAttributeNode(b))||a.getAttribute(b))&&a[b]===!0?b:c&&c.specified?c.value:null},g.error=function(a){throw Error("Syntax error, unrecognized expression: "+a)},g.uniqueSort=function(a){var b,c=[],d=1,e=0;if(C=!P.detectDuplicates,a.sort(M),C){for(;b=a[d];d++)b===a[d-1]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}return a},z=g.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=z(b);return c},y=g.selectors={cacheLength:50,createPseudo:e,match:mb,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ub,vb),a[3]=(a[4]||a[5]||"").replace(ub,vb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||g.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&g.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return mb.CHILD.test(a[0])?null:(a[4]?a[2]=a[4]:c&&kb.test(c)&&(b=l(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(ub,vb).toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=S[a+" "];return b||(b=RegExp("(^|"+ab+")"+a+"("+ab+"|$)"))&&S(a,function(a){return b.test(a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=g.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===Q&&j[1],m=j[0]===Q&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[Q,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===Q)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[Q,m]),l!==b)););return m-=e,m===d||0===m%d&&m/d>=0}}},PSEUDO:function(a,b){var c,d=y.pseudos[a]||y.setFilters[a.toLowerCase()]||g.error("unsupported pseudo: "+a);return d[N]?d(b):d.length>1?(c=[a,a,"",b],y.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var e,f=d(a,b),g=f.length;g--;)e=_.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:e(function(a){var b=[],c=[],d=B(a.replace(gb,"$1"));return d[N]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:e(function(a){return function(b){return g(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||z(b)).indexOf(a)>-1}}),lang:e(function(a){return lb.test(a||"")||g.error("unsupported lang: "+a),a=a.replace(ub,vb).toLowerCase(),function(b){var c;do if(c=H?b.getAttribute("xml:lang")||b.getAttribute("lang"):b.lang)return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===G},focus:function(a){return a===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!y.pseudos.empty(a)},header:function(a){return rb.test(a.nodeName)},input:function(a){return qb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[0>c?c+b:c]}),even:k(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=0>c?c+b:c;b>++d;)a.push(d);return a})}};for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})y.pseudos[w]=j(w);B=g.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=l(a)),c=b.length;c--;)f=r(b[c]),f[N]?d.push(f):e.push(f);f=U(a,s(e,d))}return f},y.pseudos.nth=y.pseudos.eq,y.filters=v.prototype=y.pseudos,y.setFilters=new v,E(),g.attr=ib.attr,ib.find=g,ib.expr=g.selectors,ib.expr[":"]=ib.expr.pseudos,ib.unique=g.uniqueSort,ib.text=g.getText,ib.isXMLDoc=g.isXML,ib.contains=g.contains}(a);var Pb=/Until$/,Qb=/^(?:parents|prev(?:Until|All))/,Rb=/^.[^:#\[\.,]*$/,Sb=ib.expr.match.needsContext,Tb={children:!0,contents:!0,next:!0,prev:!0};ib.fn.extend({find:function(a){var b,c,d,e=this.length;if("string"!=typeof a)return d=this,this.pushStack(ib(a).filter(function(){for(b=0;e>b;b++)if(ib.contains(d[b],this))return!0}));for(c=[],b=0;e>b;b++)ib.find(a,this[b],c);return c=this.pushStack(e>1?ib.unique(c):c),c.selector=(this.selector?this.selector+" ":"")+a,c},has:function(a){var b,c=ib(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(ib.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(l(this,a,!1))},filter:function(a){return this.pushStack(l(this,a,!0))},is:function(a){return!!a&&("string"==typeof a?Sb.test(a)?ib(a,this.context).index(this[0])>=0:ib.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Sb.test(a)||"string"!=typeof a?ib(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:ib.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return this.pushStack(f.length>1?ib.unique(f):f)},index:function(a){return a?"string"==typeof a?ib.inArray(this[0],ib(a)):ib.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?ib(a,b):ib.makeArray(a&&a.nodeType?[a]:a),d=ib.merge(this.get(),c);return this.pushStack(ib.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ib.fn.andSelf=ib.fn.addBack,ib.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ib.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ib.dir(a,"parentNode",c)},next:function(a){return k(a,"nextSibling")},prev:function(a){return k(a,"previousSibling")},nextAll:function(a){return ib.dir(a,"nextSibling")},prevAll:function(a){return ib.dir(a,"previousSibling")
},nextUntil:function(a,b,c){return ib.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ib.dir(a,"previousSibling",c)},siblings:function(a){return ib.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ib.sibling(a.firstChild)},contents:function(a){return ib.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ib.merge([],a.childNodes)}},function(a,b){ib.fn[a]=function(c,d){var e=ib.map(this,b,c);return Pb.test(a)||(d=c),d&&"string"==typeof d&&(e=ib.filter(d,e)),e=this.length>1&&!Tb[a]?ib.unique(e):e,this.length>1&&Qb.test(a)&&(e=e.reverse()),this.pushStack(e)}}),ib.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?ib.find.matchesSelector(b[0],a)?[b[0]]:[]:ib.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!ib(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ub="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Vb=/ jQuery\d+="(?:null|\d+)"/g,Wb=RegExp("<(?:"+Ub+")[\\s/>]","i"),Xb=/^\s+/,Yb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Zb=/<([\w:]+)/,$b=/<tbody/i,_b=/<|&#?\w+;/,ac=/<(?:script|style|link)/i,bc=/^(?:checkbox|radio)$/i,cc=/checked\s*(?:[^=]|=\s*.checked.)/i,dc=/^$|\/(?:java|ecma)script/i,ec=/^true\/(.*)/,fc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gc={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ib.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},hc=m(W),ic=hc.appendChild(W.createElement("div"));gc.optgroup=gc.option,gc.tbody=gc.tfoot=gc.colgroup=gc.caption=gc.thead,gc.th=gc.td,ib.fn.extend({text:function(a){return ib.access(this,function(a){return a===b?ib.text(this):this.empty().append((this[0]&&this[0].ownerDocument||W).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(ib.isFunction(a))return this.each(function(b){ib(this).wrapAll(a.call(this,b))});if(this[0]){var b=ib(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ib.isFunction(a)?this.each(function(b){ib(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ib(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ib.isFunction(a);return this.each(function(c){ib(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ib.nodeName(this,"body")||ib(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||ib.filter(a,[c]).length>0)&&(b||1!==c.nodeType||ib.cleanData(t(c)),c.parentNode&&(b&&ib.contains(c.ownerDocument,c)&&q(t(c,"script")),c.parentNode.removeChild(c)));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ib.cleanData(t(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ib.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ib.clone(this,a,b)})},html:function(a){return ib.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Vb,""):b;if(!("string"!=typeof a||ac.test(a)||!ib.support.htmlSerialize&&Wb.test(a)||!ib.support.leadingWhitespace&&Xb.test(a)||gc[(Zb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Yb,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&(ib.cleanData(t(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){var b=ib.isFunction(a);return b||"string"==typeof a||(a=ib(a).not(this).detach()),this.domManip([a],!0,function(a){var b=this.nextSibling,c=this.parentNode;c&&(ib(this).remove(),c.insertBefore(a,b))})},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=bb.apply([],a);var e,f,g,h,i,j,k=0,l=this.length,m=this,q=l-1,r=a[0],s=ib.isFunction(r);if(s||!(1>=l||"string"!=typeof r||ib.support.checkClone)&&cc.test(r))return this.each(function(e){var f=m.eq(e);s&&(a[0]=r.call(this,e,c?f.html():b)),f.domManip(a,c,d)});if(l&&(j=ib.buildFragment(a,this[0].ownerDocument,!1,this),e=j.firstChild,1===j.childNodes.length&&(j=e),e)){for(c=c&&ib.nodeName(e,"tr"),h=ib.map(t(j,"script"),o),g=h.length;l>k;k++)f=j,k!==q&&(f=ib.clone(f,!0,!0),g&&ib.merge(h,t(f,"script"))),d.call(c&&ib.nodeName(this[k],"table")?n(this[k],"tbody"):this[k],f,k);if(g)for(i=h[h.length-1].ownerDocument,ib.map(h,p),k=0;g>k;k++)f=h[k],dc.test(f.type||"")&&!ib._data(f,"globalEval")&&ib.contains(i,f)&&(f.src?ib.ajax({url:f.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):ib.globalEval((f.text||f.textContent||f.innerHTML||"").replace(fc,"")));j=e=null}return this}}),ib.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ib.fn[a]=function(a){for(var c,d=0,e=[],f=ib(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),ib(f[d])[b](c),cb.apply(e,c.get());return this.pushStack(e)}}),ib.extend({clone:function(a,b,c){var d,e,f,g,h,i=ib.contains(a.ownerDocument,a);if(ib.support.html5Clone||ib.isXMLDoc(a)||!Wb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ic.innerHTML=a.outerHTML,ic.removeChild(f=ic.firstChild)),!(ib.support.noCloneEvent&&ib.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ib.isXMLDoc(a)))for(d=t(f),h=t(a),g=0;null!=(e=h[g]);++g)d[g]&&s(e,d[g]);if(b)if(c)for(h=h||t(a),d=d||t(f),g=0;null!=(e=h[g]);g++)r(e,d[g]);else r(a,f);return d=t(f,"script"),d.length>0&&q(d,!i&&t(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,n=m(b),o=[],p=0;l>p;p++)if(f=a[p],f||0===f)if("object"===ib.type(f))ib.merge(o,f.nodeType?[f]:f);else if(_b.test(f)){for(h=h||n.appendChild(b.createElement("div")),i=(Zb.exec(f)||["",""])[1].toLowerCase(),k=gc[i]||gc._default,h.innerHTML=k[1]+f.replace(Yb,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ib.support.leadingWhitespace&&Xb.test(f)&&o.push(b.createTextNode(Xb.exec(f)[0])),!ib.support.tbody)for(f="table"!==i||$b.test(f)?"<table>"!==k[1]||$b.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ib.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ib.merge(o,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=n.lastChild}else o.push(b.createTextNode(f));for(h&&n.removeChild(h),ib.support.appendChecked||ib.grep(t(o,"input"),u),p=0;f=o[p++];)if((!d||-1===ib.inArray(f,d))&&(g=ib.contains(f.ownerDocument,f),h=t(n.appendChild(f),"script"),g&&q(h),c))for(e=0;f=h[e++];)dc.test(f.type||"")&&c.push(f);return h=null,n},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ib.expando,i=ib.cache,j=ib.support.deleteExpando,k=ib.event.special;null!=(c=a[g]);g++)if((b||ib.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ib.event.remove(c,d):ib.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==V?c.removeAttribute(h):c[h]=null,_.push(e))}}});var jc,kc,lc,mc=/alpha\([^)]*\)/i,nc=/opacity\s*=\s*([^)]*)/,oc=/^(top|right|bottom|left)$/,pc=/^(none|table(?!-c[ea]).+)/,qc=/^margin/,rc=RegExp("^("+jb+")(.*)$","i"),sc=RegExp("^("+jb+")(?!px)[a-z%]+$","i"),tc=RegExp("^([+-])=("+jb+")","i"),uc={BODY:"block"},vc={position:"absolute",visibility:"hidden",display:"block"},wc={letterSpacing:0,fontWeight:400},xc=["Top","Right","Bottom","Left"],yc=["Webkit","O","Moz","ms"];ib.fn.extend({css:function(a,c){return ib.access(this,function(a,c,d){var e,f,g={},h=0;if(ib.isArray(c)){for(f=kc(a),e=c.length;e>h;h++)g[c[h]]=ib.css(a,c[h],!1,f);return g}return d!==b?ib.style(a,c,d):ib.css(a,c)},a,c,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(a){var b="boolean"==typeof a;return this.each(function(){(b?a:w(this))?ib(this).show():ib(this).hide()})}}),ib.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=lc(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ib.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=ib.camelCase(c),j=a.style;if(c=ib.cssProps[i]||(ib.cssProps[i]=v(j,i)),h=ib.cssHooks[c]||ib.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=tc.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(ib.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||ib.cssNumber[i]||(d+="px"),ib.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=ib.camelCase(c);return c=ib.cssProps[i]||(ib.cssProps[i]=v(a.style,i)),h=ib.cssHooks[c]||ib.cssHooks[i],h&&"get"in h&&(g=h.get(a,!0,d)),g===b&&(g=lc(a,c,e)),"normal"===g&&c in wc&&(g=wc[c]),""===d||d?(f=parseFloat(g),d===!0||ib.isNumeric(f)?f||0:g):g},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),a.getComputedStyle?(kc=function(b){return a.getComputedStyle(b,null)},lc=function(a,c,d){var e,f,g,h=d||kc(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||ib.contains(a.ownerDocument,a)||(i=ib.style(a,c)),sc.test(i)&&qc.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i}):W.documentElement.currentStyle&&(kc=function(a){return a.currentStyle},lc=function(a,c,d){var e,f,g,h=d||kc(a),i=h?h[c]:b,j=a.style;return null==i&&j&&j[c]&&(i=j[c]),sc.test(i)&&!oc.test(c)&&(e=j.left,f=a.runtimeStyle,g=f&&f.left,g&&(f.left=a.currentStyle.left),j.left="fontSize"===c?"1em":i,i=j.pixelLeft+"px",j.left=e,g&&(f.left=g)),""===i?"auto":i}),ib.each(["height","width"],function(a,c){ib.cssHooks[c]={get:function(a,d,e){return d?0===a.offsetWidth&&pc.test(ib.css(a,"display"))?ib.swap(a,vc,function(){return A(a,c,e)}):A(a,c,e):b},set:function(a,b,d){var e=d&&kc(a);return y(a,b,d?z(a,c,d,ib.support.boxSizing&&"border-box"===ib.css(a,"boxSizing",!1,e),e):0)}}}),ib.support.opacity||(ib.cssHooks.opacity={get:function(a,b){return nc.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ib.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ib.trim(f.replace(mc,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=mc.test(f)?f.replace(mc,e):f+" "+e)}}),ib(function(){ib.support.reliableMarginRight||(ib.cssHooks.marginRight={get:function(a,c){return c?ib.swap(a,{display:"inline-block"},lc,[a,"marginRight"]):b}}),!ib.support.pixelPosition&&ib.fn.position&&ib.each(["top","left"],function(a,c){ib.cssHooks[c]={get:function(a,d){return d?(d=lc(a,c),sc.test(d)?ib(a).position()[c]+"px":d):b}}})}),ib.expr&&ib.expr.filters&&(ib.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!ib.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ib.css(a,"display"))},ib.expr.filters.visible=function(a){return!ib.expr.filters.hidden(a)}),ib.each({margin:"",padding:"",border:"Width"},function(a,b){ib.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+xc[d]+b]=f[d]||f[d-2]||f[0];return e}},qc.test(a)||(ib.cssHooks[a+b].set=y)});var zc=/%20/g,Ac=/\[\]$/,Bc=/\r?\n/g,Cc=/^(?:submit|button|image|reset|file)$/i,Dc=/^(?:input|select|textarea|keygen)/i;ib.fn.extend({serialize:function(){return ib.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ib.prop(this,"elements");return a?ib.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ib(this).is(":disabled")&&Dc.test(this.nodeName)&&!Cc.test(a)&&(this.checked||!bc.test(a))}).map(function(a,b){var c=ib(this).val();return null==c?null:ib.isArray(c)?ib.map(c,function(a){return{name:b.name,value:a.replace(Bc,"\r\n")}}):{name:b.name,value:c.replace(Bc,"\r\n")}}).get()}}),ib.param=function(a,c){var d,e=[],f=function(a,b){b=ib.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=ib.ajaxSettings&&ib.ajaxSettings.traditional),ib.isArray(a)||a.jquery&&!ib.isPlainObject(a))ib.each(a,function(){f(this.name,this.value)});else for(d in a)D(d,a[d],c,f);return e.join("&").replace(zc,"+")},ib.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ib.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ib.fn.hover=function(a,b){return this.mouseenter(a).mouseleave(b||a)};var Ec,Fc,Gc=ib.now(),Hc=/\?/,Ic=/#.*$/,Jc=/([?&])_=[^&]*/,Kc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Lc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mc=/^(?:GET|HEAD)$/,Nc=/^\/\//,Oc=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pc=ib.fn.load,Qc={},Rc={},Sc="*/".concat("*");try{Fc=X.href}catch(Tc){Fc=W.createElement("a"),Fc.href="",Fc=Fc.href}Ec=Oc.exec(Fc.toLowerCase())||[],ib.fn.load=function(a,c,d){if("string"!=typeof a&&Pc)return Pc.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),ib.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(g="POST"),h.length>0&&ib.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments,h.html(e?ib("<div>").append(ib.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},ib.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ib.fn[b]=function(a){return this.on(b,a)}}),ib.each(["get","post"],function(a,c){ib[c]=function(a,d,e,f){return ib.isFunction(d)&&(f=f||e,e=d,d=b),ib.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),ib.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fc,type:"GET",isLocal:Lc.test(Ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":ib.parseJSON,"text xml":ib.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?G(G(a,ib.ajaxSettings),b):G(ib.ajaxSettings,a)},ajaxPrefilter:E(Qc),ajaxTransport:E(Rc),ajax:function(a,c){function d(a,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),k=b,h=e||"",w.readyState=a>0?4:0,d&&(t=H(m,w,d)),a>=200&&300>a||304===a?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(ib.lastModified[g]=v),v=w.getResponseHeader("etag"),v&&(ib.etag[g]=v)),204===a?(f=!0,x="nocontent"):304===a?(f=!0,x="notmodified"):(f=I(m,t),x=f.state,l=f.data,s=f.error,f=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--ib.active||ib.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=ib.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?ib(n):ib.event,p=ib.Deferred(),q=ib.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Kc.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||Fc)+"").replace(Ic,"").replace(Nc,Ec[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=ib.trim(m.dataType||"*").toLowerCase().match(kb)||[""],null==m.crossDomain&&(e=Oc.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===Ec[1]&&e[2]===Ec[2]&&(e[3]||("http:"===e[1]?80:443))==(Ec[3]||("http:"===Ec[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ib.param(m.data,m.traditional)),F(Qc,m,c,w),2===u)return w;j=m.global,j&&0===ib.active++&&ib.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Mc.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Hc.test(g)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Jc.test(g)?g.replace(Jc,"$1_="+Gc++):g+(Hc.test(g)?"&":"?")+"_="+Gc++)),m.ifModified&&(ib.lastModified[g]&&w.setRequestHeader("If-Modified-Since",ib.lastModified[g]),ib.etag[g]&&w.setRequestHeader("If-None-Match",ib.etag[g])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Sc+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=F(Rc,m,c,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getScript:function(a,c){return ib.get(a,b,c,"script")},getJSON:function(a,b,c){return ib.get(a,b,c,"json")}}),ib.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ib.globalEval(a),a}}}),ib.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ib.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=W.head||ib("head")[0]||W.documentElement;return{send:function(b,e){c=W.createElement("script"),c.async=!0,a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,b){(b||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(b,!0)}}}});var Uc=[],Vc=/(=)\?(?=&|$)|\?\?/;ib.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Uc.pop()||ib.expando+"_"+Gc++;return this[a]=!0,a}}),ib.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(Vc.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vc.test(c.data)&&"data");return i||"jsonp"===c.dataTypes[0]?(f=c.jsonpCallback=ib.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(Vc,"$1"+f):c.jsonp!==!1&&(c.url+=(Hc.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||ib.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Uc.push(f)),h&&ib.isFunction(g)&&g(h[0]),h=g=b}),"script"):b});var Wc,Xc,Yc=0,Zc=a.ActiveXObject&&function(){var a;for(a in Wc)Wc[a](b,!0)};ib.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&J()||K()}:J,Xc=ib.ajaxSettings.xhr(),ib.support.cors=!!Xc&&"withCredentials"in Xc,Xc=ib.support.ajax=!!Xc,Xc&&ib.ajaxTransport(function(c){if(!c.crossDomain||ib.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=ib.noop,Zc&&delete Wc[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(m){k=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,k,l,j)},c.async?4===i.readyState?setTimeout(d):(g=++Yc,Zc&&(Wc||(Wc={},ib(a).unload(Zc)),Wc[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var $c,_c,ad=/^(?:toggle|show|hide)$/,bd=RegExp("^(?:([+-])=|)("+jb+")([a-z%]*)$","i"),cd=/queueHooks$/,dd=[P],ed={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=bd.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){if(c=+f[2],d=f[3]||(ib.cssNumber[a]?"":"px"),"px"!==d&&h){h=ib.css(e.elem,a,!0)||c||1;do i=i||".5",h/=i,ib.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&1!==i&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};ib.Animation=ib.extend(N,{tweener:function(a,b){ib.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ed[c]=ed[c]||[],ed[c].unshift(b)},prefilter:function(a,b){b?dd.unshift(a):dd.push(a)}}),ib.Tween=Q,Q.prototype={constructor:Q,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ib.cssNumber[c]?"":"px")},cur:function(){var a=Q.propHooks[this.prop];return a&&a.get?a.get(this):Q.propHooks._default.get(this)},run:function(a){var b,c=Q.propHooks[this.prop];return this.pos=b=this.options.duration?ib.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Q.propHooks._default.set(this),this}},Q.prototype.init.prototype=Q.prototype,Q.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ib.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ib.fx.step[a.prop]?ib.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ib.cssProps[a.prop]]||ib.cssHooks[a.prop])?ib.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Q.propHooks.scrollTop=Q.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ib.each(["toggle","show","hide"],function(a,b){var c=ib.fn[b];ib.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(R(b,!0),a,d,e)}}),ib.fn.extend({fadeTo:function(a,b,c,d){return this.filter(w).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ib.isEmptyObject(a),f=ib.speed(b,c,d),g=function(){var b=N(this,ib.extend({},a),f);g.finish=function(){b.stop(!0)},(e||ib._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=ib.timers,g=ib._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cd.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&ib.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ib._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ib.timers,g=d?d.length:0;for(c.finish=!0,ib.queue(this,a,[]),e&&e.cur&&e.cur.finish&&e.cur.finish.call(this),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ib.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ib.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ib.speed=function(a,b,c){var d=a&&"object"==typeof a?ib.extend({},a):{complete:c||!c&&b||ib.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ib.isFunction(b)&&b};return d.duration=ib.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ib.fx.speeds?ib.fx.speeds[d.duration]:ib.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ib.isFunction(d.old)&&d.old.call(this),d.queue&&ib.dequeue(this,d.queue)},d},ib.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ib.timers=[],ib.fx=Q.prototype.init,ib.fx.tick=function(){var a,c=ib.timers,d=0;for($c=ib.now();c.length>d;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||ib.fx.stop(),$c=b},ib.fx.timer=function(a){a()&&ib.timers.push(a)&&ib.fx.start()},ib.fx.interval=13,ib.fx.start=function(){_c||(_c=setInterval(ib.fx.tick,ib.fx.interval))},ib.fx.stop=function(){clearInterval(_c),_c=null},ib.fx.speeds={slow:600,fast:200,_default:400},ib.fx.step={},ib.expr&&ib.expr.filters&&(ib.expr.filters.animated=function(a){return ib.grep(ib.timers,function(b){return a===b.elem}).length}),ib.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){ib.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;return g?(c=g.documentElement,ib.contains(c,f)?(typeof f.getBoundingClientRect!==V&&(e=f.getBoundingClientRect()),d=S(g),{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}):e):void 0},ib.offset={setOffset:function(a,b,c){var d=ib.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=ib(a),h=g.offset(),i=ib.css(a,"top"),j=ib.css(a,"left"),k=("absolute"===d||"fixed"===d)&&ib.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),ib.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},ib.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ib.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ib.nodeName(a[0],"html")||(c=a.offset()),c.top+=ib.css(a[0],"borderTopWidth",!0),c.left+=ib.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ib.css(d,"marginTop",!0),left:b.left-c.left-ib.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||W.documentElement;a&&!ib.nodeName(a,"html")&&"static"===ib.css(a,"position");)a=a.offsetParent;return a||W.documentElement})}}),ib.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);ib.fn[a]=function(e){return ib.access(this,function(a,e,f){var g=S(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:(g?g.scrollTo(d?ib(g).scrollLeft():f,d?f:ib(g).scrollTop()):a[e]=f,b)},a,e,arguments.length,null)}}),ib.each({Height:"height",Width:"width"},function(a,c){ib.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){ib.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return ib.access(this,function(c,d,e){var f;return ib.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?ib.css(c,d,h):ib.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=ib,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return ib})}(window);;!function(a){function b(a,b){return a.currentStyle&&a.currentStyle[b]||a.style[b]}function c(a){var c=$(a).css("clip")||"";if(!c){var d={top:b(a,"clipTop"),right:b(a,"clipRight"),bottom:b(a,"clipBottom"),left:b(a,"clipLeft")};d.top&&d.right&&d.bottom&&d.left&&(c="rect("+d.top+" "+d.right+" "+d.bottom+" "+d.left+")")}return c.replace(/,/g," ")}a.fx.step.clip=function(a){if(0===a.pos){var b=/rect\(([0-9\.]{1,})(px|em)[,]?\s+([0-9\.]{1,})(px|em)[,]?\s+([0-9\.]{1,})(px|em)[,]?\s+([0-9\.]{1,})(px|em)\)/;a.start=b.exec(c(a.elem)),"string"==typeof a.end&&(a.end=b.exec(a.end.replace(/,/g," ")))}if(a.start&&a.end){for(var d=new Array,e=new Array,f=a.start.length,g=a.end.length,h="em"==a.start[i+1]?1.333*parseInt($(a.elem).css("fontSize"))*parseInt(a.start[i]):1,i=1;f>i;i+=2)d.push(parseInt(h*a.start[i]));for(var j=1;g>j;j+=2)e.push(parseInt(h*a.end[j]));a.elem.style.clip="rect("+parseInt(a.pos*(e[0]-d[0])+d[0])+"px "+parseInt(a.pos*(e[1]-d[1])+d[1])+"px "+parseInt(a.pos*(e[2]-d[2])+d[2])+"px "+parseInt(a.pos*(e[3]-d[3])+d[3])+"px)"}}}(jQuery);;!function(a){a(function(){a.support.transition=function(){var a=function(){var a,b=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]}();return a&&{end:a}}()})}(window.jQuery),!function(a){var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault(),b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]!==a.target&&!b.$element.has(a.target).length&&b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),"object"==typeof c&&c);e||d.data("modal",e=new b(this,f)),"string"==typeof c?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),!function(a){var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c,d=a.fn[this.type].defaults,e={};return this._options&&a.each(this._options,function(a,b){d[a]!=b&&(e[a]=b)},this),c=a(b.currentTarget)[this.type](e).data(this.type),c.options.delay&&c.options.delay.show?(clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show()},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide),void 0):c.hide()},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),h.isDefaultPrevented())return;switch(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight;g.offset(a).addClass(b).addClass("in"),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.offset(a),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),f&&g.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip(),d=a.Event("hide");return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),!function(a){var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=("function"==typeof c.content?c.content.call(b[0]):c.content)||b.attr("data-content")},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f="object"==typeof c&&c;e||d.data("popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),!function(a){var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){d.trigger("closed").remove()}var d,e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,"")),d=a(f),b&&b.preventDefault(),d.length||(d=e.hasClass("alert")?e:e.parent()),d.trigger(b=a.Event("close")),b.isDefaultPrevented()||(d.removeClass("in"),a.support.transition&&d.hasClass("fade")?d.on(a.support.transition.end,c):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f="object"==typeof c&&c;e||d.data("button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery);;var SwipeView=function(a,b){function c(a){return""===e?a:(a=a.charAt(0).toUpperCase()+a.substr(1),e+a)}var d=b.createElement("div").style,e=function(){for(var a,b="t,webkitT,MozT,msT,OT".split(","),c=0,e=b.length;e>c;c++)if(a=b[c]+"ransform",a in d)return b[c].substr(0,b[c].length-1);return!1}(),f=e?"-"+e.toLowerCase()+"-":"",g=c("transform"),h=c("transitionDuration"),i=c("perspective")in d,j="ontouchstart"in a,k=(c("transition")in d,i?" translateZ(0)":""),l="onorientationchange"in a?"orientationchange":"resize",m=j?"touchstart":"mousedown",n=j?"touchmove":"mousemove",o=j?"touchend":"mouseup",p=j?"touchcancel":"mouseup",q=function(){if(e===!1)return!1;var a={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"};return a[e]}(),r=function(c,d){var g,h,i,j;this.wrapper="string"==typeof c?b.querySelector(c):c,this.options={text:null,numberOfPages:3,snapThreshold:null,hastyPageFlip:!1,loop:!0};for(g in d)this.options[g]=d[g];for(this.wrapper.style.overflow="hidden",this.wrapper.style.position="relative",this.masterPages=[],h=b.createElement("div"),h.id="swipeview-slider",h.style.cssText="position:relative;top:0;height:100%;width:100%;"+f+"transition-duration:0;"+f+"transform:translateZ(0);"+f+"transition-timing-function:ease-out",this.wrapper.appendChild(h),this.slider=h,this.refreshSize(),g=-1;2>g;g++)h=b.createElement("div"),h.id="swipeview-masterpage-"+(g+1),h.style.cssText=f+"transform:translateZ(0);position:absolute;top:0;height:100%;width:100%;left:"+100*g+"%",h.dataset||(h.dataset={}),j=-1==g?this.options.numberOfPages-1:g,h.dataset.pageIndex=j,h.dataset.upcomingPageIndex=j,this.options.loop||-1!=g||(h.style.visibility="hidden"),this.slider.appendChild(h),this.masterPages.push(h);i=this.masterPages[1].className,this.masterPages[1].className=i?i+" swipeview-active":"swipeview-active",a.addEventListener(l,this,!1),this.wrapper.addEventListener(m,this,!1),this.wrapper.addEventListener(n,this,!1),this.wrapper.addEventListener(o,this,!1),this.slider.addEventListener(q,this,!1),"O"==e&&this.slider.addEventListener(q.toLowerCase(),this,!1)};return r.prototype={currentMasterPage:1,x:0,page:0,pageIndex:0,customEvents:[],onFlip:function(a){this.wrapper.addEventListener("swipeview-flip",a,!1),this.customEvents.push(["flip",a])},onMoveOut:function(a){this.wrapper.addEventListener("swipeview-moveout",a,!1),this.customEvents.push(["moveout",a])},onMoveIn:function(a){this.wrapper.addEventListener("swipeview-movein",a,!1),this.customEvents.push(["movein",a])},onTouchStart:function(a){this.wrapper.addEventListener("swipeview-touchstart",a,!1),this.customEvents.push(["touchstart",a])},destroy:function(){for(;this.customEvents.length;)this.wrapper.removeEventListener("swipeview-"+this.customEvents[0][0],this.customEvents[0][1],!1),this.customEvents.shift();a.removeEventListener(l,this,!1),this.wrapper.removeEventListener(m,this,!1),this.wrapper.removeEventListener(n,this,!1),this.wrapper.removeEventListener(o,this,!1),this.slider.removeEventListener(q,this,!1)},refreshSize:function(){this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.pageWidth=this.wrapperWidth,this.maxX=-this.options.numberOfPages*this.pageWidth+this.wrapperWidth,this.snapThreshold=null===this.options.snapThreshold?Math.round(.15*this.pageWidth):/%/.test(this.options.snapThreshold)?Math.round(this.pageWidth*this.options.snapThreshold.replace("%","")/100):this.options.snapThreshold},updatePageCount:function(a){this.options.numberOfPages=a,this.maxX=-this.options.numberOfPages*this.pageWidth+this.wrapperWidth},goToPage:function(a){var b;for(this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/,""),b=0;3>b;b++)className=this.masterPages[b].className,/(^|\s)swipeview-loading(\s|$)/.test(className)||(this.masterPages[b].className=className?className+" swipeview-loading":"swipeview-loading");a=0>a?0:a>this.options.numberOfPages-1?this.options.numberOfPages-1:a,this.page=a,this.pageIndex=a,this.slider.style[h]="0s",this.__pos(-a*this.pageWidth),this.currentMasterPage=this.page+1-3*Math.floor((this.page+1)/3),this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className+" swipeview-active",0===this.currentMasterPage?(this.masterPages[2].style.left=100*this.page-100+"%",this.masterPages[0].style.left=100*this.page+"%",this.masterPages[1].style.left=100*this.page+100+"%",this.masterPages[2].dataset.upcomingPageIndex=0===this.page?this.options.numberOfPages-1:this.page-1,this.masterPages[0].dataset.upcomingPageIndex=this.page,this.masterPages[1].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1):1==this.currentMasterPage?(this.masterPages[0].style.left=100*this.page-100+"%",this.masterPages[1].style.left=100*this.page+"%",this.masterPages[2].style.left=100*this.page+100+"%",this.masterPages[0].dataset.upcomingPageIndex=0===this.page?this.options.numberOfPages-1:this.page-1,this.masterPages[1].dataset.upcomingPageIndex=this.page,this.masterPages[2].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1):(this.masterPages[1].style.left=100*this.page-100+"%",this.masterPages[2].style.left=100*this.page+"%",this.masterPages[0].style.left=100*this.page+100+"%",this.masterPages[1].dataset.upcomingPageIndex=0===this.page?this.options.numberOfPages-1:this.page-1,this.masterPages[2].dataset.upcomingPageIndex=this.page,this.masterPages[0].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1),this.__flip()},next:function(){(this.options.loop||this.x!=this.maxX)&&(this.directionX=-1,this.x-=1,this.__checkPosition())},prev:function(){(this.options.loop||0!==this.x)&&(this.directionX=1,this.x+=1,this.__checkPosition())},handleEvent:function(a){switch(a.type){case m:this.__start(a);break;case n:this.__move(a);break;case p:case o:this.__end(a);break;case l:this.__resize();break;case q:case"otransitionend":a.target!=this.slider||this.options.hastyPageFlip||this.__flip()}},__pos:function(a){this.x=a,this.slider.style[g]="translate("+a+"px,0)"+k},__resize:function(){this.refreshSize(),this.slider.style[h]="0s",this.__pos(-this.page*this.pageWidth)},__start:function(a){if(!this.initiated){var b=j?a.touches[0]:a;this.initiated=!0,this.moved=!1,this.thresholdExceeded=!1,this.startX=b.pageX,this.startY=b.pageY,this.pointX=b.pageX,this.pointY=b.pageY,this.stepsX=0,this.stepsY=0,this.directionX=0,this.directionLocked=!1,this.slider.style[h]="0s",this.__event("touchstart")}},__move:function(a){if(this.initiated){var b=j?a.touches[0]:a,c=b.pageX-this.pointX,d=b.pageY-this.pointY,e=this.x+c,f=Math.abs(b.pageX-this.startX);if(this.moved=!0,this.pointX=b.pageX,this.pointY=b.pageY,this.directionX=c>0?1:0>c?-1:0,this.stepsX+=Math.abs(c),this.stepsY+=Math.abs(d),!(this.stepsX<10&&this.stepsY<10)){if(!this.directionLocked&&this.stepsY>this.stepsX)return this.initiated=!1,void 0;a.preventDefault(),this.directionLocked=!0,!this.options.loop&&(e>0||e<this.maxX)&&(e=this.x+c/2),!this.thresholdExceeded&&f>=this.snapThreshold?(this.thresholdExceeded=!0,this.__event("moveout")):this.thresholdExceeded&&f<this.snapThreshold&&(this.thresholdExceeded=!1,this.__event("movein")),this.__pos(e)}}},__end:function(a){if(this.initiated){var b=j?a.changedTouches[0]:a,c=Math.abs(b.pageX-this.startX);if(this.initiated=!1,this.moved)return!this.options.loop&&(this.x>0||this.x<this.maxX)&&(c=0,this.__event("movein")),c<this.snapThreshold?(this.slider.style[h]=Math.floor(300*c/this.snapThreshold)+"ms",this.__pos(-this.page*this.pageWidth),void 0):(this.__checkPosition(),void 0)}},__checkPosition:function(){var a,b,c;this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/,""),this.directionX>0?(this.page=-Math.ceil(this.x/this.pageWidth),this.currentMasterPage=this.page+1-3*Math.floor((this.page+1)/3),this.pageIndex=0===this.pageIndex?this.options.numberOfPages-1:this.pageIndex-1,a=this.currentMasterPage-1,a=0>a?2:a,this.masterPages[a].style.left=100*this.page-100+"%",b=this.page-1):(this.page=-Math.floor(this.x/this.pageWidth),this.currentMasterPage=this.page+1-3*Math.floor((this.page+1)/3),this.pageIndex=this.pageIndex==this.options.numberOfPages-1?0:this.pageIndex+1,a=this.currentMasterPage+1,a=a>2?0:a,this.masterPages[a].style.left=100*this.page+100+"%",b=this.page+1),c=this.masterPages[this.currentMasterPage].className,/(^|\s)swipeview-active(\s|$)/.test(c)||(this.masterPages[this.currentMasterPage].className=c?c+" swipeview-active":"swipeview-active"),c=this.masterPages[a].className,/(^|\s)swipeview-loading(\s|$)/.test(c)||(this.masterPages[a].className=c?c+" swipeview-loading":"swipeview-loading"),b-=Math.floor(b/this.options.numberOfPages)*this.options.numberOfPages,this.masterPages[a].dataset.upcomingPageIndex=b,newX=-this.page*this.pageWidth,this.slider.style[h]=Math.floor(500*Math.abs(this.x-newX)/this.pageWidth)+"ms",this.options.loop||(this.masterPages[a].style.visibility=0===newX||newX==this.maxX?"hidden":""),this.x==newX?this.__flip():(this.__pos(newX),this.options.hastyPageFlip&&this.__flip())},__flip:function(){this.__event("flip");for(var a=0;3>a;a++)this.masterPages[a].className=this.masterPages[a].className.replace(/(^|\s)swipeview-loading(\s|$)/,""),this.masterPages[a].dataset.pageIndex=this.masterPages[a].dataset.upcomingPageIndex},__event:function(a){var c=b.createEvent("Event");c.initEvent("swipeview-"+a,!0,!0),this.wrapper.dispatchEvent(c)}},r}(window,document);;!function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;e.length>d;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(c,d,e){var f,g,h,i,j={},k=c.split(".")[0];c=c.split(".")[1],f=k+"-"+c,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][c],h=a[k][c]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),b):new h(a,c)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),a.each(e,function(c,e){return a.isFunction(e)?(j[c]=function(){var a=function(){return d.prototype[c].apply(this,arguments)},b=function(a){return d.prototype[c].apply(this,a)};return function(){var c,d=this._super,f=this._superApply;return this._super=a,this._superApply=b,c=e.apply(this,arguments),this._super=d,this._superApply=f,c}}(),b):(j[c]=e,b)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix:c},j,{constructor:h,namespace:k,widgetName:c,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(c,h)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):b):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; "+"attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;e.length-1>g;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,d,e){var f,g=this;"boolean"!=typeof c&&(e=d,d=c,c=!1),e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget()),a.each(e,function(e,h){function i(){return c||g.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof h?g[h]:h).apply(g,arguments):b}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=e.match(/^(\w+)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?f.delegate(l,k,i):d.bind(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){function b(a){return parseInt(a,10)||0}function c(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;b.length>c;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(c){var d,e,f,g=this.options,h=this.element.position(),i=this.element;return this.resizing=!0,/absolute/.test(i.css("position"))?i.css({position:"absolute",top:i.css("top"),left:i.css("left")}):i.is(".ui-draggable")&&i.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy(),d=b(this.helper.css("left")),e=b(this.helper.css("top")),g.containment&&(d+=a(g.containment).scrollLeft()||0,e+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:e},this.size=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalPosition={left:d,top:e},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),i.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=this.position.top,i=this.position.left,j=this.size.width,k=this.size.height,l=b.pageX-f.left||0,m=b.pageY-f.top||0,n=this._change[g];return n?(c=n.apply(this,[b,l,m]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==h&&(e.top=this.position.top+"px"),this.position.left!==i&&(e.left=this.position.left+"px"),this.size.width!==j&&(e.width=this.size.width+"px"),this.size.height!==k&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&a.ui.hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,d,e,f,g,h=this.options;g={minWidth:c(h.minWidth)?h.minWidth:0,maxWidth:c(h.maxWidth)?h.maxWidth:1/0,minHeight:c(h.minHeight)?h.minHeight:0,maxHeight:c(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,d=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),g.maxWidth>d&&(g.maxWidth=d),g.maxHeight>f&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,d=this.size,e=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===e&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"===e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,d=this.axis,e=c(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=c(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=c(a.width)&&b.minWidth&&b.minWidth>a.width,h=c(a.height)&&b.minHeight&&b.minHeight>a.height,i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(d),l=/nw|ne|n/.test(d);return g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&l&&(a.top=j-b.minHeight),f&&l&&(a.top=j-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;this._proportionallyResizeElements.length>a;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;c.length>b;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c,d,e,f,g,h,i,j=a(this).data("ui-resizable"),k=j.options,l=j.element,m=k.containment,n=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m;n&&(j.containerElement=a(n),/document/.test(m)||m===document?(j.containerOffset={left:0,top:0},j.containerPosition={left:0,top:0},j.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(c=a(n),d=[],a(["Top","Right","Left","Bottom"]).each(function(a,e){d[a]=b(c.css("padding"+e))}),j.containerOffset=c.offset(),j.containerPosition=c.position(),j.containerSize={height:c.innerHeight()-d[3],width:c.innerWidth()-d[1]},e=j.containerOffset,f=j.containerSize.height,g=j.containerSize.width,h=a.ui.hasScroll(n,"left")?n.scrollWidth:g,i=a.ui.hasScroll(n)?n.scrollHeight:f,j.parentData={element:n,left:e.left,top:e.top,width:h,height:i}))},resize:function(b){var c,d,e,f,g=a(this).data("ui-resizable"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?i.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,c=Math.abs((g._helper?g.offset.left-l.left:g.offset.left-l.left)+g.sizeDiff.width),d=Math.abs((g._helper?g.offset.top-l.top:g.offset.top-i.top)+g.sizeDiff.height),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f&&(c-=g.parentData.left),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio))},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("ui-resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&m>c.maxWidth,p=c.maxHeight&&n>c.maxHeight,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(b.size.width=m,b.size.height=n,b.position.top=f.top-l,b.position.left=f.left-k)}})}(jQuery);;!function(a){a.fn.fastClick=function(b){return a(this).each(function(){a.FastButton(a(this)[0],b)})},a.FastButton=function(b,c){var d,e,f=function(){a(b).unbind("touchend"),a("body").unbind("touchmove.fastClick")},g=function(b){b.stopPropagation(),f(),c.call(this,b),"touchend"===b.type&&a.clickbuster.preventGhostClick(d,e)},h=function(a){(Math.abs(a.originalEvent.touches[0].clientX-d)>10||Math.abs(a.originalEvent.touches[0].clientY-e)>10)&&f()},i=function(c){c.stopPropagation(),a(b).bind("touchend",g),a("body").bind("touchmove.fastClick",h),d=c.originalEvent.touches[0].clientX,e=c.originalEvent.touches[0].clientY};a(b).bind({touchstart:i,click:g})},a.clickbuster={coordinates:[],preventGhostClick:function(b,c){a.clickbuster.coordinates.push(b,c),window.setTimeout(a.clickbuster.pop,2500)},pop:function(){a.clickbuster.coordinates.splice(0,2)},onClick:function(b){var c,d,e;for(e=0;e<a.clickbuster.coordinates.length;e+=2)c=a.clickbuster.coordinates[e],d=a.clickbuster.coordinates[e+1],Math.abs(b.clientX-c)<25&&Math.abs(b.clientY-d)<25&&(b.stopPropagation(),b.preventDefault())}},a(function(){document.addEventListener?document.addEventListener("click",a.clickbuster.onClick,!0):document.attachEvent&&document.attachEvent("onclick",a.clickbuster.onClick)})}(jQuery);;!function(a){function b(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var c,d=a.ui.mouse.prototype,e=d._mouseInit;d._touchStart=function(a){var d=this;!c&&d._mouseCapture(a.originalEvent.changedTouches[0])&&(c=!0,d._touchMoved=!1,b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))},d._touchMove=function(a){c&&(this._touchMoved=!0,b(a,"mousemove"))},d._touchEnd=function(a){c&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),c=!1)},d._mouseInit=function(){var b=this;b.element.bind("touchstart",a.proxy(b,"_touchStart")).bind("touchmove",a.proxy(b,"_touchMove")).bind("touchend",a.proxy(b,"_touchEnd")),e.call(b)}}}(jQuery);;function bkClass(){}function $BK(a){return"string"==typeof a&&(a=document.getElementById(a)),a&&!a.appendTo?bkExtend(a,bkElement.prototype):a}function __(a){return a}var bkExtend=function(){var a=arguments;1==a.length&&(a=[this,a[0]]);for(var b in a[1])a[0][b]=a[1][b];return a[0]};bkClass.prototype.construct=function(){},bkClass.extend=function(a){var b=function(){return arguments[0]!==bkClass?this.construct.apply(this,arguments):void 0},c=new this(bkClass);return bkExtend(c,a),b.prototype=c,b.extend=this.extend,b};var bkElement=bkClass.extend({construct:function(a,b){return"string"==typeof a&&(a=(b||document).createElement(a)),a=$BK(a)},appendTo:function(a){return a.appendChild(this),this},appendBefore:function(a){return a.parentNode.insertBefore(this,a),this},addEvent:function(a,b){return bkLib.addEvent(this,a,b),this},setContent:function(a){return this.innerHTML=a,this},pos:function(){var a=curtop=0;if(obj=this,obj.offsetParent)do a+=obj.offsetLeft,curtop+=obj.offsetTop;while(obj=obj.offsetParent);var b=window.opera?0:parseInt(this.getStyle("border-width")||this.style.border)||0;return[a+b,curtop+b+this.offsetHeight]},noSelect:function(){return bkLib.noSelect(this),this},parentTag:function(a){var b=this;do{if(b&&b.nodeName&&b.nodeName.toUpperCase()==a)return b;b=b.parentNode}while(b);return!1},hasClass:function(a){return this.className.match(new RegExp("(\\s|^)nicEdit-"+a+"(\\s|$)"))},addClass:function(a){return this.hasClass(a)||(this.className+=" nicEdit-"+a),this},removeClass:function(a){return this.hasClass(a)&&(this.className=this.className.replace(new RegExp("(\\s|^)nicEdit-"+a+"(\\s|$)")," ")),this},setStyle:function(a){var b=this.style;for(var c in a)switch(c){case"float":b.cssFloat=b.styleFloat=a[c];break;case"opacity":b.opacity=a[c],b.filter="alpha(opacity="+Math.round(100*a[c])+")";break;case"className":this.className=a[c];break;default:b[c]=a[c]}return this},getStyle:function(a,b){var c=b?b:document.defaultView;return 1==this.nodeType?c&&c.getComputedStyle?c.getComputedStyle(this,null).getPropertyValue(a):this.currentStyle[bkLib.camelize(a)]:void 0},remove:function(){return this.parentNode.removeChild(this),this},setAttributes:function(a){for(var b in a)this[b]=a[b];return this}}),bkLib={isMSIE:-1!=navigator.appVersion.indexOf("MSIE"),addEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},toArray:function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c},noSelect:function(a){a.setAttribute&&"input"!=a.nodeName.toLowerCase()&&"textarea"!=a.nodeName.toLowerCase()&&a.setAttribute("unselectable","on");for(var b=0;b<a.childNodes.length;b++)bkLib.noSelect(a.childNodes[b])},camelize:function(a){return a.replace(/\-(.)/g,function(a,b){return b.toUpperCase()})},inArray:function(a,b){return null!=bkLib.search(a,b)},search:function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return null},cancelEvent:function(a){return a=a||window.event,a.preventDefault&&a.stopPropagation&&(a.preventDefault(),a.stopPropagation()),!1},domLoad:[],domLoaded:function(){if(!arguments.callee.done)for(arguments.callee.done=!0,i=0;i<bkLib.domLoad.length;i++)bkLib.domLoad[i]()},onDomLoaded:function(a){this.domLoad.push(a),document.addEventListener?document.addEventListener("DOMContentLoaded",bkLib.domLoaded,null):bkLib.isMSIE&&(document.write("<style>.nicEdit-main p { margin: 0; }</style><script id=__ie_onload defer "+("https:"==location.protocol?"src='javascript:void(0)'":"src=//0")+"></script>"),$BK("__ie_onload").onreadystatechange=function(){"complete"==this.readyState&&bkLib.domLoaded()}),window.onload=bkLib.domLoaded}},bkEvent={addEvent:function(a,b){return b&&(this.eventList=this.eventList||{},this.eventList[a]=this.eventList[a]||[],this.eventList[a].push(b)),this},fireEvent:function(){var a=bkLib.toArray(arguments),b=a.shift();if(this.eventList&&this.eventList[b])for(var c=0;c<this.eventList[b].length;c++)this.eventList[b][c].apply(this,a)}};Function.prototype.closure=function(){var a=this,b=bkLib.toArray(arguments),c=b.shift();return function(){return"undefined"!=typeof bkLib?a.apply(c,b.concat(bkLib.toArray(arguments))):void 0}},Function.prototype.closureListener=function(){var a=this,b=bkLib.toArray(arguments),c=b.shift();return function(d){if(d=d||window.event,d.target)var e=d.target;else var e=d.srcElement;return a.apply(c,[d,e].concat(b))}};var nicEditorConfig=bkClass.extend({buttons:{bold:{name:__("Click to Bold"),command:"Bold",tags:["B","STRONG"],css:{"font-weight":"bold"},key:"b"},italic:{name:__("Click to Italic"),command:"Italic",tags:["EM","I"],css:{"font-style":"italic"},key:"i"},underline:{name:__("Click to Underline"),command:"Underline",tags:["U"],css:{"text-decoration":"underline"},key:"u"},left:{name:__("Left Align"),command:"justifyleft",noActive:!0},center:{name:__("Center Align"),command:"justifycenter",noActive:!0},right:{name:__("Right Align"),command:"justifyright",noActive:!0},justify:{name:__("Justify Align"),command:"justifyfull",noActive:!0},ol:{name:__("Insert Ordered List"),command:"insertorderedlist",tags:["OL"]},ul:{name:__("Insert Unordered List"),command:"insertunorderedlist",tags:["UL"]},subscript:{name:__("Click to Subscript"),command:"subscript",tags:["SUB"]},superscript:{name:__("Click to Superscript"),command:"superscript",tags:["SUP"]},strikethrough:{name:__("Click to Strike Through"),command:"strikeThrough",css:{"text-decoration":"line-through"}},removeformat:{name:__("Remove Formatting"),command:"removeformat",noActive:!0},indent:{name:__("Indent Text"),command:"indent",noActive:!0},outdent:{name:__("Remove Indent"),command:"outdent",noActive:!0},hr:{name:__("Horizontal Rule"),command:"insertHorizontalRule",noActive:!0}},iconsPath:"resources/icons/nicEditorIcons.gif",buttonList:["save","bold","italic","underline","left","center","right","justify","ol","ul","fontSize","fontFamily","fontFormat","indent","outdent","image","upload","link","unlink","forecolor","bgcolor"],iconList:{bgcolor:1,forecolor:2,bold:3,center:4,hr:5,indent:6,italic:7,justify:8,left:9,ol:10,outdent:11,removeformat:12,right:13,save:14,strikethrough:15,subscript:16,superscript:17,ul:18,underline:19,image:20,link:21,unlink:22,close:23,arrow:24}}),nicEditors={nicPlugins:[],editors:[],registerPlugin:function(a,b){this.nicPlugins.push({p:a,o:b})},allTextAreas:function(a){for(var b=document.getElementsByTagName("textarea"),c=0;c<b.length;c++)nicEditors.editors.push(new nicEditor(a).panelInstance(b[c]));return nicEditors.editors},findEditor:function(a){for(var b=nicEditors.editors,c=0;c<b.length;c++)if(b[c].instanceById(a))return b[c].instanceById(a)}},nicEditor=bkClass.extend({construct:function(a){this.options=new nicEditorConfig,bkExtend(this.options,a),this.nicInstances=new Array,this.loadedPlugins=new Array;for(var b=nicEditors.nicPlugins,c=0;c<b.length;c++)this.loadedPlugins.push(new b[c].p(this,b[c].o));nicEditors.editors.push(this),bkLib.addEvent(document.body,"mousedown",this.selectCheck.closureListener(this))},panelInstance:function(a,b){a=this.checkReplace($BK(a));var c=new bkElement("DIV").setStyle({width:(parseInt(a.getStyle("width"))||a.clientWidth)+"px"}).appendBefore(a);return this.setPanel(c),this.addInstance(a,b)},checkReplace:function(a){var b=nicEditors.findEditor(a);return b&&(b.removeInstance(a),b.removePanel()),a},addInstance:function(a,b){if(a=this.checkReplace($BK(a)),a.contentEditable||window.opera)var c=new nicEditorInstance(a,b,this);else var c=new nicEditorIFrameInstance(a,b,this);return this.nicInstances.push(c),this},removeInstance:function(a){a=$BK(a);for(var b=this.nicInstances,c=0;c<b.length;c++)b[c].e==a&&(b[c].remove(),this.nicInstances.splice(c,1))},removePanel:function(){this.nicPanel&&(this.nicPanel.remove(),this.nicPanel=null)},instanceById:function(a){a=$BK(a);for(var b=this.nicInstances,c=0;c<b.length;c++)if(b[c].e==a)return b[c]},setPanel:function(a){return this.nicPanel=new nicEditorPanel($BK(a),this.options,this),this.fireEvent("panel",this.nicPanel),this},nicCommand:function(a,b){this.selectedInstance&&this.selectedInstance.nicCommand(a,b)},getIcon:function(a,b){var c=this.options.iconList[a],d=b.iconFiles?b.iconFiles[a]:"";return{backgroundImage:"url('"+(c?this.options.iconsPath:d)+"')",backgroundPosition:(c?-18*(c-1):0)+"px 0px"}},selectCheck:function(a,b){do if(b.className&&-1!=b.className.indexOf("nicEdit"))return!1;while(b=b.parentNode);return this.fireEvent("blur",this.selectedInstance,b),this.lastSelectedInstance=this.selectedInstance,this.selectedInstance=null,!1}});nicEditor=nicEditor.extend(bkEvent);var nicEditorInstance=bkClass.extend({isSelected:!1,construct:function(a,b,c){this.ne=c,this.elm=this.e=a,this.options=b||{},newX=parseInt(a.getStyle("width"))||a.clientWidth,newY=parseInt(a.getStyle("height"))||a.clientHeight,this.initialHeight=newY-8;var d="textarea"==a.nodeName.toLowerCase();if(d||this.options.hasPanel){var e=bkLib.isMSIE&&!("undefined"!=typeof document.body.style.maxHeight&&"CSS1Compat"==document.compatMode),f={width:newX+"px",border:"1px solid #ccc",borderTop:0,overflowY:"auto",overflowX:"hidden"};f[e?"height":"maxHeight"]=this.ne.options.maxHeight?this.ne.options.maxHeight+"px":null,this.editorContain=new bkElement("DIV").setStyle(f).appendBefore(a);var g=new bkElement("DIV").setStyle({width:newX-8+"px",margin:"4px",minHeight:newY+"px"}).addClass("main").appendTo(this.editorContain);if(a.setStyle({display:"none"}),g.innerHTML=a.innerHTML,d){g.setContent(a.value),this.copyElm=a;var h=a.parentTag("FORM");h&&bkLib.addEvent(h,"submit",this.saveContent.closure(this))}g.setStyle(e?{height:newY+"px"}:{overflow:"hidden"}),this.elm=g}this.ne.addEvent("blur",this.blur.closure(this)),this.init(),this.blur()},init:function(){this.elm.setAttribute("contentEditable","true"),""==this.getContent()&&this.setContent("<br />"),this.instanceDoc=document.defaultView,this.elm.addEvent("mousedown",this.selected.closureListener(this)).addEvent("keypress",this.keyDown.closureListener(this)).addEvent("focus",this.selected.closure(this)).addEvent("blur",this.blur.closure(this)).addEvent("keyup",this.selected.closure(this)),this.ne.fireEvent("add",this)},remove:function(){this.saveContent(),(this.copyElm||this.options.hasPanel)&&(this.editorContain.remove(),this.e.setStyle({display:"block"}),this.ne.removePanel()),this.disable(),this.ne.fireEvent("remove",this)},disable:function(){this.elm.setAttribute("contentEditable","false")},getSel:function(){return window.getSelection?window.getSelection():document.selection},getRng:function(){var a=this.getSel();if(a&&0!==a.rangeCount)return a.rangeCount>0?a.getRangeAt(0):a.createRange()},selRng:function(a,b){window.getSelection?(b.removeAllRanges(),b.addRange(a)):a.select()},selElm:function(){var a=this.getRng();if(a){if(a.startContainer){var b=a.startContainer;if(1==a.cloneContents().childNodes.length)for(var c=0;c<b.childNodes.length;c++){var d=b.childNodes[c].ownerDocument.createRange();if(d.selectNode(b.childNodes[c]),1!=a.compareBoundaryPoints(Range.START_TO_START,d)&&-1!=a.compareBoundaryPoints(Range.END_TO_END,d))return $BK(b.childNodes[c])}return $BK(b)}return $BK("Control"==this.getSel().type?a.item(0):a.parentElement())}},saveRng:function(){this.savedRange=this.getRng(),this.savedSel=this.getSel()},restoreRng:function(){this.savedRange&&this.selRng(this.savedRange,this.savedSel)},keyDown:function(a){a.ctrlKey&&this.ne.fireEvent("key",this,a)},selected:function(a,b){if(b||(b=this.selElm)||(b=this.selElm()),!a.ctrlKey){var c=this.ne.selectedInstance;c!=this&&(c&&this.ne.fireEvent("blur",c,b),this.ne.selectedInstance=this,this.ne.fireEvent("focus",c,b)),this.ne.fireEvent("selected",c,b),this.isFocused=!0,this.elm.addClass("selected")}return!1},blur:function(){this.isFocused=!1,this.elm.removeClass("selected")},saveContent:function(){(this.copyElm||this.options.hasPanel)&&(this.ne.fireEvent("save",this),this.copyElm?this.copyElm.value=this.getContent():this.e.innerHTML=this.getContent())},getElm:function(){return this.elm},getContent:function(){return this.content=this.getElm().innerHTML,this.ne.fireEvent("get",this),this.content},setContent:function(a){this.content=a,this.ne.fireEvent("set",this),this.elm.innerHTML=this.content},nicCommand:function(a,b){document.execCommand(a,!1,b)}}),nicEditorIFrameInstance=nicEditorInstance.extend({savedStyles:[],init:function(){var a=this.elm.innerHTML.replace(/^\s+|\s+$/g,"");this.elm.innerHTML="",a?a:a="<br />",this.initialContent=a,this.elmFrame=new bkElement("iframe").setAttributes({src:"javascript:;",frameBorder:0,allowTransparency:"true",scrolling:"no"}).setStyle({height:"100px",width:"100%"}).addClass("frame").appendTo(this.elm),this.copyElm&&this.elmFrame.setStyle({width:this.elm.offsetWidth-4+"px"});var b=["font-size","font-family","font-weight","color"];for(itm in b)this.savedStyles[bkLib.camelize(itm)]=this.elm.getStyle(itm);setTimeout(this.initFrame.closure(this),50)},disable:function(){this.elm.innerHTML=this.getContent()},initFrame:function(){var a=$BK(this.elmFrame.contentWindow.document);a.designMode="on",a.open();var b=this.ne.options.externalCSS;a.write("<html><head>"+(b?'<link href="'+b+'" rel="stylesheet" type="text/css" />':"")+'</head><body id="nicEditContent" style="margin: 0 !important; background-color: transparent !important;">'+this.initialContent+"</body></html>"),a.close(),this.frameDoc=a,this.frameWin=$BK(this.elmFrame.contentWindow),this.frameContent=$BK(this.frameWin.document.body).setStyle(this.savedStyles),this.instanceDoc=this.frameWin.document.defaultView,this.heightUpdate(),this.frameDoc.addEvent("mousedown",this.selected.closureListener(this)).addEvent("keyup",this.heightUpdate.closureListener(this)).addEvent("keydown",this.keyDown.closureListener(this)).addEvent("keyup",this.selected.closure(this)),this.ne.fireEvent("add",this)},getElm:function(){return this.frameContent},setContent:function(a){this.content=a,this.ne.fireEvent("set",this),this.frameContent.innerHTML=this.content,this.heightUpdate()},getSel:function(){return this.frameWin?this.frameWin.getSelection():this.frameDoc.selection},heightUpdate:function(){this.elmFrame.style.height=Math.max(this.frameContent.offsetHeight,this.initialHeight)+"px"},nicCommand:function(a,b){this.frameDoc.execCommand(a,!1,b),setTimeout(this.heightUpdate.closure(this),100)}}),nicEditorPanel=bkClass.extend({construct:function(a,b,c){this.elm=a,this.options=b,this.ne=c,this.panelButtons=new Array,this.buttonList=bkExtend([],this.ne.options.buttonList),this.panelContain=new bkElement("DIV").setStyle({overflow:"hidden",width:"100%",border:"1px solid #cccccc",backgroundColor:"#efefef"}).addClass("panelContain"),this.panelElm=new bkElement("DIV").setStyle({margin:"2px",marginTop:"0px",zoom:1,overflow:"hidden"}).addClass("panel").appendTo(this.panelContain),this.panelContain.appendTo(a);var d=this.ne.options,e=d.buttons;for(button in e)this.addButton(button,d,!0);this.reorder(),a.noSelect()},addButton:function(buttonName,options,noOrder){var button=options.buttons[buttonName],type=button.type?eval("(typeof("+button.type+') == "undefined") ? null : '+button.type+";"):nicEditorButton,hasButton=bkLib.inArray(this.buttonList,buttonName);type&&(hasButton||this.ne.options.fullPanel)&&(this.panelButtons.push(new type(this.panelElm,buttonName,options,this.ne)),hasButton||this.buttonList.push(buttonName))},findButton:function(a){for(var b=0;b<this.panelButtons.length;b++)if(this.panelButtons[b].name==a)return this.panelButtons[b]},reorder:function(){for(var a=this.buttonList,b=0;b<a.length;b++){var c=this.findButton(a[b]);c&&this.panelElm.appendChild(c.margin)}},remove:function(){this.elm.remove()}}),nicEditorButton=bkClass.extend({construct:function(a,b,c,d){this.options=c.buttons[b],this.name=b,this.ne=d,this.elm=a,this.margin=new bkElement("DIV").setStyle({"float":"left",marginTop:"2px"}).appendTo(a),this.contain=new bkElement("DIV").setStyle({width:"20px",height:"20px"}).addClass("buttonContain").appendTo(this.margin),this.border=new bkElement("DIV").setStyle({backgroundColor:"#efefef",border:"1px solid #efefef"}).appendTo(this.contain),this.button=new bkElement("DIV").setStyle({width:"18px",height:"18px",overflow:"hidden",zoom:1,cursor:"pointer"}).addClass("button").setStyle(this.ne.getIcon(b,c)).appendTo(this.border),this.button.addEvent("mouseover",this.hoverOn.closure(this)).addEvent("mouseout",this.hoverOff.closure(this)).addEvent("mousedown",this.mouseClick.closure(this)).noSelect(),window.opera||(this.button.onmousedown=this.button.onclick=bkLib.cancelEvent),d.addEvent("selected",this.enable.closure(this)).addEvent("blur",this.disable.closure(this)).addEvent("key",this.key.closure(this)),this.disable(),this.init()},init:function(){},hide:function(){this.contain.setStyle({display:"none"})},updateState:function(){this.isDisabled?this.setBg():this.isHover?this.setBg("hover"):this.isActive?this.setBg("active"):this.setBg()},setBg:function(a){switch(a){case"hover":var b={border:"1px solid #666",backgroundColor:"#ddd"};break;case"active":var b={border:"1px solid #666",backgroundColor:"#ccc"};break;default:var b={border:"1px solid #efefef",backgroundColor:"#efefef"}}this.border.setStyle(b).addClass("button-"+a)},checkNodes:function(a){var b=a;do if(this.options.tags&&bkLib.inArray(this.options.tags,b.nodeName))return this.activate(),!0;while(b=b.parentNode&&"nicEdit"!=b.className);for(b=$BK(a);3==b.nodeType;)b=$BK(b.parentNode);if(this.options.css)for(itm in this.options.css)if(b.getStyle(itm,this.ne.selectedInstance.instanceDoc)==this.options.css[itm])return this.activate(),!0;return this.deactivate(),!1},activate:function(){this.isDisabled||(this.isActive=!0,this.updateState(),this.ne.fireEvent("buttonActivate",this))},deactivate:function(){this.isActive=!1,this.updateState(),this.isDisabled||this.ne.fireEvent("buttonDeactivate",this)},enable:function(a,b){this.isDisabled=!1,this.contain.setStyle({opacity:1}).addClass("buttonEnabled"),this.updateState(),this.checkNodes(b)},disable:function(){this.isDisabled=!0,this.contain.setStyle({opacity:.6}).removeClass("buttonEnabled"),this.updateState()},toggleActive:function(){this.isActive?this.deactivate():this.activate()},hoverOn:function(){this.isDisabled||(this.isHover=!0,this.updateState(),this.ne.fireEvent("buttonOver",this))},hoverOff:function(){this.isHover=!1,this.updateState(),this.ne.fireEvent("buttonOut",this)},mouseClick:function(){this.options.command&&(this.ne.nicCommand(this.options.command,this.options.commandArgs),this.options.noActive||this.toggleActive()),this.ne.fireEvent("buttonClick",this)},key:function(a,b){this.options.key&&b.ctrlKey&&String.fromCharCode(b.keyCode||b.charCode).toLowerCase()==this.options.key&&(this.mouseClick(),b.preventDefault&&b.preventDefault())}}),nicPlugin=bkClass.extend({construct:function(a,b){this.options=b,this.ne=a,this.ne.addEvent("panel",this.loadPanel.closure(this)),this.init()},loadPanel:function(a){var b=this.options.buttons;for(var c in b)a.addButton(c,this.options);a.reorder()},init:function(){}}),nicPaneOptions={},nicEditorPane=bkClass.extend({construct:function(a,b,c,d){this.ne=b,this.elm=a,this.pos=a.pos(),this.contain=new bkElement("div").setStyle({zIndex:"99999",overflow:"hidden",position:"absolute",left:this.pos[0]+"px",top:this.pos[1]+"px"}),this.pane=new bkElement("div").setStyle({fontSize:"12px",border:"1px solid #ccc",overflow:"hidden",padding:"4px",textAlign:"left",backgroundColor:"#ffffc9"}).addClass("pane").setStyle(c).appendTo(this.contain),d&&!d.options.noClose&&(this.close=new bkElement("div").setStyle({"float":"right",height:"16px",width:"16px",cursor:"pointer"}).setStyle(this.ne.getIcon("close",nicPaneOptions)).addEvent("mousedown",d.removePane.closure(this)).appendTo(this.pane)),this.contain.noSelect().appendTo(document.body),this.position(),this.init()},init:function(){},position:function(){if(this.ne.nicPanel){var a=this.ne.nicPanel.elm,b=a.pos(),c=b[0]+parseInt(a.getStyle("width"))-(parseInt(this.pane.getStyle("width"))+8);c<this.pos[0]&&this.contain.setStyle({left:c+"px"})}},toggle:function(){this.isVisible=!this.isVisible,this.contain.setStyle({display:this.isVisible?"block":"none"})},remove:function(){this.contain&&(this.contain.remove(),this.contain=null)},append:function(a){a.appendTo(this.pane)},setContent:function(a){this.pane.setContent(a)}}),nicEditorAdvancedButton=nicEditorButton.extend({init:function(){this.ne.addEvent("selected",this.removePane.closure(this)).addEvent("blur",this.removePane.closure(this))},mouseClick:function(){this.isDisabled||(this.pane&&this.pane.pane?this.removePane():(this.pane=new nicEditorPane(this.contain,this.ne,{width:this.width||"270px",backgroundColor:"#fff"},this),this.addPane(),this.ne.selectedInstance.saveRng()))},addForm:function(a,b){this.form=new bkElement("form").addEvent("submit",this.submit.closureListener(this)),this.pane.append(this.form),this.inputs={};for(itm in a){var c=a[itm],d="";b&&(d=b.getAttribute(itm)),d||(d=c.value||"");var e=a[itm].type;if("title"==e)new bkElement("div").setContent(c.txt).setStyle({fontSize:"14px",fontWeight:"bold",padding:"0px",margin:"2px 0"}).appendTo(this.form);else{var f=new bkElement("div").setStyle({overflow:"hidden",clear:"both"}).appendTo(this.form);switch(c.txt&&new bkElement("label").setAttributes({"for":itm}).setContent(c.txt).setStyle({margin:"2px 4px",fontSize:"13px",width:"50px",lineHeight:"20px",textAlign:"right","float":"left"}).appendTo(f),e){case"text":this.inputs[itm]=new bkElement("input").setAttributes({id:itm,value:d,type:"text"}).setStyle({margin:"2px 0",fontSize:"13px","float":"left",height:"20px",border:"1px solid #ccc",overflow:"hidden"}).setStyle(c.style).appendTo(f);break;case"select":this.inputs[itm]=new bkElement("select").setAttributes({id:itm}).setStyle({border:"1px solid #ccc","float":"left",margin:"2px 0"}).appendTo(f);for(opt in c.options)new bkElement("option").setAttributes({value:opt,selected:opt==d?"selected":""}).setContent(c.options[opt]).appendTo(this.inputs[itm]);break;case"content":this.inputs[itm]=new bkElement("textarea").setAttributes({id:itm}).setStyle({border:"1px solid #ccc","float":"left"}).setStyle(c.style).appendTo(f),this.inputs[itm].value=d}}}new bkElement("input").setAttributes({type:"submit"}).setStyle({backgroundColor:"#efefef",border:"1px solid #ccc",margin:"3px 0","float":"left",clear:"both"}).appendTo(this.form),this.form.onsubmit=bkLib.cancelEvent},submit:function(){},findElm:function(a,b,c){for(var d=this.ne.selectedInstance.getElm().getElementsByTagName(a),e=0;e<d.length;e++)if(d[e].getAttribute(b)==c)return $BK(d[e])},removePane:function(){this.pane&&(this.pane.remove(),this.pane=null,this.ne.selectedInstance.restoreRng())}}),nicSelectOptions={buttons:{fontSize:{name:__("Select Font Size"),type:"nicEditorFontSizeSelect",command:"fontsize"},fontFamily:{name:__("Select Font Family"),type:"nicEditorFontFamilySelect",command:"fontname"},fontFormat:{name:__("Select Font Format"),type:"nicEditorFontFormatSelect",command:"formatBlock"}}},nicEditorSelect=bkClass.extend({construct:function(a,b,c,d){this.options=c.buttons[b],this.elm=a,this.ne=d,this.name=b,this.selOptions=new Array,this.margin=new bkElement("div").setStyle({"float":"left",margin:"2px 1px 0 1px"}).appendTo(this.elm),this.contain=new bkElement("div").setStyle({width:"90px",height:"20px",cursor:"pointer",overflow:"hidden"}).addClass("selectContain").addEvent("click",this.toggle.closure(this)).appendTo(this.margin),this.items=new bkElement("div").setStyle({overflow:"hidden",zoom:1,border:"1px solid #ccc",paddingLeft:"3px",backgroundColor:"#fff"}).appendTo(this.contain),this.control=new bkElement("div").setStyle({overflow:"hidden","float":"right",height:"18px",width:"16px"}).addClass("selectControl").setStyle(this.ne.getIcon("arrow",c)).appendTo(this.items),this.txt=new bkElement("div").setStyle({overflow:"hidden","float":"left",width:"66px",height:"14px",marginTop:"1px",fontFamily:"sans-serif",textAlign:"center",fontSize:"12px"}).addClass("selectTxt").appendTo(this.items),window.opera||(this.contain.onmousedown=this.control.onmousedown=this.txt.onmousedown=bkLib.cancelEvent),this.margin.noSelect(),this.ne.addEvent("selected",this.enable.closure(this)).addEvent("blur",this.disable.closure(this)),this.disable(),this.init()},disable:function(){this.isDisabled=!0,this.close(),this.contain.setStyle({opacity:.6})},enable:function(){this.isDisabled=!1,this.close(),this.contain.setStyle({opacity:1})},setDisplay:function(a){this.txt.setContent(a)},toggle:function(){this.isDisabled||(this.pane?this.close():this.open())},open:function(){this.pane=new nicEditorPane(this.items,this.ne,{width:"88px",padding:"0px",borderTop:0,borderLeft:"1px solid #ccc",borderRight:"1px solid #ccc",borderBottom:"0px",backgroundColor:"#fff"});for(var a=0;a<this.selOptions.length;a++){var b=this.selOptions[a],c=new bkElement("div").setStyle({overflow:"hidden",borderBottom:"1px solid #ccc",width:"88px",textAlign:"left",overflow:"hidden",cursor:"pointer"}),d=new bkElement("div").setStyle({padding:"0px 4px"}).setContent(b[1]).appendTo(c).noSelect();d.addEvent("click",this.update.closure(this,b[0])).addEvent("mouseover",this.over.closure(this,d)).addEvent("mouseout",this.out.closure(this,d)).setAttributes("id",b[0]),this.pane.append(c),window.opera||(d.onmousedown=bkLib.cancelEvent)}},close:function(){this.pane&&(this.pane=this.pane.remove())},over:function(a){a.setStyle({backgroundColor:"#ccc"})},out:function(a){a.setStyle({backgroundColor:"#fff"})},add:function(a,b){this.selOptions.push(new Array(a,b))},update:function(a){this.ne.nicCommand(this.options.command,a),this.close()}}),nicEditorFontSizeSelect=nicEditorSelect.extend({sel:{1:"1&nbsp;(8pt)",2:"2&nbsp;(10pt)",3:"3&nbsp;(12pt)",4:"4&nbsp;(14pt)",5:"5&nbsp;(18pt)",6:"6&nbsp;(24pt)"},init:function(){this.setDisplay("Font&nbsp;Size...");for(itm in this.sel)this.add(itm,'<font size="'+itm+'">'+this.sel[itm]+"</font>")}}),nicEditorFontFamilySelect=nicEditorSelect.extend({sel:{arial:"Arial","comic sans ms":"Comic Sans","courier new":"Courier New",georgia:"Georgia",helvetica:"Helvetica",impact:"Impact","times new roman":"Times","trebuchet ms":"Trebuchet",verdana:"Verdana"},init:function(){this.setDisplay("Font&nbsp;Family...");for(itm in this.sel)this.add(itm,'<font face="'+itm+'">'+this.sel[itm]+"</font>")}}),nicEditorFontFormatSelect=nicEditorSelect.extend({sel:{p:"Paragraph",pre:"Pre",h6:"Heading&nbsp;6",h5:"Heading&nbsp;5",h4:"Heading&nbsp;4",h3:"Heading&nbsp;3",h2:"Heading&nbsp;2",h1:"Heading&nbsp;1"},init:function(){this.setDisplay("Font&nbsp;Format...");for(itm in this.sel){var a=itm.toUpperCase();this.add("<"+a+">","<"+itm+' style="padding: 0px; margin: 0px;">'+this.sel[itm]+"</"+a+">")}}});nicEditors.registerPlugin(nicPlugin,nicSelectOptions);var nicLinkOptions={buttons:{link:{name:"Add Link",type:"nicLinkButton",tags:["A"]},unlink:{name:"Remove Link",command:"unlink",noActive:!0}}},nicLinkButton=nicEditorAdvancedButton.extend({addPane:function(){this.ln=this.ne.selectedInstance.selElm().parentTag("A"),this.addForm({"":{type:"title",txt:"Add/Edit Link"},href:{type:"text",txt:"URL",value:"http://",style:{width:"150px"}},title:{type:"text",txt:"Title"},target:{type:"select",txt:"Open In",options:{"":"Current Window",_blank:"New Window"},style:{width:"100px"}}},this.ln)},submit:function(){var a=this.inputs.href.value;if("http://"==a||""==a)return alert("You must enter a URL to Create a Link"),!1;if(this.removePane(),!this.ln){var b="javascript:nicTemp();";this.ne.nicCommand("createlink",b),this.ln=this.findElm("A","href",b)}this.ln&&this.ln.setAttributes({href:this.inputs.href.value,title:this.inputs.title.value,target:this.inputs.target.options[this.inputs.target.selectedIndex].value})}});nicEditors.registerPlugin(nicPlugin,nicLinkOptions);var nicColorOptions={buttons:{forecolor:{name:__("Change Text Color"),type:"nicEditorColorButton",noClose:!0},bgcolor:{name:__("Change Background Color"),type:"nicEditorBgColorButton",noClose:!0}}},nicEditorColorButton=nicEditorAdvancedButton.extend({addPane:function(){var a={0:"00",1:"33",2:"66",3:"99",4:"CC",5:"FF"},b=new bkElement("DIV").setStyle({width:"270px"});for(var c in a)for(var d in a)for(var e in a){var f="#"+a[c]+a[e]+a[d],g=new bkElement("DIV").setStyle({cursor:"pointer",height:"15px","float":"left"}).appendTo(b),h=new bkElement("DIV").setStyle({border:"2px solid "+f}).appendTo(g),i=new bkElement("DIV").setStyle({backgroundColor:f,overflow:"hidden",width:"11px",height:"11px"}).addEvent("click",this.colorSelect.closure(this,f)).addEvent("mouseover",this.on.closure(this,h)).addEvent("mouseout",this.off.closure(this,h,f)).appendTo(h);window.opera||(g.onmousedown=i.onmousedown=bkLib.cancelEvent)}this.pane.append(b.noSelect())},colorSelect:function(a){this.ne.nicCommand("foreColor",a),this.removePane()},on:function(a){a.setStyle({border:"2px solid #000"})},off:function(a,b){a.setStyle({border:"2px solid "+b})}}),nicEditorBgColorButton=nicEditorColorButton.extend({colorSelect:function(a){this.ne.nicCommand("hiliteColor",a),this.removePane()}});nicEditors.registerPlugin(nicPlugin,nicColorOptions);var nicImageOptions={buttons:{image:{name:"Add Image",type:"nicImageButton",tags:["IMG"]}}},nicImageButton=nicEditorAdvancedButton.extend({addPane:function(){this.im=this.ne.selectedInstance.selElm().parentTag("IMG"),this.addForm({"":{type:"title",txt:"Add/Edit Image"},src:{type:"text",txt:"URL",value:"http://",style:{width:"150px"}},alt:{type:"text",txt:"Alt Text",style:{width:"100px"}},align:{type:"select",txt:"Align",options:{none:"Default",left:"Left",right:"Right"}}},this.im)},submit:function(){var a=this.inputs.src.value;if(""==a||"http://"==a)return alert("You must enter a Image URL to insert"),!1;if(this.removePane(),!this.im){var b="javascript:nicImTemp();";this.ne.nicCommand("insertImage",b),this.im=this.findElm("IMG","src",b)}this.im&&this.im.setAttributes({src:this.inputs.src.value,alt:this.inputs.alt.value,align:this.inputs.align.value})}});nicEditors.registerPlugin(nicPlugin,nicImageOptions);;!function(a,b,c){function d(a,b,c){for(var d=[],e=0;e<a.length;e++){var f=tinycolor(a[e]),g=f.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";g+=tinycolor.equals(b,a[e])?" sp-thumb-active":"";var h=q?"background-color:"+f.toRgbString():"filter:"+f.toFilter();d.push('<span title="'+f.toRgbString()+'" data-color="'+f.toRgbString()+'" class="'+g+'"><span class="sp-thumb-inner" style="'+h+';" /></span>')}return"<div class='sp-cf "+c+"'>"+d.join("")+"</div>"}function e(){for(var a=0;a<o.length;a++)o[a]&&o[a].hide()}function f(a,c){var d=b.extend({},n,a);return d.callbacks={move:k(d.move,c),change:k(d.change,c),show:k(d.show,c),hide:k(d.hide,c),beforeShow:k(d.beforeShow,c)},d}function g(g,i){function k(){qb.toggleClass("sp-flat",R),qb.toggleClass("sp-input-disabled",!Q.showInput),qb.toggleClass("sp-alpha-enabled",Q.showAlpha),qb.toggleClass("sp-buttons-disabled",!Q.showButtons||R),qb.toggleClass("sp-palette-disabled",!Q.showPalette),qb.toggleClass("sp-palette-only",Q.showPaletteOnly),qb.toggleClass("sp-initial-disabled",!Q.showInitial),qb.addClass(Q.className),L()}function n(){function c(a){return a.data&&a.data.ignore?(E(b(this).data("color")),H()):(E(b(this).data("color")),K(!0),H(),C()),!1}if(p&&qb.find("*:not(input)").attr("unselectable","on"),k(),Eb&&ob.hide().after(Fb),R?ob.after(qb).hide():b(nb).append(qb.hide()),T&&a.localStorage){try{var d=a.localStorage[T].split(",#");d.length>1&&(delete a.localStorage[T],b.each(d,function(a,b){t(b)}))}catch(e){}try{kb=a.localStorage[T].split(";")}catch(e){}}Gb.bind("click.spectrum touchstart.spectrum",function(a){pb||A(),a.stopPropagation(),b(a.target).is("input")||a.preventDefault()}),(ob.is(":disabled")||Q.disabled===!0)&&P(),qb.click(j),yb.change(z),yb.bind("paste",function(){setTimeout(z,1)}),yb.keydown(function(a){13==a.keyCode&&z()}),Bb.text(Q.cancelText),Bb.bind("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),C("cancel")}),Cb.text(Q.chooseText),Cb.bind("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),G()&&(K(!0),C())}),l(wb,function(a,b,c){hb=a/bb,c.shiftKey&&(hb=Math.round(10*hb)/10),H()}),l(tb,function(a,b){eb=parseFloat(b/_),H()},x,y),l(rb,function(a,b){fb=parseFloat(a/Y),gb=parseFloat((Z-b)/Z),H()},x,y),Ib?(E(Ib),I(),Lb=Kb||tinycolor(Ib).format,t(Ib)):I(),R&&B();var f=p?"mousedown.spectrum":"click.spectrum touchstart.spectrum";zb.delegate(".sp-thumb-el",f,c),Ab.delegate(".sp-thumb-el:nth-child(1)",f,{ignore:!0},c)}function t(c){if(S){var d=tinycolor(c).toRgbString();if(-1===b.inArray(d,kb)&&kb.push(d),T&&a.localStorage)try{a.localStorage[T]=kb.join(";")}catch(e){}}}function u(){var a,b=[],c=kb,d={};if(Q.showPalette){for(var e=0;e<jb.length;e++)for(var f=0;f<jb[e].length;f++)a=tinycolor(jb[e][f]).toRgbString(),d[a]=!0;for(e=0;e<c.length;e++)a=tinycolor(c[e]).toRgbString(),d.hasOwnProperty(a)||(b.push(c[e]),d[a]=!0)}return b.reverse().slice(0,Q.maxSelectionSize)}function v(){var a=F(),c=b.map(jb,function(b,c){return d(b,a,"sp-palette-row sp-palette-row-"+c)});kb&&c.push(d(u(),a,"sp-palette-row sp-palette-row-selection")),zb.html(c.join(""))}function w(){if(Q.showInitial){var a=Jb,b=F();Ab.html(d([a,b],b,"sp-palette-row-initial"))}}function x(){(0===Z||0===Y||0===_)&&L(),qb.addClass(lb)}function y(){qb.removeClass(lb)}function z(){var a=tinycolor(yb.val());a.ok?E(a):yb.addClass("sp-validation-error")}function A(){X?C():B()}function B(){return X?(L(),void 0):(V.beforeShow(F())!==!1&&(e(),X=!0,b(mb).bind("click.spectrum",C),b(a).bind("resize.spectrum",W),Fb.addClass("sp-active"),qb.show(),Q.showPalette&&v(),L(),I(),Jb=F(),w(),V.show(Jb)),void 0)}function C(c){if((!c||"click"!=c.type||2!=c.button)&&X&&!R){X=!1,b(mb).unbind("click.spectrum",C),b(a).unbind("resize.spectrum",W),Fb.removeClass("sp-active"),qb.hide();var d=!tinycolor.equals(F(),Jb);d&&(Mb&&"cancel"!==c?K(!0):D()),V.hide(F())}}function D(){E(Jb,!0)}function E(a,b){if(!tinycolor.equals(a,F())){var c=tinycolor(a),d=c.toHsv();eb=d.h,fb=d.s,gb=d.v,hb=d.a,I(),b||(Lb=Kb||c.format)}}function F(){return tinycolor.fromRatio({h:eb,s:fb,v:gb,a:Math.round(100*hb)/100})}function G(){return!yb.hasClass("sp-validation-error")}function H(){I(),V.move(F())}function I(){yb.removeClass("sp-validation-error"),J();var a=tinycolor({h:eb,s:"1.0",v:"1.0"});rb.css("background-color",a.toHexString());var b=Lb;1>hb&&("hex"===b||"name"===b)&&(b="rgb");var c=F(),d=c.toHexString(),e=c.toRgbString();if(q||1===c.alpha?Hb.css("background-color",e):(Hb.css("background-color","transparent"),Hb.css("filter",c.toFilter())),Q.showAlpha){var f=c.toRgb();f.a=0;var g=tinycolor(f).toRgbString(),h="linear-gradient(left, "+g+", "+d+")";p?vb.css("filter",tinycolor(g).toFilter({gradientType:1},d)):(vb.css("background","-webkit-"+h),vb.css("background","-moz-"+h),vb.css("background","-ms-"+h),vb.css("background",h))}Q.showInput&&(1>hb&&("hex"===b||"name"===b)&&(b="rgb"),yb.val(c.toString(b))),Q.showPalette&&v(),w()}function J(){var a=fb,b=gb,c=a*Y,d=Z-b*Z;c=Math.max(-$,Math.min(Y-$,c-$)),d=Math.max(-$,Math.min(Z-$,d-$)),sb.css({top:d,left:c});var e=hb*bb;xb.css({left:e-cb/2});var f=eb*_;ub.css({top:f-db})}function K(a){var b=F();Db&&ob.val(b.toString(Lb)).change();var c=!tinycolor.equals(b,Jb);Jb=b,t(b),a&&c&&V.change(b)}function L(){Y=rb.width(),Z=rb.height(),$=sb.height(),ab=tb.width(),_=tb.height(),db=ub.height(),bb=wb.width(),cb=xb.width(),R||qb.offset(h(qb,Gb)),J()}function M(){ob.show(),Gb.unbind("click.spectrum touchstart.spectrum"),qb.remove(),Fb.remove(),o[Nb.id]=null}function N(a,d){return a===c?b.extend({},Q):d===c?Q[a]:(Q[a]=d,k(),void 0)}function O(){pb=!1,ob.attr("disabled",!1),Gb.removeClass("sp-disabled")}function P(){C(),pb=!0,ob.attr("disabled",!0),Gb.addClass("sp-disabled")}var Q=f(i,g),R=Q.flat,S=Q.showSelectionPalette,T=Q.localStorageKey,U=Q.theme,V=Q.callbacks,W=m(L,10),X=!1,Y=0,Z=0,$=0,_=0,ab=0,bb=0,cb=0,db=0,eb=0,fb=0,gb=0,hb=1,ib=Q.palette.slice(0),jb=b.isArray(ib[0])?ib:[ib],kb=Q.selectionPalette.slice(0),lb="sp-dragging",mb=g.ownerDocument,nb=mb.body,ob=b(g),pb=!1,qb=b(s,mb).addClass(U),rb=qb.find(".sp-color"),sb=qb.find(".sp-dragger"),tb=qb.find(".sp-hue"),ub=qb.find(".sp-slider"),vb=qb.find(".sp-alpha-inner"),wb=qb.find(".sp-alpha"),xb=qb.find(".sp-alpha-handle"),yb=qb.find(".sp-input"),zb=qb.find(".sp-palette"),Ab=qb.find(".sp-initial"),Bb=qb.find(".sp-cancel"),Cb=qb.find(".sp-choose"),Db=ob.is("input"),Eb=Db&&!R,Fb=Eb?b(r).addClass(U):b([]),Gb=Eb?Fb:ob,Hb=Fb.find(".sp-preview-inner"),Ib=Q.color||Db&&ob.val(),Jb=!1,Kb=Q.preferredFormat,Lb=Kb,Mb=!Q.showButtons||Q.clickoutFiresChange;n();var Nb={show:B,hide:C,toggle:A,reflow:L,option:N,enable:O,disable:P,set:function(a){E(a),K()},get:F,destroy:M,container:qb};return Nb.id=o.push(Nb)-1,Nb}function h(a,c){var d=0,e=a.outerWidth(),f=a.outerHeight(),g=c.outerHeight(),h=a[0].ownerDocument,i=h.documentElement,j=i.clientWidth+b(h).scrollLeft(),k=i.clientHeight+b(h).scrollTop(),l=c.offset();return l.top+=g,l.left-=Math.min(l.left,l.left+e>j&&j>e?Math.abs(l.left+e-j):0),l.top-=Math.min(l.top,l.top+f>k&&k>f?Math.abs(f+g-d):d),l}function i(){}function j(a){a.stopPropagation()}function k(a,b){var c=Array.prototype.slice,d=c.call(arguments,2);return function(){return a.apply(b,d.concat(c.call(arguments)))}}function l(c,d,e,f){function g(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.returnValue=!1}function h(a){if(l){if(p&&document.documentMode<9&&!a.button)return j();var b=a.originalEvent.touches,e=b?b[0].pageX:a.pageX,f=b?b[0].pageY:a.pageY,h=Math.max(0,Math.min(e-m.left,o)),i=Math.max(0,Math.min(f-m.top,n));q&&g(a),d.apply(c,[h,i,a])}}function i(a){var d=a.which?3==a.which:2==a.button;a.originalEvent.touches,d||l||e.apply(c,arguments)!==!1&&(l=!0,n=b(c).height(),o=b(c).width(),m=b(c).offset(),b(k).bind(r),b(k.body).addClass("sp-dragging"),q||h(a),g(a))}function j(){l&&(b(k).unbind(r),b(k.body).removeClass("sp-dragging"),f.apply(c,arguments)),l=!1}d=d||function(){},e=e||function(){},f=f||function(){};var k=c.ownerDocument||document,l=!1,m={},n=0,o=0,q="ontouchstart"in a,r={};r.selectstart=g,r.dragstart=g,r[q?"touchmove":"mousemove"]=h,r[q?"touchend":"mouseup"]=j,b(c).bind(q?"touchstart":"mousedown",i)}function m(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,a.apply(e,f)};c&&clearTimeout(d),(c||!d)&&(d=setTimeout(g,b))}}var n={beforeShow:i,move:i,change:i,show:i,hide:i,color:!1,flat:!1,showInput:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",preferredFormat:!1,className:"",showAlpha:!1,theme:"sp-light",palette:["fff","000"],selectionPalette:[],disabled:!1},o=[],p=!!/msie/i.exec(a.navigator.userAgent),q=function(){function a(a,b){return!!~(""+a).indexOf(b)}var b=document.createElement("div"),c=b.style;return c.cssText="background-color:rgba(0,0,0,.5)",a(c.backgroundColor,"rgba")||a(c.backgroundColor,"hsla")}(),r=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),s=function(){var a="";if(p)for(var b=1;6>=b;b++)a+="<div class='sp-"+b+"'></div>";return["<div class='sp-container'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",a,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),t="spectrum.id";b.fn.spectrum=function(a){if("string"==typeof a){var c=this,d=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=o[b(this).data(t)];if(e){var f=e[a];if(!f)throw new Error("Spectrum: no such method: '"+a+"'");"get"==a?c=e.get():"container"==a?c=e.container:"option"==a?c=e.option.apply(e,d):"destroy"==a?(e.destroy(),b(this).removeData(t)):f.apply(e,d)}}),c}return this.spectrum("destroy").each(function(){var c=g(this,a);b(this).data(t,c.id)})},b.fn.spectrum.load=!0,b.fn.spectrum.loadOpts={},b.fn.spectrum.draggable=l,b.fn.spectrum.defaults=n,b.spectrum={},b.spectrum.localization={},b.spectrum.palettes={},b.fn.spectrum.processNativeColorInputs=function(){var a=b("<input type='color' value='!' />")[0],c="color"===a.type&&"!"!=a.value;c||b("input[type=color]").spectrum({preferredFormat:"hex6"})},function(a){function b(a){if("object"==typeof a&&a.hasOwnProperty("_tc_id"))return a;var d=c(a),f=d.r,h=d.g,j=d.b,k=z(d.a),l=d.format;return{ok:d.ok,format:l,_tc_id:t++,alpha:k,toHsv:function(){var a=g(f,h,j);return{h:a.h,s:a.s,v:a.v,a:k}},toHsvString:function(){var a=g(f,h,j),b=v(360*a.h),c=v(100*a.s),d=v(100*a.v);return 1==k?"hsv("+b+", "+c+"%, "+d+"%)":"hsva("+b+", "+c+"%, "+d+"%, "+k+")"},toHsl:function(){var a=e(f,h,j);return{h:a.h,s:a.s,l:a.l,a:k}},toHslString:function(){var a=e(f,h,j),b=v(360*a.h),c=v(100*a.s),d=v(100*a.l);return 1==k?"hsl("+b+", "+c+"%, "+d+"%)":"hsla("+b+", "+c+"%, "+d+"%, "+k+")"},toHex:function(){return i(f,h,j)},toHexString:function(a){return"#"+i(f,h,j,a)},toRgb:function(){return{r:v(f),g:v(h),b:v(j),a:k}},toRgbString:function(){return 1==k?"rgb("+v(f)+", "+v(h)+", "+v(j)+")":"rgba("+v(f)+", "+v(h)+", "+v(j)+", "+k+")"},toName:function(){return B[i(f,h,j)]||!1},toFilter:function(a,c){var d=i(f,h,j,!0),e=d,g=Math.round(255*z(k)).toString(16),l=g,m=a&&a.gradientType?"GradientType = 1, ":"";if(c){var n=b(c);e=n.toHex(),l=Math.round(255*z(n.alpha)).toString(16)}return"progid:DXImageTransform.Microsoft.gradient("+m+"startColorstr=#"+p(g)+d+",endColorstr=#"+p(l)+e+")"},toString:function(a){a=a||this.format;var b=!1;return"rgb"===a&&(b=this.toRgbString()),"hex"===a&&(b=this.toHexString()),"hex6"===a&&(b=this.toHexString(!0)),"name"===a&&(b=this.toName()),"hsl"===a&&(b=this.toHslString()),"hsv"===a&&(b=this.toHsvString()),b||this.toHexString(!0)}}}function c(a){var b={r:0,g:0,b:0},c=1,e=!1,g=!1;return"string"==typeof a&&(a=q(a)),"object"==typeof a&&(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b")?(b=d(a.r,a.g,a.b),e=!0,g="rgb"):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v")?(b=h(a.h,a.s,a.v),e=!0,g="hsv"):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(b=f(a.h,a.s,a.l),e=!0,g="hsl"),a.hasOwnProperty("a")&&(c=a.a)),b.r=w(255,x(b.r,0)),b.g=w(255,x(b.g,0)),b.b=w(255,x(b.b,0)),b.r<1&&(b.r=v(b.r)),b.g<1&&(b.g=v(b.g)),b.b<1&&(b.b=v(b.b)),{ok:e,format:a&&a.format||g,r:b.r,g:b.g,b:b.b,a:c}}function d(a,b,c){return{r:255*k(a,255),g:255*k(b,255),b:255*k(c,255)}}function e(a,b,c){a=k(a,255),b=k(b,255),c=k(c,255);var d,e,f=x(a,b,c),g=w(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:h}}function f(a,b,c){function d(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+6*(b-a)*(2/3-c):a}var e,f,g;if(a=k(a,360),b=k(b,100),c=k(c,100),0===b)e=f=g=c;else{var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return{r:255*e,g:255*f,b:255*g}}function g(a,b,c){a=k(a,255),b=k(b,255),c=k(c,255);var d,e,f=x(a,b,c),g=w(a,b,c),h=f,i=f-g;if(e=0===f?0:i/f,f==g)d=0;else{switch(f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,v:h}}function h(a,b,c){a=6*k(a,360),b=k(b,100),c=k(c,100);var d=u.floor(a),e=a-d,f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=d%6,j=[c,g,f,f,h,c][i],l=[h,c,c,g,f,f][i],m=[f,f,h,c,c,g][i];return{r:255*j,g:255*l,b:255*m}}function i(a,b,c,d){var e=[p(v(a).toString(16)),p(v(b).toString(16)),p(v(c).toString(16))];return d||e[0].charAt(0)!=e[0].charAt(1)||e[1].charAt(0)!=e[1].charAt(1)||e[2].charAt(0)!=e[2].charAt(1)?e.join(""):e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0)}function j(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}function k(a,b){n(a)&&(a="100%");var c=o(a);return a=w(b,x(0,z(a))),c&&(a*=b/100),u.abs(a-b)<1e-6?1:a>=1?a%b/z(b):a}function l(a){return w(1,x(0,a))}function m(a){return parseInt(a,16)}function n(a){return"string"==typeof a&&-1!=a.indexOf(".")&&1===z(a)}function o(a){return"string"==typeof a&&-1!=a.indexOf("%")}function p(a){return 1==a.length?"0"+a:""+a}function q(a){a=a.replace(r,"").replace(s,"").toLowerCase();var b=!1;if(A[a])a=A[a],b=!0;else if("transparent"==a)return{r:0,g:0,b:0,a:0};var c;return(c=C.rgb.exec(a))?{r:c[1],g:c[2],b:c[3]}:(c=C.rgba.exec(a))?{r:c[1],g:c[2],b:c[3],a:c[4]}:(c=C.hsl.exec(a))?{h:c[1],s:c[2],l:c[3]}:(c=C.hsla.exec(a))?{h:c[1],s:c[2],l:c[3],a:c[4]}:(c=C.hsv.exec(a))?{h:c[1],s:c[2],v:c[3]}:(c=C.hex6.exec(a))?{r:m(c[1]),g:m(c[2]),b:m(c[3]),format:b?"name":"hex"}:(c=C.hex3.exec(a))?{r:m(c[1]+""+c[1]),g:m(c[2]+""+c[2]),b:m(c[3]+""+c[3]),format:b?"name":"hex"}:!1}var r=/^[\s,#]+/,s=/\s+$/,t=0,u=Math,v=u.round,w=u.min,x=u.max,y=u.random,z=a.parseFloat;b.fromRatio=function(a){if("object"==typeof a)for(var c in a)1===a[c]&&(a[c]="1.0");return b(a)},b.equals=function(a,c){return a&&c?b(a).toRgbString()==b(c).toRgbString():!1},b.random=function(){return b.fromRatio({r:y(),g:y(),b:y()})},b.desaturate=function(a,c){var d=b(a).toHsl();return d.s-=(c||10)/100,d.s=l(d.s),b(d)},b.saturate=function(a,c){var d=b(a).toHsl();return d.s+=(c||10)/100,d.s=l(d.s),b(d)},b.greyscale=function(a){return b.desaturate(a,100)},b.lighten=function(a,c){var d=b(a).toHsl();return d.l+=(c||10)/100,d.l=l(d.l),b(d)},b.darken=function(a,c){var d=b(a).toHsl();return d.l-=(c||10)/100,d.l=l(d.l),b(d)},b.complement=function(a){var c=b(a).toHsl();return c.h=(c.h+.5)%1,b(c)},b.triad=function(a){var c=b(a).toHsl(),d=360*c.h;return[b(a),b({h:(d+120)%360,s:c.s,l:c.l}),b({h:(d+240)%360,s:c.s,l:c.l})]},b.tetrad=function(a){var c=b(a).toHsl(),d=360*c.h;return[b(a),b({h:(d+90)%360,s:c.s,l:c.l}),b({h:(d+180)%360,s:c.s,l:c.l}),b({h:(d+270)%360,s:c.s,l:c.l})]},b.splitcomplement=function(a){var c=b(a).toHsl(),d=360*c.h;return[b(a),b({h:(d+72)%360,s:c.s,l:c.l}),b({h:(d+216)%360,s:c.s,l:c.l})]},b.analogous=function(a,c,d){c=c||6,d=d||30;var e=b(a).toHsl(),f=360/d,g=[b(a)];for(e.h*=360,e.h=(e.h-(f*c>>1)+720)%360;--c;)e.h=(e.h+f)%360,g.push(b(e));return g},b.monochromatic=function(a,c){c=c||6;for(var d=b(a).toHsv(),e=d.h,f=d.s,g=d.v,h=[],i=1/c;c--;)h.push(b({h:e,s:f,v:g})),g=(g+i)%1;return h},b.readable=function(a,c){var d=b(a).toRgb(),e=b(c).toRgb();return(e.r-d.r)*(e.r-d.r)+(e.g-d.g)*(e.g-d.g)+(e.b-d.b)*(e.b-d.b)>10404};var A=b.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},B=b.hexNames=j(A),C=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+e),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+e),hsv:new RegExp("hsv"+d),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();a.tinycolor=b}(this),b(function(){b.fn.spectrum.load&&b.fn.spectrum.processNativeColorInputs()})}(window,jQuery);;!function(a,b,c){function d(a,c){var d,e=b.createElement(a||"div");for(d in c)e[d]=c[d];return e}function e(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function f(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+100*(c/d),g=Math.max(1-(1-a)/b*(100-f),a),h=k.substring(0,k.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return m[e]||(n.insertRule("@"+i+"keyframes "+e+"{"+"0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}"+"100%{opacity:"+g+"}"+"}",0),m[e]=1),e}function g(a,b){var d,e,f=a.style;if(f[b]!==c)return b;for(b=b.charAt(0).toUpperCase()+b.slice(1),e=0;e<l.length;e++)if(d=l[e]+b,f[d]!==c)return d}function h(a,b){for(var c in b)a.style[g(a,c)||c]=b[c];return a}function i(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];for(var e in d)a[e]===c&&(a[e]=d[e])}return a}function j(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var k,l=["webkit","Moz","ms","O"],m={},n=function(){var a=d("style");return e(b.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),o={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},p=function q(a){return this.spin?(this.opts=i(a||{},q.defaults,o),void 0):new q(a)};p.defaults={},i(p.prototype,{spin:function(a){this.stop();var b,c,e=this,f=e.opts,g=e.el=h(d(0,{className:f.className}),{position:"relative",zIndex:f.zIndex}),i=f.radius+f.length+f.width;if(a&&(a.insertBefore(g,a.firstChild||null),c=j(a),b=j(g),h(g,{left:("auto"==f.left?c.x-b.x+(a.offsetWidth>>1):f.left+i)+"px",top:("auto"==f.top?c.y-b.y+(a.offsetHeight>>1):f.top+i)+"px"})),g.setAttribute("aria-role","progressbar"),e.lines(g,e.opts),!k){var l=0,m=f.fps,n=m/f.speed,o=(1-f.opacity)/(n*f.trail/100),p=n/f.lines;!function q(){l++;for(var a=f.lines;a;a--){var b=Math.max(1-(l+a*p)%n*o,f.opacity);e.opacity(g,f.lines-a,b,f)}e.timeout=e.el&&setTimeout(q,~~(1e3/m))}()}return e},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=c),this},lines:function(a,b){function c(a,c){return h(d(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*i+b.rotate)+"deg) translate("+b.radius+"px"+",0)",borderRadius:(b.width>>1)+"px"})}for(var g,i=0;i<b.lines;i++)g=h(d(),{position:"absolute",top:1+~(b.width/2)+"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:k&&f(b.opacity,b.trail,i,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&e(g,h(c("#000","0 0 4px #000"),{top:"2px"})),e(a,e(g,c(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),!function(){function a(a,b){return d("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',b)}var b=h(d("group"),{behavior:"url(#default#VML)"});!g(b,"transform")&&b.adj?(n.addRule(".spin-vml","behavior:url(#default#VML)"),p.prototype.lines=function(b,c){function d(){return h(a("group",{coordsize:j+" "+j,coordorigin:-i+" "+-i}),{width:j,height:j})}function f(b,f,g){e(l,e(h(d(),{rotation:360/c.lines*b+"deg",left:~~f}),e(h(a("roundrect",{arcsize:1}),{width:i,height:c.width,left:c.radius,top:-c.width>>1,filter:g}),a("fill",{color:c.color,opacity:c.opacity}),a("stroke",{opacity:0}))))}var g,i=c.length+c.width,j=2*i,k=2*-(c.width+c.length)+"px",l=h(d(),{position:"absolute",top:k,left:k});if(c.shadow)for(g=1;g<=c.lines;g++)f(g,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(g=1;g<=c.lines;g++)f(g);return e(b,l)},p.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}):k=g(b,"animation")}(),a.Spinner=p}(window,document);;define("storymaps/ui/loadingIndicator/LoadingIndicator",["dojo/dom"],function(e){return function(n,r){var i=null,s=0,o=e.byId(n),u=e.byId(r);this.init=function(){if(this.spinner!=null)return;var e={lines:16,length:7,width:7,radius:30,rotate:0,color:"#000",speed:1.1,trail:25,shadow:!0,hwaccel:!0,className:"spinner",top:4,left:6};i=(new Spinner(e)).spin(o)},this.start=function(){!i&&this.init(),this.itemCount||(i.spin(o),o.style.visibility="visible"),s=1},this.stop=function(){s--,s<=0&&(i.stop(),o.style.visibility="hidden",s=0),u&&(u.style.visibility="hidden")},this.setMessage=function(e,t){u&&(t&&(u.style.marginTop="-50px"),u.innerHTML=e,u.style.visibility="visible")},this.forceHide=function(){o.style.display="none",u&&(u.style.display="none")}}}),define("storymaps/utils/Helper",["dojo/cookie","dojo/has","esri/urlUtils","esri/geometry/webMercatorUtils","esri/geometry/Point","esri/geometry/Extent","esri/geometry/Polygon","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/OpenStreetMapLayer"],function(e,t,n,r,i,s,o,u,a,f){return{isMobile:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/IEMobile/i)},getWebmapsIDs:function(e){var t=n.urlToObject(document.location.search).query||{},r=t.webmaps;return r&&r.indexOf(",")!=-1?(configOptions.layerIndex=0,r.split(",")):t.webmap&&t.webmap.indexOf(",")!=-1?(configOptions.layerIndex=0,t.webmap.split(",")):t.webmaps?(configOptions.layerIndex=0,[t.webmaps]):t.webmap?(configOptions.layerIndex=0,[t.webmap]):configOptions&&configOptions.webmaps&&configOptions.webmaps.length&&configOptions.webmaps[0]?configOptions.webmaps:""},getAppID:function(e){var t=n.urlToObject(document.location.search).query||{};return configOptions&&configOptions.appid?configOptions.appid:t.appid},getGraphicsLayerByName:function(e,t){var n;for(var r=0;r<e.graphicsLayerIds.length;r++){n=e.getLayer(e.graphicsLayerIds[r]);if(n.name==t)return n}return null},getWebMapExtentFromItem:function(e){if(!e.extent||e.extent.length!=2)return null;var t=r.geographicToWebMercator(new i(e.extent[0][0],e.extent[0][1])),n=r.geographicToWebMercator(new i(e.extent[1][0],e.extent[1][1]));return new s({xmax:n.x,xmin:t.x,ymax:n.y,ymin:t.y,spatialReference:{wkid:102100}})},serializeExtentToItem:function(e){if(!e||!e.spatialReference)return null;var t=e.spatialReference.wkid==4326?e:r.webMercatorToGeographic(e);return[[Math.round(t.xmin*1e4)/1e4,Math.round(t.ymin*1e4)/1e4],[Math.round(t.xmax*1e4)/1e4,Math.round(t.ymax*1e4)/1e4]]},serializedExtentEquals:function(e,t){return e&&t&&e.length==t.length&&e.length==2&&e[0][0]==t[0][0]&&e[0][1]==t[0][1]&&e[1][0]==t[1][0]&&e[1][1]==t[1][1]},cloneLayer:function(e){return e.url&&e.url.match(/virtualearth\./)?new a("http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"):e instanceof a?new a(e.url):e instanceof u?new u(e.url):e.id=="OpenStreetMap"?new f:new a("http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer")},extentToPolygon:function(e){var t=new o(e.spatialReference);return t.addRing([[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]),t},getFirstLevelWhereExtentFit:function(e,t){var n=t.width,r=t.height,i=t._params.lods;for(var s=i.length-1;s>=0;s--)if(n*t._params.lods[s].resolution>e.getWidth()&&r*t._params.lods[s].resolution>e.getHeight())return s;return-1},getPortalUser:function(){var t=e("esri_auth");if(!t)return;t=JSON.parse(t.replace('"ssl":undefined','"ssl":""'));if(t.urlKey&&t.customBaseUrl&&(t.urlKey+"."+t.customBaseUrl).toLowerCase()!=document.location.hostname.toLowerCase())return;return t?t.email:null},getPortalRole:function(){var t=e("esri_auth");if(!t)return;t=JSON.parse(t.replace('"ssl":undefined','"ssl":""'));if(t.urlKey&&t.customBaseUrl&&(t.urlKey+"."+t.customBaseUrl).toLowerCase()!=document.location.hostname.toLowerCase())return;return t?t.role:null},getWebmapViewerLinkFromSharingURL:function(e){var t=e.split("/sharing/")[0];return t+"/home/webmap/viewer.html"},getItemURL:function(e,t){var n=e.split("/sharing/")[0];return n+"/home/item.html?id="+t},browserSupportAttachementUsingFileReader:function(){return!!window.FileReader&&!!window.FormData&&!!this.browserSupportCanvas()&&!!window.Blob},browserSupportCanvas:function(){var e=document.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},browserSupportFileReaderBinaryString:function(){if(!window.FileReader)return!1;var e=new window.FileReader;return"readAsArrayBuffer"in e},getBinaryStringFromArrayBuffer:function(e){var t=new Uint8Array(e),n="";for(var r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return n},addCSSRule:function(e){if(t("ie")<=8)return;$("<style>").prop("type","text/css").html(e).appendTo("head")},hex2rgba:function(e,t){var n=e.replace("#","").match(/../g),r=[],i;for(i in n)r.push(parseInt(n[i],16));return r.push(t),"rgba("+r.join()+")"}}}),define("storymaps/swipe/core/Config",[],function(){return{checkConfigFileIsOK:function(){return APPCFG&&APPCFG.COLORS&&APPCFG.COLORS.length==2&&APPCFG.COLOR_SCHEMES&&APPCFG.DEFAULT_SHARING_URL&&APPCFG.DEFAULT_PROXY_URL&&APPCFG.TIMEOUT_VIEWER_LOAD&&APPCFG.TIMEOUT_VIEWER_REQUEST&&APPCFG.TIMEOUT_BUILDER_REQUEST&&APPCFG.EMBED!==undefined&&APPCFG.HEADER_LOGO_URL!=undefined&&APPCFG.HEADER_LOGO_TARGET!=undefined&&APPCFG.HEADER_LINK_TEXT!=undefined&&APPCFG.HEADER_LINK_URL!=undefined&&APPCFG.HEADER_SOCIAL&&APPCFG.CORS_SERVER}}}),define("storymaps/swipe/core/WebApplicationData",["dojo/_base/lang","esri/geometry/Extent"],function(e,t){var n={},r={values:{}};return{set:function(i){n=e.clone(i);if(!i||!i.values)return;r=i,r.values.bookmarks&&$.each(r.values.bookmarks,function(e,n){n.extent=new t(n.extent)})},get:function(){var t=e.clone(r);return t.values.template||(t.values.template="Swipe"),t.values.templateCreation||(t.values.templateCreation=version),t.values.templateLastEdit=version,t},getBlank:function(){return{values:{webmap:r.values.webmap}}},restoreOriginalData:function(){this.set(n)},updateAfterSave:function(){n=e.clone(r)},getWebmap:function(){return r.values.webmap||configOptions.webmap},getWebmaps:function(){return r.values.webmaps?r.values.webmaps:r.values.webmap?[r.values.webmap]:configOptions.webmaps},setWebmaps:function(e){r.values.webmaps=e},getLayers:function(){if(r.values.layers)return r.values.layers;if(!app.maps[0])return null;var e=app.maps[0].layerIds||[];e.concat(app.maps[0].graphicsLayerIds);var t=e[e.length-1-configOptions.layerIndex];return t?[t]:app.maps[0].layerIds[0]?[app.maps[0].layerIds[app.maps[0].layerIds.length-1]]:null},setLayers:function(e){r.values.layers=e},getDataModel:function(){return r.values.dataModel},setDataModel:function(e){r.values.dataModel=e},getPopupTitles:function(){return r.values.popupTitles||configOptions.popupTitles},setPopupTitles:function(e){r.values.popupTitles=e},getPopupColors:function(){return r.values.popupColors||configOptions.popupColors},setPopupColors:function(e){r.values.popupColors=e},getTitle:function(){return r.values.title||configOptions.title},setTitle:function(e){r.values.title=e},getSubtitle:function(){return r.values.subtitle||configOptions.subtitle},setSubtitle:function(e){r.values.subtitle=e},setColors:function(e,t){r.values.colors=e+";"+t},getColors:function(){return r.values.colors?r.values.colors.split(";"):APPCFG.COLORS},setLogoURL:function(e){r.values.logoURL=e},getLogoURL:function(){return r.values.logoURL},setLogoTarget:function(e){r.values.logoTarget=e},getLogoTarget:function(){return r.values.logoTarget},getLayout:function(){return r.values.layout||configOptions.layout},setLayout:function(e){r.values.layout=e},getLegend:function(){return r.values.legend!=null?r.values.legend:configOptions.legend},setLegend:function(e){r.values.legend=e},getPopup:function(){return r.values.popup!=null?r.values.popup:configOptions.popup},setPopup:function(e){r.values.popup=e},getDescription:function(){return r.values.description!=null?r.values.description:configOptions.description},setDescription:function(e){r.values.description=e},getBookmarks:function(){return r.values.bookmarks||configOptions.bookmarks},setBookmarks:function(e){r.values.bookmarks=e},getHeaderLinkText:function(){return r.values.headerLinkText},getHeaderLinkURL:function(){return r.values.headerLinkURL},setHeaderLink:function(e,t){r.values.headerLinkText=e,r.values.headerLinkURL=t},getSidePanelDescription:function(){return r.values.sidePanelDescription||configOptions.sidePanelDescription},setSidePanelDescription:function(e){r.values.sidePanelDescription=e},getSeries:function(){return r.values.series||configOptions.series},setSeries:function(e){r.values.series=e},getSeriesBookmarks:function(){return configOptions.bookmarks&&configOptions.bookmarks.length?($.each(configOptions.bookmarks,function(e,n){n.extent=new t(n.extent)}),configOptions.bookmarks):r.values.bookmarks||[]},setSeriesBookmarks:function(e){e&&e.length&&(r.values.bookmarks=e)},getSocial:function(){return r.values.social},setSocial:function(e){r.values.social=e}}}),define("storymaps/swipe/core/Data",["storymaps/swipe/core/WebApplicationData","storymaps/utils/Helper"],function(e,t){return function(){var r=this,i=null,s=null;this.getWebMapItem=function(){return i},this.setWebMapItem=function(e){i=e},this.getAppItem=function(){return s||{}},this.setAppItem=function(e){s=e},this.discardChanges=function(){},this.updateAfterSave=function(){e.updateAfterSave()},this.getWebAppData=function(){return e.get()},this.userIsAppOwner=function(){return t.getPortalUser()!=null&&t.getPortalUser()==this.getAppItem().owner||app.portal&&app.portal.getPortalUser()&&app.portal.getPortalUser().username==this.getAppItem().owner}}}),define("storymaps/swipe/core/SwipeHelper",[],function(){return{isOnMobileView:function(){return $("#headerMobile").css("display")=="block"}}}),define("storymaps/ui/inlineFieldEdit/InlineFieldEdit",["dojo/has"],function(e){return function(n,r,i){function o(e,t,n){if(!e||!t||!n)return;typeof r=="function"&&r(),s=n,t.parent().parent().addClass("isEditing"),t.hide(),e.hide(),n.val(t.html()),n.show(),n.select()}function u(t){if(!t||!t.get(0))return;s=null;var n=t.get(0).value,r=t.parent().find(".text_edit_label"),o=t.parent().find(".text_edit_icon"),u=r.parent().first();r.parent().parent().removeClass("isEditing"),r.html(n),r.show(),t.hide(),o.css("display","inline-block"),e("ios")&&document.activeElement.blur(),typeof i=="function"&&i(u,n)}var s=null;$(n+" .text_edit_icon").click(function(){o($(this),$(this).parent().find(".text_edit_label"),$(this).parent().find(".text_edit_input"))}),$(n+" .text_edit_label").click(function(){o($(this).parent().find(".text_edit_icon"),$(this),$(this).parent().find(".text_edit_input"))}),$(n+" .text_edit_input").blur(function(){u($(this))}),e("ios")&&$("body").bind("touchstart",function(e){s&&e.target!=s.get(0)&&u(s)}),$(n+" .text_edit_input").keypress(function(e){var t=e.keyCode?e.keyCode:e.which;t=="13"&&u($(this))})}}),define("storymaps/ui/header/Header",["storymaps/ui/inlineFieldEdit/InlineFieldEdit","dojo/has","dojo/topic"],function(e,t,n){return function(i,s){function u(){var e="&p[title]="+encodeURIComponent($(i+" #headerMobile .title").html())+"&p[summary]="+encodeURIComponent($(i+" #headerMobile .subtitle").html())+"&p[url]="+encodeURIComponent(document.location.href)+"&p[images][0]="+encodeURIComponent($("meta[property='og:image']").attr("content"));window.open("http://www.facebook.com/sharer.php?s=100"+e,"Facebook sharing","toolbar=0,status=0,width=626,height=436")}function a(){var e="text="+encodeURIComponent($(i+" #headerMobile .title").html())+"&url="+encodeURIComponent(document.location.href)+"&related=EsriStoryMaps"+"&hashtags=storymap";window.open("https://twitter.com/intent/tweet?"+e,"Tweet","toolbar=0,status=0,width=626,height=436")}function f(){var e=["http://api.bitly.com/v3/shorten?callback=?","https://api-ssl.bitly.com/v3/shorten?callback=?"],t=location.protocol=="http:"?e[0]:e[1];$(i).find(".share_bitly").popover("destroy"),$(i).find(".share_bitly").popover({trigger:"manual",placement:"left",html:!0,content:'<div style="width:140px; height:30px"> <div id="bitlyLoad" style="position:absolute; top: 16px; left: 24px; width:130px; text-align:center;">  <img src="resources/icons/loader-upload.gif" alt="Loading" /> </div> <input id="bitlyInput" type="text" value="" style="display:none; width: 130px; margin-bottom: 0px;"/></div><script> $(document).on("click touchstart", function(src) { if( ! src || ! src.target || ! $(src.target).parents(".popover").length ){ $(".share_bitly").popover("hide"); $(document).off("click"); } });</script>'}).popover("show"),$.getJSON(t,{format:"json",apiKey:APPCFG.HEADER_SOCIAL.bitly.key,login:APPCFG.HEADER_SOCIAL.bitly.login,longUrl:document.location.href},function(e){if(!e||!e||!e.data.url)return;$("#bitlyLoad").fadeOut(),$("#bitlyInput").fadeIn(),$("#bitlyInput").val(e.data.url),$("#bitlyInput").select()})}function l(e){$(i+" #headerMobile .banner").slideDown(e===!0?0:250)}function c(){o||$(i+" #builderPanel").fadeOut("fast"),o=!1}function h(e,r){o=!0,setTimeout(function(){o&&$(i+" #builderPanel").fadeIn("fast"),o=!1},t("ios")||t("ie")==10?500:100),setTimeout(function(){n.publish("HEADER_EDITED",{src:$(e).attr("class"),value:r}),$(i+" #headerMobile .banner ."+$(e).attr("class")).html(r)},t("ios")||t("ie")==10?700:0)}var o=!1;this.init=function(t,n,r,o,u,a,f,p,d,v){this.setColor(o),this.setLogoInfo(u,a),t&&$(i).addClass("hideDesktop"),$(i+" #headerMobile .title").html(n),$(i+" #headerMobile .subtitle").html(r),s&&($(i).addClass("isBuilder"),n="<div class='text_edit_label'>"+(n||i18n.builder.header.editMe)+"</div>",n+="<div class='text_edit_icon' title='"+i18n.builder.header.templateTitle+"'></div>",n+="<textarea rows='1' class='text_edit_input' type='text'></textarea>",r="<span class='text_edit_label'>"+(r||i18n.builder.header.editMe)+"</span>",r+="<div class='text_edit_icon' title='"+i18n.builder.header.templateSubtitle+"'></div>",r+="<textarea rows='2' class='text_edit_input' type='text'></textarea>"),$(i+" #headerDesktop .title").html(n),$(i+" #headerDesktop .subtitle").html(r),s&&new e(i,c,h),!s&&!r&&($(i+" #headerDesktop .title").css("padding-top",40),$(i+" #headerDesktop .subtitle").css("height",32)),$(window).scroll(this.hideMobileBanner),$(i+" #headerMobile .banner").fastClick(this.hideMobileBanner),$(".navBar span").fastClick(function(){$(this).hasClass("current")||(location.hash=$(this).data("viewid"))}),f&&($(i+" .switchBuilder").fastClick(this.switchToBuilder),$(i+" .switchBuilder").show()),l(!0),this.setTopRightLink(p,d),this.setSocial(v,!0),$(i).css("display","block")},this.resize=function(e){$(i+" #headerDesktop .textArea").width(e-$(i+" #headerDesktop .rightArea").outerWidth()-35)},this.hideMobileBanner=function(e){$(i+" #headerMobile .banner").slideUp(e===!0?0:250),$(i+" #headerMobile").removeClass("firstDisplay")},this.mobileHeaderIsInFirstState=function(){return $(i+" #headerMobile").hasClass("firstDisplay")},this.setColor=function(e){$(i+" #headerDesktop").css("background-color",e),$(i+" #headerMobile").css("background-color",e),$(i+" #builderPanel").css("background-color",e)},this.setLogoInfo=function(e,t){!e||e=="NO_LOGO"?$(i+" .logo img").hide():($(i+" .logo img").attr("src",e),t?($(i+" .logo img").closest("a").css("cursor","pointer"),$(i+" .logo img").closest("a").attr("href",t)):$(i+" .logo img").closest("a").css("cursor","default"),$(i+" .logo img").show())},this.setTopRightLink=function(e,t){t?$(i+" .social .msLink").html(e?'<a href="'+t+'" target="_blank">'+e+"</a>":""):e?$(i+" .social .msLink").html("<span>"+e+"</a>"):$(i+" .social .msLink").html("")},this.setTitleAndSubtitle=function(e,t){$(i+" #headerMobile .title").html(e),$(i+" #headerMobile .subtitle").html(t);var n=s?i18n.builder.header.editMe:"";$(i+" #headerDesktop .title"+(s?" .text_edit_label":"")).html(e||n),$(i+" #headerDesktop .subtitle"+(s?" .text_edit_label":"")).html(t||n)},this.setSocial=function(e,t){$(i+" .share_facebook").toggle(APPCFG.HEADER_SOCIAL&&APPCFG.HEADER_SOCIAL.facebook&&(!e||e.facebook)),$(i+" .share_twitter").toggle(APPCFG.HEADER_SOCIAL&&APPCFG.HEADER_SOCIAL.twitter&&(!e||e.twitter)),$(i+" .share_bitly").toggle(APPCFG.HEADER_SOCIAL&&APPCFG.HEADER_SOCIAL.bitly&&APPCFG.HEADER_SOCIAL.bitly.enable&&APPCFG.HEADER_SOCIAL.bitly.login&&APPCFG.HEADER_SOCIAL.bitly.key&&(!e||e.bitly)),t&&($(i+" .share_facebook").fastClick(u),$(i+" .share_twitter").fastClick(a),$(i+" .share_bitly").fastClick(f))},this.switchToBuilder=function(){document.location.search.match(/appid/)?document.location=document.location.protocol+"//"+document.location.host+document.location.pathname+document.location.search+"&edit"+document.location.hash:document.location.search.slice(-1)=="?"?document.location=document.location.protocol+"//"+document.location.host+document.location.pathname+"edit"+document.location.hash:document.location=document.location.protocol+"//"+document.location.host+document.location.pathname+"?edit"+document.location.hash},this.initLocalization=function(){$(i+" #closeHeaderMobile").html(i18n.viewer.mobileView.hideIntro),$(i+" #leftViewLink").html(i18n.viewer.mobileView.navLeft),$(i+" #mapViewLink").html(i18n.viewer.mobileView.navMap),$(i+" #rightViewLink").html(i18n.viewer.mobileView.navRight),$(i+" .msLink").html(i18n.viewer.desktopView.storymapsText),$(i+" .switchBuilder").html('<div><img src="resources/icons/builder-edit-fields.png" /></div>'+i18n.viewer.desktopView.builderButton),$(i+" .share_bitly").attr("title",i18n.viewer.desktopView.bitlyTooltip)}}}),define("storymaps/ui/mapCommand/MapCommand",["dojo/has","esri/geometry/Point"],function(e,t){return function(r,i,s){function u(){navigator.geolocation.getCurrentPosition(function(e){s(!0,new t(e.coords.longitude,e.coords.latitude),e)},a,{timeout:2e3})}function a(e){s(!1,e)}var o=$('<div class="esriSimpleSliderIncrementButton"><img style="vertical-align: -2px;" src="resources/icons/mapcommand-home.png"></div>');o.fastClick(function(){i&&typeof i=="function"?i(r._params.extent):r.setExtent(r._params.extent)}),$(r.container).find(".esriSimpleSlider div:nth-child(1)").after(o),navigator&&navigator.geolocation&&s&&typeof s=="function"&&($(".esriSimpleSlider",r.container).after('<div id="mainMap_zoom_location" class="esriSimpleSlider esriSimpleSliderVertical mapCommandLocation"><div><img src="resources/icons/mapcommand-location.png"></div></div>'),$("#mainMap_zoom_location div",r.container).fastClick(u)),e("touch")&&$(".esriSimpleSlider",r.container).addClass("touch"),this.setMobile=function(e){$(".esriSimpleSlider",r.container).toggleClass("touch",e)},this.destroy=function(){$(r.container).find(".esriSimpleSliderIncrementButton").remove(),$(r.container).find("#mainMap_zoom_location").remove()}}}),define("storymaps/core/Core",["esri/map","esri/arcgis/Portal","esri/arcgis/utils","esri/dijit/Legend","storymaps/utils/Helper","storymaps/swipe/core/Config","storymaps/swipe/core/Data","storymaps/swipe/core/WebApplicationData","storymaps/swipe/core/SwipeHelper","storymaps/ui/header/Header","storymaps/ui/mapCommand/MapCommand","dojo/has","esri/IdentityManager","esri/config","esri/tasks/GeometryService","esri/request","esri/urlUtils","dojo/topic","dojo/on","dojo/_base/lang","dojo/Deferred","dojo/DeferredList","dojo/query","dijit/registry"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x){function C(e,t){console.log("swipe.core.Core - init"),N=e,et();var r=t!=null&&i.getAppID(tt())!=null;if(!s.checkConfigFileIsOK()){I("invalidConfig");return}app={map:null,maps:[],mapResponse:[],currentMapIndex:-1,portal:null,mode:"TWO_LAYERS",layout:"swipe",data:new o,builder:t,isInBuilderMode:r,header:new f("#header",r),loadingTimeout:null,initInProgress:!1,config:{}};if(!N.init(this))return;tt()||y(h,"dialog-create",function(){y(h.dialog,"show",function(){h.dialog.txtUser_.set("value","guest"),h.dialog.txtPwd_.set("value","guest"),h.dialog.btnSubmit_.onClick()})}),G();if(!configOptions.sharingurl){var u=document.location.pathname.indexOf("/apps/");u==-1&&(u=document.location.pathname.indexOf("/home/"));if(u!=-1){var a=location.pathname.substr(0,u);configOptions.sharingurl="//"+location.host+a+"/sharing/content/items",configOptions.proxyurl="//"+location.host+a+"/sharing/proxy"}else configOptions.sharingurl=APPCFG.DEFAULT_SHARING_URL}n.arcgisUrl=location.protocol+configOptions.sharingurl,configOptions.proxyurl||(configOptions.proxyurl=APPCFG.DEFAULT_PROXY_URL),p.defaults.io.proxyUrl=location.protocol+configOptions.proxyurl,h&&h.setProtocolErrorHandler(function(){return!0}),r&&APPCFG.CORS_SERVER&&$.each(APPCFG.CORS_SERVER,function(e,t){p.defaults.io.corsEnabledServers.push(t)}),p.defaults.io.timeout=r?APPCFG.TIMEOUT_BUILDER_REQUEST:APPCFG.TIMEOUT_VIEWER_REQUEST,$(document).ready(b.hitch(this,k))}function k(){console.log("swipe.core.Core - initStep2"),v({url:n.arcgisUrl.split("/sharing/")[0]+"/sharing/rest/portals/self",content:{f:"json"},callbackParamName:"callback"}).then(b.hitch(this,function(e){var t,n;commonConfig&&commonConfig.helperServices&&(commonConfig.helperServices.geometry&&commonConfig.helperServices.geometry&&(t=location.protocol+commonConfig.helperServices.geometry.url),commonConfig.helperServices.geocode&&commonConfig.helperServices.geocode.length&&commonConfig.helperServices.geocode[0].url&&(n=commonConfig.helperServices.geocode[0].url)),e.helperServices&&(e.helperServices.geometry&&e.helperServices.geometry.url&&(t=e.helperServices.geometry.url),e.helperServices.geocode&&e.helperServices.geocode.length&&e.helperServices.geocode[0].url&&(n=e.helperServices.geocode[0].url)),p.defaults.geometryService=new d(t),configOptions.geocodeServiceUrl=n,e.bingKey&&(commonConfig.bingMapsKey=e.bingKey),L()}),function(){I("portalSelf")})}function L(){console.log("swipe.core.Core - initStep3"),app.header.initLocalization(),N.initLocalization(),$(window).resize(z),$("form").bind("keydown",function(e){if(e.keyCode==13)return!1});var e=i.getAppID(tt()),t=i.getWebmapsIDs(tt()).slice(0,2);u.setWebmaps(t),y(h,"dialog-create",W),g.subscribe("CORE_UPDATE_UI",U),g.subscribe("CORE_RESIZE",z),loadingIndicator.setMessage(i18n.viewer.loading.step2),e?A(e):t&&t.length==2?D(t):t.length?P(t[0]):I("invalidConfigNoWebmap")}function A(e){console.log("swipe.core.Core - loadWebMappingApp - appId:",e);var t=m.urlToObject(document.location.search).query||{},n=t.forceLogin!=undefined;n||!tt()||tt()&&i.getPortalUser()||tt()&&app.isInBuilderMode&&!i.getPortalUser()?_().then(function(){O(e)},function(){I("notAuthorized")}):O(e)}function O(e){var t=v({url:configOptions.sharingurl+"/"+e+"",content:{f:"json"},callbackParamName:"callback",load:function(e){app.data.setAppItem(e)},error:function(){}}),n=v({url:configOptions.sharingurl+"/"+e+"/data",content:{f:"json"},callbackParamName:"callback",load:function(e){u.set(e)},error:function(){}}),r=new E([t,n]);r.then(function(){if(!n.results||!n.results[0]||!t.results||!t.results[0]){t.results&&t.results[1]&&t.results[1]&&t.results[1].httpCode==403?I("notAuthorized"):I("invalidApp");return}var e=u.getWebmaps();if(app.isInBuilderMode&&!app.data.userIsAppOwner()){I("notAuthorized");return}e&&e.length==2&&u.getDataModel()=="TWO_WEBMAPS"?D(e):e&&u.getDataModel()&&u.getLayers()!=null?P(e[0]):e&&app.isInBuilderMode?P(e[0]):e&&!app.isInBuilderMode?app.data.userIsAppOwner()?(loadingIndicator.setMessage(i18n.viewer.loading.loadBuilder),setTimeout(function(){app.header.switchToBuilder()},1200)):I("noLayerView"):I("invalidApp")})}function M(){if(app.initInProgress||$("#initPopup").is(":visible")||u.getDataModel())return;app.initInProgress=!0,Y(),I("initMobile",null,!0),z();var e=app.builder.presentInitPopup();e.then(function(){app.initInProgress=!1,V();var e=u.getWebmaps();e&&e.length==2?D(u.getWebmaps()):P(e[0])},function(){q("noLayerView"),$("#loadingOverlay").css("top","0px"),$("#header").css("display","inherit"),$("#fatalError").css("display","block"),app.initInProgress=!1,z()})}function _(){var e=new w,n=configOptions.sharingurl.split("/sharing/")[0];return app.portal=new t.Portal(n),y(h,"dialog-create",X),app.portal.signIn().then(function(){e.resolve()},function(t){e.reject()}),e}function D(e){u.getWebmaps().length==2&&(app.mode="TWO_WEBMAPS");var t=[];$.each(e,function(e,n){t.push(P(n,e))}),(new E(t)).then(function(){setTimeout(N.webmapLoaded,0)})}function P(e,t){console.log("swipe.core.Core - loadWebMap - webmapId:",e,t),t=t||0;var r=new w,i="mainMap"+t;return t==1&&u.getLayout()=="spyglass"&&app.mode=="TWO_WEBMAPS"&&(i="lensMapNode"),n.createMap(e,i,{mapOptions:{slider:i!="lensMapNode",autoResize:!1,infoWindow:app.popup[t],showAttribution:i!="lensMapNode"},ignorePopups:!1,bingMapsKey:commonConfig.bingMapsKey}).then(b.hitch(this,function(e){B(e,r)}),function(){I("createMap")}),r}function H(e){return $.inArray(e,i.getWebmapsIDs(tt()))}function B(e,t){console.log("swipe.core.Core - webMapInitCallback");if(app.mode=="TWO_WEBMAPS"){var s=$.inArray(e.itemInfo.item.id,u.getWebmaps());app.mapResponse[s]=e,app.maps[s]=e.map,s==0?(app.data.setWebMapItem(e.itemInfo),app.map=e.map):t.resolve();if(u.getLegend()||configOptions.legend)if(app.mode=="TWO_WEBMAPS"&&u.getLayout()=="swipe")if(s==0){var o=new r({map:app.maps[0],layerInfos:n.getLegendLayers(e)},"legend1");o.startup()}else{var a=new r({map:app.maps[1],layerInfos:n.getLegendLayers(e)},"legend0");a.startup()}else if(s==0){var a=new r({map:app.maps[0],layerInfos:n.getLegendLayers(e)},"legend0");a.startup()}else{var o=new r({map:app.maps[1],layerInfos:n.getLegendLayers(e)},"legend1");o.startup()}}else{app.maps=[e.map],app.mapResponse[0]=e,app.data.setWebMapItem(e.itemInfo);var f=app.maps[0].getLayer(u.getLayers()[0])||{},l=f.id,c=(app.maps[0].layerIds||[]).concat(app.maps[0].graphicsLayerIds),h=$.grep(c,function(e){return e==l});h.length||(l=(app.maps[0].layerIds||[]).concat(app.maps[0].graphicsLayerIds).slice(-1),f=app.maps[0].getLayer(l),u.setLayers(l));if(u.getLegend()||configOptions.legend){var p=f&&f.arcgisProps&&f.arcgisProps.title?f.arcgisProps.title:f&&f.name?f.name:f,d=n.getLegendLayers(e),v=$.grep(d,function(e){return e.title!=p}),g=$.grep(d,function(e){return e.title==p}),a=new r({map:app.maps[0],layerInfos:v},"legend0");a.startup();var o=new r({map:app.maps[0],layerInfos:g},"legend1");o.startup()}}var b=configOptions.title||u.getTitle()||e.itemInfo.item.title,w=configOptions.subtitle||u.getSubtitle()||e.itemInfo.item.snippet;R(u.getLayout()||configOptions.layout),z();var E=m.urlToObject(document.location.search).query||{},S=u.getColors(),x=u.getLogoURL()||APPCFG.HEADER_LOGO_URL,T=x==APPCFG.HEADER_LOGO_URL?APPCFG.HEADER_LOGO_TARGET:u.getLogoTarget();app.header.init(!app.isInBuilderMode&&(APPCFG.EMBED||E.embed||E.embed===""),b,w,S[0],x,T,!app.isInBuilderMode&&i.getAppID()&&(!tt()||app.data.userIsAppOwner()),u.getHeaderLinkText()==undefined?APPCFG.HEADER_LINK_TEXT:u.getHeaderLinkText(),u.getHeaderLinkURL()==undefined?APPCFG.HEADER_LINK_URL:u.getHeaderLinkURL(),u.getSocial()),document.title=$("<div>"+b+"</div>").text();try{t.resolve()}catch(C){}if(app.isInBuilderMode&&u.getWebmaps().length!=2&&!u.getDataModel()){y(app.maps[0],"update-end",M),setTimeout(M,5e3);return}app.mode=="TWO_LAYERS"&&setTimeout(N.webmapLoaded,0)}function j(){console.log("swipe.core.Core - initMap");var e=0;u.getLayout()=="swipe"&&app.mode=="TWO_WEBMAPS"&&(e=1),new l(app.maps[e],function(){app.maps[0].setExtent(i.getWebMapExtentFromItem(app.data.getWebMapItem().item))},N.zoomToDeviceLocation),z(),location.hash&&(location.hash="map"),window.onhashchange=function(e){if(!(location.hash!=""&&location.hash!="#"||!app.data.getIntroData()))return;K(),location.hash=="#map"?($("#mapViewLink").addClass("current"),Q(),u.getSeries()&&a.isOnMobileView()&&$("#footerMobile").show()):N.onHashChange()},N.appInitComplete()}function F(){$("#header").hasClass("hideDesktop")&&$("#sliderDiv").length&&$(window).resize(),app.loadingTimeout!=null&&($("#loadingOverlay").fadeOut(),loadingIndicator.stop()),Y()}function I(e,t,n){J(),Y(),loadingIndicator.stop();if(e=="noLayerView"){loadingIndicator.setMessage(i18n.viewer.errors[e],!0);return}e!="initMobile"&&loadingIndicator.forceHide(),$("#fatalError .error-msg").html(i18n.viewer.errors[e]),n||$("#fatalError").show()}function q(e){$("#fatalError .error-msg").html(i18n.viewer.errors[e])}function R(e){$("body").toggleClass("modern-layout",e=="integrated")}function U(){console.log("swipe.core.Core - updateUI");var e=u.getColors();R(u.getLayout()),app.header.setTitleAndSubtitle(u.getTitle()||app.data.getWebMapItem().item.title,u.getSubtitle()||app.data.getWebMapItem().item.snippet),app.header.setColor(e[0]);var t=u.getLogoURL()||APPCFG.HEADER_LOGO_URL;app.header.setLogoInfo(t,t==APPCFG.HEADER_LOGO_URL?APPCFG.HEADER_LOGO_TARGET:u.getLogoTarget()),app.header.setTopRightLink(u.getHeaderLinkText()==undefined?APPCFG.HEADER_LINK_TEXT:u.getHeaderLinkText(),u.getHeaderLinkURL()==undefined?APPCFG.HEADER_LINK_URL:u.getHeaderLinkURL()),app.header.setSocial(u.getSocial()),app.seriesPanel&&(app.seriesPanel.setColor(e[0]),app.mobileCarousel.setColor(e)),$("#infoWindowContent").css("background-color",e[1]),N.updateUI(),z()}function z(){var e=a.isOnMobileView(),t=$("#mapViewLink").hasClass("current");e?$("body").addClass("mobile-view"):$("body").removeClass("mobile-view");var n=$("body").width(),r=$("body").height(),i=$("#header").height(),s=$("#seriesPanel").height(),o=r-i-s;e&&s>0&&(o-=$("#footerMobile").height()-s),app.header.resize(n),N.resize({isMobileView:e,isOnMobileMapView:t,width:n,height:o}),$("#contentPanel").height(o),$("#contentPanel").width(n),$("#mapPanel").width(n-$("#picturePanel").width()),app.isInBuilderMode&&app.builder.resize({isMobileView:e});if(!e||e&&t)try{app.maps[0]?app.maps[0].resize(!0):app.maps[1]&&app.mode!="TWO_WEBMAPS"&&app.layout!="spyglass"&&app.maps[1].resize(!0)}catch(u){}e?$("#mainMap .esriControlsBR > div").first().removeClass("logo-med").addClass("logo-sm"):$("#mainMap .esriControlsBR > div").first().removeClass("logo-sm").addClass("logo-med")}function W(){$(".esriSignInDialog td label").siblings("br").css("display","none"),$(".esriSignInDialog .dijitDialogPaneContentArea div:nth(1)").css("display","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("padding","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("margin-bottom","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("border","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-webkit-border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-moz-border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-webkit-box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-moz-box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitValidationContainer").css("display","none"),$(".esriSignInDialog .esriErrorMsg").css("margin-top","10px"),$(".esriSignInDialog").find(".dijitDialogTitleBar").find(".dijitDialogTitle").first().html("Authentication is required"),$(".esriSignInDialog").find(".dijitDialogPaneContentArea:first-child").find(":first-child").first().css("display","none"),$(".esriSignInDialog").find(".dijitDialogPaneContentArea:first-child").find(":first-child").first().after("<div id='dijitDialogPaneContentAreaLoginText'>Please sign in with an account on <a href='http://"+h._arcgisUrl+"' title='"+h._arcgisUrl+"' target='_blank'>"+h._arcgisUrl+"</a> to access the application.</div>")}function X(){$(".esriSignInDialog").find("#dijitDialogPaneContentAreaLoginText").css("display","none"),$(".esriSignInDialog").find(".dijitDialogPaneContentArea:first-child").find(":first-child").first().after("<div id='dijitDialogPaneContentAreaAtlasLoginText'>Please sign in with an account on <a href='http://"+h._arcgisUrl+"' title='"+h._arcgisUrl+"' target='_blank'>"+h._arcgisUrl+"</a> to configure this application.</div>")}function V(){g.publish("BUILDER_INCREMENT_COUNTER"),x.byId("legend0")&&x.byId("legend0").destroy(),x.byId("legend1")&&x.byId("legend1").destroy(),$("#legendPanel").html('<div id="legend0"></div><div id="legend1"></div>'),app.maps[0]&&(app.maps[0].destroy(),app.maps[0]=null),app.maps[1]&&(app.maps[1].destroy(),app.maps[1]=null),$("#header").css("display","inherit"),$("#footer").css("display","inherit"),$("#fatalError").css("display","none"),$("#loadingOverlay").css("top","0px"),loadingIndicator.start(),loadingIndicator.setMessage(i18n.viewer.loading.step2),G(),z()}function J(){$("#header").hide(),$(".mobileView").hide(),$("#footer").hide(),$(".modal").hide()}function K(){$(".mobileView").hide(),$("#footerMobile").hide(),$(".navBar span").removeClass("current")}function Q(){$("#contentPanel").show(),$("#footerMobile").show(),$("#mapPanel").show(),z()}function G(){app.loadingTimeout=setTimeout(Z,APPCFG.TIMEOUT_VIEWER_LOAD)}function Y(){typeof app!="undefined"&&app.loadingTimeout&&(clearTimeout(app.loadingTimeout),app.loadingTimeout=null)}function Z(){if(h&&h.dialog&&h.dialog._alreadyInitialized&&!h.loadingTimeoutAlreadyFired){clearTimeout(app.loadingTimeout),G(),h._busy||(h.loadingTimeoutAlreadyFired=!0);return}loadingIndicator.stop(),loadingIndicator.setMessage(i18n.viewer.loading.fail+'<br /><button type="button" class="btn btn-medium btn-info" style="margin-top: 5px;" onclick="document.location.reload()">'+i18n.viewer.loading.failButton+"</button>",!0),app.map&&app.map.destroy()}function et(){S("#fatalError .error-title")[0].innerHTML=i18n.viewer.errors.boxTitle}function tt(){return T.environment!=["TPL","ENV","DEV"].join("_")}var T={environment:"TPL_ENV_PRODUCTION"},N=null;return{init:C,isProd:tt,appInitComplete:j,displayApp:F,openInitPopup:M,initError:I}}),define("storymaps/swipe/ui/desktop/SidePanel",["storymaps/ui/inlineFieldEdit/InlineFieldEdit","storymaps/swipe/core/WebApplicationData","esri/dijit/Legend","dojo/topic","dojo/on","dojo/dom","dojo/dom-class"],function(e,t,n,r,i,s,o){return function(n,u){function b(){$("#legendView1").empty(),$("#legendView2").empty(),$("#legendView1").append($("#legend0").children().clone()),$("#legendView2").append($("#legend1").children().clone())}function w(e,t,n){var r=$("#legendTitle").height();$("#legendTitle").css("line-height",r+"px");var i=a.find("div");t==1?u&&!_isSeries?nicEditors.findEditor("descriptionContent").setContent(e||""):!u&&!_isSeries&&i.html(e||""):!t&&!_isSeries&&(a.css("display","none"),l.css("display","none"),f.height("60%"),f.css("top",0));if(n==1)var s=setTimeout(b,1e3);else f.css("display","none"),l.css("display","none"),$("#legendView .noData").css("display","block");if(g==0&&m==0&&_isSeries==0){$("#sidePanelTabImg").css("display","none");return}app.mode=="TWO_WEBMAPS"&&d=="spyglass"?$("#mainMap1_zoom_slider").css("display","none"):app.mode=="TWO_WEBMAPS"&&d=="swipe"&&$("#mainMap0_zoom_slider").css("display","none")}function E(){if($("body").hasClass("mobile-view"))return;S()=="open"?x():T()}function S(){return $("#sidePanelTabImg").hasClass("open")?"open":"close"}function x(){if($("#sidePanel").css("left")<0)return;N("in"),o.remove("sidePanelTabImg","closeImg"),$("#sidePanelTabImg").hasClass("open")&&$("#sidePanelTabImg").removeClass("open")}function T(){N("out"),o.add("sidePanelTabImg","closeImg"),$("#sidePanelTabImg").hasClass("open")||$("#sidePanelTabImg").addClass("open")}function N(e){$("#sidePanel").animate({left:e=="in"?-350:0,queue:!1},750),$("#mainMap_zoom_location").animate({left:e=="in"?20:370,queue:!1},750),app.mode=="TWO_LAYERS"||d=="spyglass"?$("#mainMap0_zoom_slider").animate({left:e=="in"?20:370,queue:!1},750):($("#mainMap0_zoom_slider").css("display","none"),$("#mainMap1_zoom_slider").animate({left:e=="in"?20:370,queue:!1},750))}function C(e,t){a.css("background-color",e),a.find("#descriptionContent").css("background-color",e),f.css("background-color",e),l.css("background-color",t)}var a=n.find("#descriptionPanel"),f=n.find("#legendPanel"),l=n.find("#legendTitle"),c="",h=null,p=null,d=null,v=null,m=null,g=null,y=this;this.init=function(e,n,o,a,f,h,S){p=h,d=t.getLayout(),v=t.getDataModel(),m=a,g=f,_isSeries=S;if(u&&a&&!_isSeries){var x=new nicEditor({buttonList:["fontSize","fontFamily","bold","italic","underline","left","center","right","ul","html"]});$("#textEditPanel").addClass("builder"),x.setPanel("textEditPanel"),x.addInstance("descriptionContent"),c=e,x.addEvent("focus",function(){x.addEvent("blur",function(){setTimeout(function(){if(c==nicEditors.findEditor("descriptionContent").getContent())return;t.setSidePanelDescription(nicEditors.findEditor("descriptionContent").getContent()),c=nicEditors.findEditor("descriptionContent").getContent(),r.publish("BUILDER_INCREMENT_COUNTER")},250)})}),$(".nicEdit-main").parent().css("width","342px"),$(".nicEdit-main").css("width","330px"),$(".nicEdit-main").parent().css("border","none")}C(n,o),w(e,a,f),i(s.byId("sidePanelTabImg"),"click",E),l.html(i18n.swipe.swipeSidePanel.legendTitle),i(app.maps[0],"update-end",b),$(window).resize(function(){var e=$("#legendTitle").height();$("#legendTitle").css("line-height",e+"px"),y.resize()})},this.update=function(e,t){C(e,t)},this.resize=function(e,t){n.height(t-1),$(".nicEdit-panelContain").parent().css("width","348px")}}}),define("storymaps/swipe/ui/mobile/MobileSwipeView",[],function(){return function(t,n){function i(e){var t=2;if(e.length!=t)return;r=new SwipeView(n,{numberOfPages:t,loop:!1});for(var i=0;i<t;i++){var s=e[i];$(r.masterPages[i+1]).html(s)}}function s(e){r.onTouchStart(function(e){}),r.onFlip(function(e){r.currentMasterPage==1?$(t).find(".swiper").removeClass("left").addClass("right"):$(t).find(".swiper").removeClass("right").addClass("left")}),r.onMoveOut(function(){})}function o(e){$(t).css("background-color",e)}var r=null;this.init=function(e,t){o(t),i(e),s(e)},this.update=function(e){o(e)},this.show=function(){$(t).show(),r.refreshSize(),r.goToPage(0)}}}),define("storymaps/swipe/ui/mobile/Carousel",[],function(){return function(t,n){function u(e){r=new SwipeView(t+" .carousel",{numberOfPages:e.length}),o.length=e.length;var n=Math.min(3,Math.max(3,e.length));for(var i=0;i<n;i++){var s=e.length==1?0:i==0?e.length-1:i-1,u=e[s];if(!u)continue;var a=u.name,f=u.description,l=document.createElement("div");l.className="tpPreview";var c=document.createElement("div");c.className="tpImgPane",l.appendChild(c);var h=document.createElement("div");h.className="tpImgContainer seriesButton",c.appendChild(h);var p=document.createElement("p");p.className="seriesLabel";var d=e.indexOf(u)+1;p.innerHTML=d,h.appendChild(p);var v=document.createElement("div");v.className="tpTextPane",l.appendChild(v);var m=document.createElement("h4");m.className="tpName",m.innerHTML=a||"",v.appendChild(m);var g=document.createElement("p");g.className="tpDescription previewDescription",g.innerHTML=f||"",v.appendChild(g),r.masterPages[i].appendChild(l)}setTimeout(function(){o.setSelectedPoint(app.bookmarkIndex||0)},250)}function a(e){$(".tpPreview").click(function(e){if(Math.abs(e.clientX-s[0])<10&&Math.abs(e.clientY-s[1])<10)var t=$(this).find(".tpName").html();var n=$(this).find(".tpDescription").html(),r=!0;o.setDescriptionView(t,n,r)}),$("#seriesTextView").click(function(){$("#seriesTextView").hide(),$("#footerMobile").show(),location.hash="map"}),$(t+" .carousel").mousedown(function(e){s=[e.clientX,e.clientY]}),r.onFlip(function(){var t=Math.min(3,e.length);for(var n=0;n<t;n++){var i=r.masterPages[n],s=i.dataset.upcomingPageIndex;if(!e[s])return;var o=e[s].name,u=e[s].description;if(s!=i.dataset.pageIndex){var a=i.querySelector(".tpName");a.innerHTML=o;var f=i.querySelector(".tpDescription");f.innerHTML=u;var l=i.querySelector(".seriesLabel");l.innerHTML=parseInt(s)+1}}$("#footerMobile").is(":visible")&&dojo.publish("CAROUSEL_SWIPE",r.pageIndex)})}function f(e){var n=$(t+" .carousel .swipeview-active");n.find(".tpName").html(e.name),n.find(".tpDescription").html(e.description)}var r=null,i=!1,s=[0,0],o=this;this.started=!1,this.needUpdate=!1,this.init=function(e,t){u(e),a(e),o.setColor(t)},this.update=function(e,n){o.setColor(n),r.destroy(),$(t+" .carousel").empty(),u(e),a(e),o.needUpdate=!1},this.setSelectedPoint=function(e){if(!r)return;o.started=!0,r.refreshSize(),r.goToPage(e)},this.setColor=function(e){$(t+" .carousel").css("background-color",e[1]),$(t+" .builderMobile").css("background-color",e[1]);var n=["#444","#000","#0e3867","#1a3606"],r=["#828282","#828282","#9096a9","#a8b09e"],i=0;$.each(n,function(t){n[t].match(e[0])&&(i=t)}),$(".seriesButton").css("background-color",r[i])},this.setDescriptionView=function(e,t,n){$("#seriesTitle").html(e),$("#seriesDescription").html(t),$("#seriesViewLabel").find(".seriesLabel").html(parseInt(app.bookmarkIndex)+1),n?location.hash="description":n=!0}}}),define("storymaps/swipe/ui/MapSwipe",["dojo/dnd/move","esri/widgets","dijit/registry","dojo/has","esri/geometry/Point","esri/geometry/Extent","esri/geometry/screenUtils","dojo/on","dojo/_base/connect","dojo/query","dojo/dom","dojo/dom-style"],function(e,t,n,r,i,s,o,u,a,f,l,c){return function(h){function x(){$(".esriPopup").css("visibility","hidden"),$(".esriPopup .title").css("display","none"),$(".esriPopup .prev").css("display","none"),$(".esriPopup .next").css("display","none"),$(".esriPopup .maximize").css("display","none"),$(".esriPopup .title").after('<div class="swipeTitle"></div>')}function T(){$("#resizeWrapper").css("width","0%"),$("#mainMap1").css("width","0%");var t=f(h+" #sliderDiv"),n=new e.parentConstrainedMoveable(t[0],{area:"mainMap0",within:!0});app.sliderDiv=n,r("touch")&&$(".moveable").addClass("touch"),n.node.style.height=p[0].height+"px",n.node.style.top="0px",n.node.style.left=$("#mainMap0").width()/2+y+"px",$("#swipeImg").css("left",$("#mainMap0").width()/2-34+y+"px"),$("#swipeImg").css("top",$("#mainMap0").height()/2-26+"px"),$("#swipeImg").show(),N(n)}function N(e){var t=null,n=e.node.offsetLeft;k(n),u(p[0],"click",function(e){$(".esriPopup").css("visibility","hidden"),t=e,$("#swipeImg").fadeOut(),S="open"}),u(app.popup[0],"set-features",function(){setTimeout(function(){L(t,0)})}),a.connect(e,"onMove",function(r){var i=parseInt(e.node.offsetLeft);if(i<=0||i>=p[0].width)return;n=i,k(n),L(t)}),$(window).resize(function(){e.node.style.height=p[0].height+"px"}),a.connect(e,"onMoveStart",function(e){$("#swipeImg").fadeOut()}),u(p[0],"pan",function(t){k(e.node.offsetLeft)}),u(p[0],"pan-end",function(e){L(t)});var r=app.maps[0].getLayer(d[0]).type=="Feature Layer";if(r){u(p[0],"pan-end",function(t){k(e.node.offsetLeft)});var i=app.maps[0].getLayer(d[0]);if(i._collection)dojo.connect(app.maps[0],"onZoomEnd",function(){k(e.node.offsetLeft)});else{var s=i._params&&i._params.opacity?i._params.opacity:1,o=!1;u(app.maps[0],"zoom-start",function(){o=!0}),u(app.maps[0].getLayer(d[0]),"update-start",function(){o&&app.maps[0].getLayer(d[0]).setOpacity(0)}),u(app.maps[0].getLayer(d[0]),"update-end",function(){o&&app.maps[0].getLayer(d[0]).setOpacity(s),k(e.node.offsetLeft),o=!1})}}p[0].navigationMode==="css-transforms"&&u(p[0],"pan",function(t){k(e.node.offsetLeft)})}function C(e){var t=app.maps[0].toMap(new i(0,app.maps[0].height,app.maps[0].spatialReference)),n=app.maps[0].toMap(new i(e,0,app.maps[0].spatialReference)),r=new s(t.x,t.y,n.x,n.y,app.maps[0].spatialReference);$.each(p[0].getLayer(d[0]).graphics,function(e,t){var n=t.geometry.type=="point"?t.geometry:t.geometry.getExtent().getCenter();r.contains(n)?t.show():t.hide()})}function k(e){var t=l.byId("sliderDiv"),n=p[0].getLayer(d[0])._div;if(t!=null){offset_left=parseFloat(t.style.left),offset_top=parseFloat(t.style.top);var r,i,s,o;offset_left>0?(r=parseFloat(e)-Math.abs(offset_left),i=offset_left):offset_left<0?(i=0,r=parseFloat(e)+Math.abs(offset_left)):(i=0,r=parseFloat(e)),offset_top>0?(s=-offset_top,o=p[0].height-offset_top):offset_top<0?(s=0,o=p[0].height+Math.abs(offset_top)):(s=0,o=p[0].height);var u=app.maps[0].getLayer(d[0]).type=="Feature Layer";if(u){C(i);return}var a=dojo.position(dojo.byId("sliderDiv")),f=dojo.position(n),c=a.x-f.x,h=a.y-f.y;i=c,o=a.h+(a.y-f.y),r=0-f.x,s=h;var v="rect("+s+"px, "+i+"px, "+o+"px, "+r+"px)";n.style.clip=v}}function L(e){if(!e||!app.popup[0]||S=="closed"||!g)return;var t=o.toScreenGeometry(app.maps[0].extent,app.maps[0].width,app.maps[0].height,e.mapPoint),n=app.maps[0].getLayer(d[0]).type=="Feature Layer",r=parseInt(l.byId("sliderDiv").style.left.split("px",1)),i=t.x<r,s=d[0]+(n?"":"_1"),a=i?1:0;b=e;if(!app.popup[0].features)return;var c=!1;for(var h=0;h<app.popup[0].features.length;h++){var p=app.popup[0].features[h],y=p._graphicsLayer.id;if(i&&y==s||!i&&y!=s){c=!0,$(".esriPopup .titlePane").css("backgroundColor","#"+v[a]),$(".esriPopup .swipeTitle").html(m[a]||"&nbsp;"),$(".esriPopup .swipeTitle").append('<div id="popup0" class="closePopup"><a ><i class="icon-remove icon-white"></i></a></div>'),$(".esriPopup").css("visibility","visible"),u(f(".titleButton.close"),"click",function(){S="closed"}),app.popup[0].select(h),S="open";break}}c||$(".esriPopup").css("visibility","hidden");var w=!1,E=!1;for(var h=0;h<app.popup[0].features.length;h++){var p=app.popup[0].features[h],y=p._graphicsLayer.id;!w&&y!=s&&(w=!0,B(0,p)),!E&&y==s&&(E=!0,B(1,p));if(w&&E)break}}function A(){$("#resizeWrapper").resizable({handles:"e",containement:"parent",minWidth:2}),r("touch")&&$(".ui-resizable-e").addClass("touch"),$("#mainMap1").css("width","100%"),$(".esriPopup").css("zIndex","99");var e=null;O(),u(p[0],"click",function(t,n){app.popup[0].hide(),app.popup[1].hide(),$("#swipeImg1").fadeOut(),e=t,S="open";if(app.popup[0].isShowing==1)return;if(n=="other")return;p[1].onClick(t,"other")}),u(app.popup[0],"set-features",function(){setTimeout(function(){H(e,0)},0)}),u(p[1],"click",function(t,n){app.popup[0].hide(),app.popup[1].hide(),e=t,S="open";if(app.popup[1].isShowing==1)return;if(n=="other")return;p[0].onClick(t,"other")}),u(app.popup[1],"set-features",function(){setTimeout(function(){H(e,1)},0)}),u(p[0],"pan-end",function(e){var t={};if(app.popup[0].isShowing==1)t.x=app.popup[0].domNode.offsetLeft;else{if(app.popup[1].isShowing!=1)return;t.x=app.popup[1].domNode.offsetLeft}H(t)}),u(p[1],"pan-end",function(e){var t={};if(app.popup[0].isShowing==1)t.x=app.popup[0].domNode.offsetLeft;else{if(app.popup[1].isShowing!=1)return;t.x=app.popup[1].domNode.offsetLeft}H(t)}),$(window).resize(function(){var e=null;app.popup[0].isShowing&&(e=app.popup[0].domNode.offsetLeft),app.popup[1].isShowing&&(e=app.popup[1].domNode.offsetLeft),$("#swipeImg1").fadeOut(),M({x:e})});var t=$("#mainMap0").find(".esriPopup");t.after($("#mainMap1").find(".esriPopup")),c.set(l.byId("sliderDiv"),"display","none"),P()}function O(){$(".esriPopup .titlePane").eq(0).css("backgroundColor","#"+v[0]),$(".esriPopup .swipeTitle").eq(0).html(m[0]||"&nbsp;"),$(".esriPopup .swipeTitle").eq(0).append('<div id="closePopup0" class="closePopup"><a ><i class="icon-remove icon-white"></i></a></div>'),l.byId("closePopup0")&&u(l.byId("closePopup0"),"click",function(){S="closed",$(".esriPopup").css("visibility","hidden")}),$(".esriPopup .titlePane").eq(1).css("backgroundColor","#"+v[1]),$(".esriPopup .swipeTitle").eq(1).html(m[1]||"&nbsp;"),$(".esriPopup .swipeTitle").eq(1).append('<div id="closePopup1" class="closePopup"><a ><i class="icon-remove icon-white"></i></a></div>'),l.byId("closePopup1")&&u(l.byId("closePopup1"),"click",function(){S="closed",$(".esriPopup").css("visibility","hidden")})}function M(e){$("#mainMap1").css("width",l.byId("mainMap0").clientWidth),$("#mainMap1").css("height",l.byId("mainMap0").clientHeight),p[0]&&p[0].resize(),p[1]&&p[1].resize(),e.x&&H(e)}function _(){if(w==1){w=!1;return}w=!0,p[1].setExtent(p[0].extent)}function D(){if(w==1){w=!1;return}w=!0,p[0].setExtent(p[1].extent)}function P(){$("#mainMap1").css("width",l.byId("mainMap0").clientWidth),$("#resizeWrapper").css("width",$("#mainMap0").width()/2+y),$("#swipeImg1").css("left",$("#mainMap0").width()/2-44+y+"px"),$("#swipeImg1").css("top",$("#mainMap0").height()/2-26+"px"),$("#swipeImg1").show(),app.maps[1].resize(!0),p[1].setExtent(p[0].extent).then(function(){u(p[0],"extent-change",_),u(p[1],"extent-change",D),w=!1})}function H(e,t){if(!e||S=="closed"||!g)return;E=e.pageY?e.mapPoint:E;var n=e.pageX||e.x,r=n>$("#resizeWrapper").width()?0:1;app.popup[r].show(E),app.popup[r?0:1].hide(),t!=null&&B(t,(app.popup[t].features||[null])[0])}function B(e,t){t?n.byId("infoView-mobile"+e).set("content",t.getContent()):n.byId("infoView-mobile"+e).set("content",'<div class="noDataMap"><div class="title">'+i18n.swipe.mobileData.noDataMap+"</div></div>"),$("#infoWindowView .noData").hide(),$(".swiper.infoWindowView").css("display","block")}var p=null,d=null,v=null,m=null,g=!0,y=null,b=null,w=!0,E=null,S=null;this.init=function(e,t,n,r,i,s){console.log("MapSwipe init",e,t,n,r,s),p=e,d=t,v=n,m=r,y=i,g=s,$("#infoWindowTabImg").css("display","none"),$("#infoWindow").css("display","none"),g||$.each(app.popup,function(e){app.popup[e].destroy()}),x(),p.length==1?T():A()},this.updateSettings=function(e,t){if(!p||p.length==0)return;v=e,m=t,p.length==1?b&&L(b):O()}}}),define("storymaps/swipe/ui/SpyGlass",["dojo/_base/declare","dojo/_base/connect","dojo/_base/html","dojo/_base/lang","dojo/dnd/move","dojo/has","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/dom-class","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/registry","esri/geometry/Point","esri/geometry/Extent","esri/geometry/Polygon","esri/config","esri/geometry/webMercatorUtils","esri/geometry/screenUtils","esri/geometry/ScreenPoint","esri/SpatialReference","dojo/on"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){function N(e,t,n){if(!_popup)return;var r=app.popup[e].getSelectedFeature();if(_mode=="TWO_WEBMAPS"){_popupColors2=[_popupColors[1],_popupColors[0]],_popupTitles2=[_popupTitles[1],_popupTitles[0]];if(!r){$("#infoWindowTitle").css("backgroundColor","#"+_popupColors2[t]),$("#infoWindowTitle").html(_popupTitles2[t]||"&nbsp;"),$("#infoWindowContent").html(i18n.swipe.mobileData.noPopup);return}C(r,e,n),n!=0&&($("#infoWindowTitle").css("backgroundColor","#"+_popupColors2[t]),$("#infoWindowTitle").html(_popupTitles2[t]||"&nbsp;"),x.getInfoWindowState()=="close"&&!x._popupClosedByUser&&x.openInfoWindow())}else{if(!r){$("#infoWindowTitle").css("backgroundColor","#"+_popupColors[t]),$("#infoWindowTitle").html(_popupTitles[t]||"&nbsp;"),$("#infoWindowContent").html(i18n.swipe.mobileData.noPopup);return}C(r,e,n),n!=0&&($("#infoWindowTitle").css("backgroundColor","#"+_popupColors[t]),$("#infoWindowTitle").html(_popupTitles[t]||"&nbsp;"),x.getInfoWindowState()=="close"&&!x._popupClosedByUser&&x.openInfoWindow())}}function C(e,t,n){e?p.byId("infoView-mobile"+t).set("content",e.getContent()):p.byId("infoView-mobile"+t).set("content",'<div class="noDataMap"><div class="title">'+i18n.swipe.mobileData.noDataMap+"</div></div>"),$("#infoWindowView .noData").hide(),$(".swiper.infoWindowView").css("display","block");if(n!=0){$("#infoWindowContent").removeClass("noData");var r=e.getContent();p.byId("infoWindowContent").set("content",r)}}var x=null,T=e([l,c,h],{templateString:"<div></div>",_lensMap:null,_started:!1,_clickPoint:null,_popupColors:null,_popupTitles:null,_popupColors2:[],_popupTitles2:[],_layers:null,_displayedPopupIndex:null,_spyExtent:null,_rightVal:null,_leftVal:null,_topVal:null,_bottomVal:null,_isGraphics:!1,_moving:!1,_popupClosedByUser:!1,_clickOnLens:!1,_popup:!0,_mode:null,startup:function(e,u,f,l,c,h,p,v){x=this,this.lensWin="lensWin",$("#lensWin").css("display","block"),a.set(o.byId("sliderDiv"),"display","none"),$("#mapPanel").css("overflowX","hidden"),$("#infoWindowTitle").html(i18n.swipe.infoWindow.noFeature),$("#infoWindowContent").html('<div class="noFeature">'+i18n.swipe.infoWindow.noFeatureExplain+"</div>"),_layers=h,_popupColors=f,_popupTitles=l,_mode=c,_popup=v,_popup||($("#infoWindow").addClass("disable"),$.each(app.popup,function(e){app.popup[e].destroy()}));var m=function(){var e=n.coords("mainMap0"),t={};return t.t=0,t.l=0,t.w=e.l+e.w,t.h=e.h+e.t,t},b=function(e){setTimeout(function(){if(x._moving){x._moving=!1;return}var t=e.pageX,n=e.pageY-$("#header").height();e.x=t,e.y=n,e.screenPoint={x:t,y:n},e.type="click",e.fromLens=!0,e.mapPoint=app.maps[0].toMap(new d(t,n,app.maps[0].spatialReference)),app.maps[0].onClick(e,"other"),x._moving=!1},100)},w=$("#lensTool"),E=!1,T=0,C=0,k=0,L=0;w.on("touchstart mousedown",function(e){e.preventDefault(),k=e.pageX,L=e.pageY,E=!0,setTimeout(function(){T=e.pageX,C=e.pageY,k===T&&!E&&L===C&&b(e.originalEvent)},200)}),w.on("touchend mouseup touchcancel",function(e){e.preventDefault(),E=!1}),w.on("touchmove mousemove",function(e){e.preventDefault()}),S(o.byId("lensTool"),"click",function(e){b(e)}),this.draggableWin=new i.constrainedMoveable(this.lensWin,{handle:this.lensWin,constraints:m,within:!0});var A=130;$("#lensTool").css("width")=="200px"&&(A=100);var O=Math.floor(parseInt($("#mainMap0").css("height"))/2)-A+"px",M=Math.floor(parseInt($("#mainMap0").css("width"))/2)-A+p+"px";a.set(this.lensWin,{top:O,left:M}),S(app.popup[0],"set-features",function(){c=="TWO_WEBMAPS"?(x._clickOnLens||N(0,1),x._displayedPopupIndex=x._clickOnLens?1:0):(x.calculateSpyExtent(),x._displayedPopupIndex=0)}),S(app.popup[1],"set-features",function(e){N(1,0,x._clickOnLens?!0:!1)}),S(app.maps[0],"click",function(e){x._popupClosedByUser=!1,app.popup[0].hide(),x._clickPoint=e,x._clickOnLens=e.fromLens;var t=e.pageX-$("#lensWin").position().left,n=e.pageY-($("#lensWin").position().top+$("#header").height());e.x=t,e.y=n,e.screenPoint.x=t,e.screenPoint.y=n,c=="TWO_WEBMAPS"&&app.maps[1].onClick(e,"other")}),app.maps[1]&&S(app.maps[1],"click",function(e){app.popup[1].hide()}),S(o.byId("infoWindowTabImg"),"click",x.toggleInfoWindow),t.connect(this.draggableWin,"onMove",function(){x._moving=!0});if(c=="TWO_WEBMAPS"){$("#lensTool").addClass("twoMaps"),g.defaults.map.panDuration=0;var _=function(){var e=y.webMercatorToGeographic(app.maps[0].extent.getCenter());return[parseFloat(e.x.toFixed(3)),parseFloat(e.y.toFixed(3))]}();this._lensMap=app.maps[1],t.connect(this.draggableWin,"onMove",r.hitch(this,this.syncLensExtent)),S(app.maps[0],"pan",r.hitch(this,this.syncLensExtent)),S(app.maps[0],"extent-change",r.hitch(this,this.syncLensExtent)),s("touch")?(t.connect(this.draggableWin,"onMoveStop",r.hitch(this,this.checkLensFeature)),S(app.maps[0],"pan-end",r.hitch(this,this.checkLensFeature))):(t.connect(this.draggableWin,"onMove",r.hitch(this,this.checkLensFeature)),S(app.maps[0],"pan",r.hitch(this,this.checkLensFeature))),(s("safari")||s("ie")==8||s("agent-ios")||s("agent-android"))&&$("#lensMapNode, #lensTool").addClass("safariFix"),r.hitch(this,this.syncLensExtent())}else{$("#lensTool").addClass("twoLayers"),x._isGraphics=app.maps[0].getLayer(_layers[0]).type=="Feature Layer",x._isGraphics||(t.connect(this.draggableWin,"onMove",r.hitch(this,this.clipGlass)),S(app.maps[0],"pan",r.hitch(this,function(){this.clipGlass("pan")})),s("touch")&&(t.connect(this.draggableWin,"onMoveStop",r.hitch(this,this.calculateSpyExtent)),S(app.maps[0],"pan-end",r.hitch(this,this.calculateSpyExtent)))),t.connect(this.draggableWin,"onMove",r.hitch(this,this.calculateSpyExtent)),S(app.maps[0],"pan",r.hitch(this,this.calculateSpyExtent));if(x._isGraphics){var D=app.maps[0].getLayer(_layers[0]);if(D._collection)S(app.maps[0],"zoom-end",r.hitch(this,this.calculateSpyExtent));else{var P=D._params&&D._params.opacity?D._params.opacity:1,H=!1;S(app.maps[0],"zoom-start",function(){H=!0}),S(app.maps[0].getLayer(_layers[0]),"update-start",function(){H&&app.maps[0].getLayer(_layers[0]).setOpacity(0)}),S(app.maps[0].getLayer(_layers[0]),"update-end",r.hitch(this,function(){H&&app.maps[0].getLayer(_layers[0]).setOpacity(P),this.calculateSpyExtent(),H=!1}))}}$(window).resize(function(){x._isGraphics?this.calculateSpyExtent:x.clipGlass()}),x._isGraphics?setTimeout(this.calculateSpyExtent,1500):setTimeout(this.clipGlass,0),$("#lensWin").css({borderRadius:0})}x._isGraphics&&S(app.maps[0],"pan-end",r.hitch(this,this.calculateSpyExtent)),this._started=!0},syncLensExtent:function(){var e=n.coords(x.lensWin),t=app.maps[0].toMap(new d(e.l,e.t+400,app.maps[0].spatialReference)),r=app.maps[0].toMap(new d(e.l+400,e.t,app.maps[0].spatialReference));_spyExtent=new v(t.x,t.y,r.x,r.y,app.maps[0].spatialReference),x._lensMap.setExtent(_spyExtent);if($("#lensTool").css("width")=="200px")return},checkLensFeature:function(){if(!_popup)return;var e=400,t=$("#lensTool").width(),n=new d(_spyExtent.xmin+(_spyExtent.xmax-_spyExtent.xmin)/e*t/2,_spyExtent.ymax+(_spyExtent.ymin-_spyExtent.ymax)/e*t/2,_spyExtent.spatialReference),r=(_spyExtent.xmax-_spyExtent.xmin)/(e/t)/2,i=[];for(var s=1;s<31;s++){var o=s*12*Math.PI/180,u=n.x+r*Math.cos(o),a=n.y+r*Math.sin(o);i.push([u,a])}i.push(i[0]);var f=new m(new E(app.maps[0].spatialReference));f.addRing(i),x._clickPoint&&(f.contains(x._clickPoint.mapPoint)?N(1,0):N(0,1))},clipGlass:function(e){var t=$("#lensWin"),n=app.maps,r=n[0].getLayer(_layers[0])._div;if(t!=null){_leftVal=parseFloat(t.css("left")),_topVal=parseFloat(t.css("top")),_rightVal=_leftVal+parseInt($("#lensWin").css("width")),_bottomVal=_topVal+parseInt($("#lensWin").css("height"));var i=$("#lensWin").position(),s=$(r).position(),o=i.left-s.left,u=i.top-s.top;$("#lensTool").css("width")=="200px"?(_leftVal=o+7,_rightVal=o+200-6,_topVal=u+7,_bottomVal=u+200-6):(_leftVal=o+9,_rightVal=o+261-9,_topVal=u+9,_bottomVal=u+261-9);var a="rect("+_topVal+"px, "+_rightVal+"px, "+_bottomVal+"px, "+_leftVal+"px)";r.style.clip=a}},calculateSpyExtent:function(e){var t=app.maps[0].extent,n=app.maps[0].width,r=app.maps[0].height;if(x._isGraphics){var i=$("#lensWin");i!=null&&(_leftVal=parseFloat(i.css("left")),_rightVal=_leftVal+parseInt($("#lensWin").css("width")),_topVal=parseFloat(i.css("top")),_bottomVal=_topVal+parseInt($("#lensWin").css("height")),$("#lensTool").css("width")=="200px"?(_leftVal+=6,_rightVal+=-6,_topVal+=6,_bottomVal+=-6):(_leftVal+=9,_rightVal+=-9,_topVal+=9,_bottomVal+=-9))}var s=new w(_rightVal,_topVal),o=new w(_leftVal,_bottomVal),u=b.toMapGeometry(t,n,r,s),a=b.toMapGeometry(t,n,r,o);spyExtent=new v(a.x,a.y,u.x,u.y,new E(app.maps[0].spatialReference));var f=null;spyExtent=new v(a.x,a.y,u.x,u.y,new E(app.maps[0].spatialReference)),x.checkSelectedFeature(spyExtent),x._isGraphics&&x.hideGraphics(spyExtent)},hideGraphics:function(e){$.each(app.maps[0].getLayer(_layers[0]).graphics,function(t,n){var r=n.geometry.type=="point"?n.geometry:n.geometry.getExtent().getCenter();e.contains(r)?n.show():n.hide()})},checkSelectedFeature:function(e){if(!_popup)return;e=e;if(x._clickPoint!=null&&app.popup[0].features){var t=e.contains(x._clickPoint.mapPoint),n=_layers[0]+(x._isGraphics?"":"_1");colorTitleIndex=t?1:0;for(var r=0;r<app.popup[0].features.length;r++){var i=app.popup[0].features[r],s=i._graphicsLayer.id;if(!t&&s==n||t&&s!=n){var o=app.popup[0].features[r];p.byId("infoView-mobile1").set("content",o.getContent()),$("#infoWindowView .noData").hide(),$(".swiper.infoWindowView").css("display","block");break}}for(var r=0;r<app.popup[0].features.length;r++){var o=app.popup[0].features[r],s=o._graphicsLayer.id;if(t&&s==n||!t&&s!=n){app.popup[0].select(r),N(0,colorTitleIndex);break}}x._displayedPopupIndex=colorTitleIndex}},toggleInfoWindow:function(){x.getInfoWindowState()=="open"?x.closeInfoWindow():x.openInfoWindow(),x._popupClosedByUser=!x._popupClosedByUser},getInfoWindowState:function(){return $("#infoWindowTabImg").hasClass("open")?"open":"close"},closeInfoWindow:function(){if($("#infoWindow").css("right")=="-260px")return;x.infoWindowSlide("in"),f.remove("infoWindowTabImg","closeImg"),$("#infoWindowTabImg").hasClass("open")&&$("#infoWindowTabImg").removeClass("open")},openInfoWindow:function(){x.infoWindowSlide("out"),f.add("infoWindowTabImg","closeImg"),$("#infoWindowTabImg").hasClass("open")||$("#infoWindowTabImg").addClass("open")},infoWindowSlide:function(e){$("#infoWindow").animate({right:e=="in"?-240:3},{duration:1e3})},updateSettings:function(e,t){if(!this._started)return;if(this._displayedPopupIndex==null)return;$("#infoWindowTitle").css("backgroundColor","#"+_popupColors[this._displayedPopupIndex]),$("#infoWindowTitle").html(_popupTitles[this._displayedPopupIndex]||"&nbsp;")}});return T}),define("storymaps/swipe/ui/desktop/SeriesPanel",["storymaps/ui/inlineFieldEdit/InlineFieldEdit","dojo/has","dojo/topic","esri/geometry/Extent","esri/SpatialReference","storymaps/swipe/core/WebApplicationData","dojo/on"],function(e,t,n,r,i,s,o){return function(t,r){function a(e){var t=1,n=o(app.maps[0],"extent-change",function(r){r&&r.delta&&(r.delta.x||r.delta.y)&&(t==e&&($(".series-extentSave").removeAttr("disabled"),n.remove()),t++)})}function f(){var e=i.length<=1;$("#seriesControls .series-discard").attr("disabled",e),$("#seriesControls .series-discard").attr("title",e?i18n.swipe.seriesPanel.discardDisabled:"")}var i=null,u=this;this.started=!1,this.init=function(e,n){if($(t).height()=="35")return;$(t).height("35px"),this.setColor(n),i=e;if(e)for(var s=0;s<e.length;s++){var o=e[s].name;o=="<br>"&&(o=""),$("#seriesNav").append('<div id="series'+s+'" class="seriesButton" data-toggle="tooltip" data-placement="bottom" title data-original-title="'+o+'"><p class="seriesLabel"> '+(s+1)+"</div>"),$("#series"+s).tooltip()}$("#series0").addClass("seriesButton selected"),$(".seriesButton").fastClick(this.getButtonIndex),$("#descriptionTitle").addClass("series"),$("#descriptionContent").addClass("series");if(r){$("#seriesBuilder").append('<div id="addSeries" class="addSeriesButton" data-toggle="tooltip" data-placement="bottom" title data-original-title="Add a bookmark"><p class="seriesLabel"> +</div>'),$("#addSeries").fastClick(this.addSeries),$("#addSeries").tooltip(),$("#seriesControls").addClass("series"),$("#seriesControls .series-discard").html(i18n.swipe.seriesPanel.discard),$("#seriesControls .series-extentSave").html(i18n.swipe.seriesPanel.saveExtent),$(".series-discard").fastClick(u.discardBookmark),$(".series-extentSave").fastClick(u.saveBookmarkExtent);var a=new nicEditor({buttonList:["fontSize","fontFamily","bold","italic","underline","left","center","right","ul","html"]});a.setPanel("textEditPanel"),a.addInstance("descriptionTitle"),a.addInstance("descriptionContent"),a.addEvent("focus",function(){a.addEvent("blur",function(){u.checkText()})}),$(".nicEdit-main").parent().css("width","342px"),$(".nicEdit-main").css("width","330px"),$(".nicEdit-main").parent().css("border","none"),$(".series-extentSave").attr("disabled","disabled"),f(),u.started=!0}e?u.renderText(e[0]):u.renderText(null)},this.appIsReady=function(){r&&a(1)},this.setColor=function(e){$(t).css("background-color",e)},this.getButtonIndex=function(e){var t=/\d+/g,r=e.currentTarget.id.match(t);u.showSeries(r[0]),n.publish("SERIES_NAV_CHANGE",r[0])},this.showSeries=function(e){app.bookmarkIndex=e;var r;if(!(e>=0)){u.renderText(i[r]);return}r=e,$(t).find(".seriesButton").removeClass("selected"),$(t).find(".seriesButton").eq(r).addClass("selected"),u.renderText(i[r]);if($("#footerMobile").is(":visible"))return;$(".series-extentSave").attr("disabled","disabled"),a(2),f(),n.publish("CORE_UPDATE_EXTENT",i[r].extent)},this.addSeries=function(){var e=$(t).find(".seriesButton").length;app.bookmarkIndex=e,$("#seriesNav").append('<div id="series'+e+'" class="seriesButton" data-toggle="tooltip" data-placement="bottom" title data-original-title="Add Title"><p class="seriesLabel"> '+(e+1)+"</div>"),$("#series"+e).tooltip(),$(".seriesButton").removeClass("selected"),$(".seriesButton").eq(e).addClass("selected"),$(".seriesButton").eq(e).fastClick(u.getButtonIndex);var r=app.maps[0].extent,a={name:"",extent:r,description:""};i.push(a);var l=[],c={name:i18n.swipe.seriesPanel.title,extent:r,description:i18n.swipe.seriesPanel.descr};l.push(c),u.renderText(l[0]),$(".series-extentSave").attr("disabled","disabled"),o.once(app.maps[0],"extent-change",function(){$(".series-extentSave").removeAttr("disabled")}),f(),s.setSeriesBookmarks(i),app.mobileCarousel.needUpdate=!0,n.publish("BUILDER_INCREMENT_COUNTER")},this.discardBookmark=function(){var e=$(".seriesButton").index($(".selected"));i.splice(e,1),$(".seriesButton").eq(e).remove();for(var r=0;r<$(".seriesButton").length;r++){$(".seriesButton").eq(r).attr("id","series"+r);var o=$(".seriesButton").eq(r).find(".seriesLabel");o.text(r+1)}e==$(t).find(".seriesButton").length&&(e-=1),u.showSeries(e),s.setSeriesBookmarks(i),app.mobileCarousel.needUpdate=!0,n.publish("BUILDER_INCREMENT_COUNTER")},this.saveBookmarkExtent=function(){var e=$(".seriesButton").index($(".selected")),t=app.maps[0].extent;i[e].extent=t,s.setSeriesBookmarks(i),n.publish("BUILDER_INCREMENT_COUNTER"),$(".series-extentSave").attr("disabled","disabled")},this.renderText=function(e){if(!e){nicEditors.findEditor("descriptionTitle").setContent(""),nicEditors.findEditor("descriptionContent").setContent("");return}r?(nicEditors.findEditor("descriptionTitle").setContent(e.name||""),nicEditors.findEditor("descriptionContent").setContent(e.description||"")):($("#descriptionTitle").html(e.name||""),$("#descriptionContent").html(e.description||""))},this.checkText=function(){if($("#headerMobile").css("display")=="block")return;var e=$(".seriesButton").index($(".selected"));if(i[e].description==nicEditors.findEditor("descriptionContent").getContent()&&i[e].name==nicEditors.findEditor("descriptionTitle").getContent())return;i[e].name=nicEditors.findEditor("descriptionTitle").getContent(),i[e].name==i18n.swipe.seriesPanel.title&&(i[e].name=""),i[e].description==i18n.swipe.seriesPanel.descr&&(i[e].description=""),i[e].description=nicEditors.findEditor("descriptionContent").getContent(),$(".seriesButton").eq(e).attr("data-original-title",i[e].name),s.setSeriesBookmarks(i),n.publish("BUILDER_INCREMENT_COUNTER"),app.mobileCarousel.update(i,s.getColors());var t=!1;app.mobileCarousel.setDescriptionView(i[e].name,i[e].description,t)}}}),define("storymaps/swipe/core/MainView",["dojo/dom-construct","dojo/_base/window","storymaps/swipe/core/WebApplicationData","esri/geometry/Extent","esri/geometry/webMercatorUtils","storymaps/swipe/ui/desktop/SidePanel","storymaps/swipe/ui/mobile/MobileSwipeView","storymaps/swipe/ui/mobile/Carousel","storymaps/swipe/ui/MapSwipe","storymaps/swipe/ui/SpyGlass","storymaps/swipe/ui/desktop/SeriesPanel","storymaps/swipe/core/SwipeHelper","storymaps/utils/Helper","dojo/has","esri/dijit/Popup","esri/config","dojo/topic","dojo/on","dojo/Deferred","dojo/DeferredList"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){return function(){function E(e){app.bookmarkIndex=e,app.seriesPanel.showSeries(e);if(!$("#footerMobile").is(":visible"))return;app.maps[0].setExtent(n.getSeriesBookmarks()[e].extent)}var r=null,w=this;this.init=function(t){r=t;if(app.isInBuilderMode&&p("ie")&&p("ie")<9)return r.initError("noBuilderIE8"),!1;app.mapSwipe=new a("#mapPanel");var i=e.create("div",{id:"lensWidget"},"mapPanel");return app.spyGlass=new f(n.getWebmaps()[1],i),app.sidePanel=new s($("#sidePanel"),app.isInBuilderMode),app.seriesPanel=new l("#seriesPanel",app.isInBuilderMode),app.mobileInfoWindowView=new o("#infoWindowView","#infoWindowViewCarousel"),app.mobileLegendView=new o("#legendView","#legendViewCarousel"),app.mobileCarousel=new u("#footerMobile",app.isInBuilderMode),m.subscribe("CORE_UPDATE_EXTENT",function(e){app.maps[0].setExtent(e,!0)}),app.popup=[],app.popup[0]=new d({highlight:!0,offsetX:0},e.create("div")),app.popup[1]=new d({highlight:!0,offsetX:0},e.create("div")),$(document).bind("touchmove",function(e){$(e.target).parents("#legendPanel").length||e.preventDefault()}),!0},this.webmapLoaded=function(){var e=n.getColors(),t=n.getDescription(),i=n.getLegend(),s=n.getSidePanelDescription();loadingIndicator.setMessage(i18n.viewer.loading.step3),t==null&&(t=!0),i==null&&(i=!0),!s&&app.isInBuilderMode&&(s=i18n.builder.header.editMe),app.sidePanel.init(s,e[1],e[0],t,i,n.getLayers(),n.getSeries()||configOptions.series);if(p("ie")==undefined||p("ie")>8)app.mobileInfoWindowView.init([$("#infoView-mobile1"),$("#infoView-mobile0")],e[1]),app.mobileLegendView.init(["<div id='legendView2'></div>","<div id='legendView1'></div>"],e[1]),$("#legendView1").parent().css("overflow-y","auto"),$("#legendView2").parent().css("overflow-y","auto");var o=null;if(n.getSeries()||configOptions.series&&configOptions.bookmarks&&configOptions.bookmarks.length){var u=n.getSeriesBookmarks();o=u&&u.length?u[0].extent:null,app.seriesPanel.init(u,e[0]),$("#descriptionTitle").addClass("series"),$("#descriptionContent").addClass("series");if(p("ie")==undefined||p("ie")>8)app.mobileCarousel.init(u,e),app.mobileCarousel.setSelectedPoint(0),dojo.subscribe("CAROUSEL_SWIPE",E)}else $("#descriptionTitle").removeClass("series"),$("#descriptionContent").removeClass("series");$(window).resize(),w.setMapExtent(o||h.getWebMapExtentFromItem(app.data.getWebMapItem().item)).then(function(){if(app.maps.length==2&&app.maps[0].spatialReference.wkid!=app.maps[1].spatialReference.wkid){r.appInitComplete(),$("#projectionPopup").modal();return}n.getLayout()=="spyglass"?app.spyGlass.startup(n.getWebmaps()[1],$("#lensWidget"),n.getPopupColors(),n.getPopupTitles(),app.mode,n.getLayers(),!c.isOnMobileView()&&(t||i)?175:0,n.getPopup()):app.mapSwipe.init(app.maps,n.getLayers(),n.getPopupColors(),n.getPopupTitles(),!c.isOnMobileView()&&(t||i)?175:0,n.getPopup()),app.mode=="TWO_WEBMAPS"?g.once(app.maps[1],"extent-change",function(){setTimeout(function(){r.appInitComplete()},n.getLayout()=="spyglass"?3e3:1e3)}):setTimeout(function(){r.appInitComplete()},n.getLayout()=="spyglass"?2e3:500)})},this.appInitComplete=function(){r.displayApp(),m.publish("SWIPE_READY"),n&&!n.getLegend()&&!n.getDescription()&&!n.getSeries()||!configOptions.legend&&!configOptions.description&&!configOptions.series?($("#mainMap1_zoom_slider").addClass("closed"),$("#mainMap0_zoom_slider").addClass("closed"),$("#mainMap_zoom_location").addClass("closed")):($("#mainMap1_zoom_slider").addClass("open"),$("#mainMap0_zoom_slider").addClass("open"),$("#mainMap_zoom_location").addClass("open")),app.seriesPanel&&app.seriesPanel.appIsReady()},this.onHashChange=function(){$("#seriesTextView").hide(),$("#footerMobile").hide(),location.hash=="#swipe"?($("#leftViewLink").addClass("current"),app.mobileLegendView.show()):location.hash=="#list"?($("#rightViewLink").addClass("current"),app.mobileInfoWindowView.show()):location.hash=="#description"&&($("#seriesTextView").show(),$("#footerMobile").hide())},this.updateUI=function(){var e=n.getColors();app.sidePanel.update(e[1],e[0]),app.mobileInfoWindowView.update(e[1]),app.mobileLegendView.update(e[1])},this.resize=function(e){app.initInProgress&&($("#loadingOverlay").css("top",e.isMobileView?"0px":$("#header").height()),$("#header").css("display",e.isMobileView?"none":"block"),$("#fatalError").css("display",e.isMobileView?"block":"none")),e.isMobileView&&(location.hash=="#description"?location.hash="map":w.onHashChange()),n.getSeries()&&(e.isMobileView&&e.isOnMobileMapView&&($("#footerMobile").show(),$("#seriesPanel").hide(),app.mobileCarousel.started&&app.mobileCarousel.needUpdate&&app.mobileCarousel.update(n.getSeriesBookmarks(),n.getColors()),app.mobileCarousel.started&&!app.mobileCarousel.needUpdate&&app.mobileCarousel.setSelectedPoint(app.bookmarkIndex||0)),e.isMobileView&&!e.isOnMobileMapView?($("#footerMobile").hide(),$("#seriesPanel").hide()):e.isMobileView||($("#footerMobile").hide(),$("#seriesPanel").show())),n.getSeries()||($("#footerMobile").hide(),$("#seriesPanel").hide()),e.isMobileView==0&&($("#infoWindowView").css("display","none"),$("#legendView").css("display","none"),$("#footerMobile").hide(),$("#seriesTextView").hide()),app.sidePanel.resize(e.width,e.height)},this.centerMap=function(e,t){t?app.map.centerAndZoom(e,t):app.maps[0].centerAt(e)},this.setMapExtent=function(e){var t=new y,n=[];return $.each(app.maps,function(t,r){n.push(r.setExtent(e,!0))}),(new b(n)).then(function(){t.resolve()}),t},this.zoomToDeviceLocation=function(e,t){e&&(app.maps[0].spatialReference.wkid==102100?t=i.geographicToWebMercator(t):app.maps[0].spatialReference.wkid!=4326&&v.defaults.geometryService.project([t],app.maps[0].spatialReference,function(e){if(!e||!e[0])return;w.centerMap(e[0])}),w.centerMap(t))},this.initLocalization=function(){$("#infoWindowView .noData .title").html(i18n.swipe.mobileData.noData),$("#infoWindowView .noData .explain").html(i18n.swipe.mobileData.noDataExplain),$("#legendView .noData .title").html(i18n.swipe.mobileLegend.noLegend),$("#projectionPopup").find("h3").html(i18n.viewer.errors.conflictingProjectionsTitle),$(".projectionExplain").html(i18n.viewer.errors.conflictingProjections),$("#projectionPopup").find(".btnClose").html(i18n.viewer.errors.cpButton)}}}),define("storymaps/builder/BuilderPanel",["storymaps/swipe/core/WebApplicationData","storymaps/utils/Helper","dojo/topic"],function(e,t,n){return function(i,s){function f(){console.log("swipe.builder.Builder - save"),x(!1),y(),i.find(".builder-settings").popover("show"),s()}function l(t){t&&(x(!1),e.restoreOriginalData(),app.data.discardChanges(),d(),n.publish("CORE_UPDATE_UI"),x(!0)),i.find(".builder-discard").popover("hide")}function c(){v(),a.openSettingPopup(!1)}function h(e){e?document.location="?"+document.location.search.split("edit")[0].slice(1,-1):i.find(".builder-view").popover("hide")}function p(){window.open(t.getItemURL(configOptions.sharingurl,app.data.getAppItem().id),"_blank")}function d(){i.find("#save-counter").html(i18n.builder.builder.noPendingChange),i.find("#save-counter").css("color","#999"),b()}function v(){i.find(".discard-popover").length>0&&i.find(".builder-discard").popover("hide"),i.find(".view-popover").length>0&&i.find(".builder-view").popover("hide")}function m(){var e="#"+i.attr("id");i.find(".builder-discard").popover({trigger:"manual",placement:"bottom",html:!0,content:'<script> $("'+e+' .builder-discard").next(".popover").addClass("discard-popover");'+' $("'+e+' .builder-view").popover("hide");'+' $("'+e+' .builder-save").popover("hide");'+"</script>"+i18n.builder.builder.popoverDiscard+" "+'<button type="button" class="btn btn-danger btn-small" onclick="app.builder.discard(true)">'+i18n.builder.builder.yes+"</button> "+'<button type="button" class="btn btn-small" onClick="app.builder.discard(false)">'+i18n.builder.builder.no+"</button>"}),i.find(".builder-view").popover({trigger:"manual",html:!0,content:'<script> $("'+e+' .builder-view").next(".popover").addClass("view-popover");'+' $("'+e+' .builder-discard").popover("hide");'+' $("'+e+' .builder-save").popover("hide");'+"</script>"+i18n.builder.builder.popoverOpenViewExplain+" "+'<button type="button" class="btn btn-danger btn-small" onclick="app.builder.switchToView(true)">'+i18n.builder.builder.popoverOpenViewOk+"</button> "+'<button type="button" class="btn btn-small" onClick="app.builder.switchToView(false)">'+i18n.builder.builder.popoverOpenViewCancel+"</button>"}),i.find(".builder-save").popover({trigger:"manual",html:!0,content:'<script>setTimeout(function(){$("'+e+' .builder-save").next(".popover").css("margin-left", $("'+e+' > div").width() + 30).addClass("builderPanelPopover");}, 0);'+"</script>"+i18n.builder.builder.popoverSaveWhenDone+' <button type="button" class="btn btn-success btn-small" onclick="app.builder.closeBuilderSaveIntro()">'+i18n.builder.builder.gotIt+"</button> "}),i.find(".builder-view").attr("title",i18n.builder.builder.buttonView)}function g(){var e="#"+i.attr("id");i.find(".builder-settings").popover({containerId:e,html:!0,trigger:"manual",placement:"bottom",content:'<script>$("'+e+' .builder-settings").next(".popover").css("margin-left", "0px").addClass("settings-popover");'+'setTimeout(function(){$("'+e+' .builder-settings").next(".popover").css("margin-left", - ($(".builder-save").outerWidth()/2 + $(".builder-discard").outerWidth() + $(".builder-settings").outerWidth()/2+8));}, 0);'+'$("'+e+' .builder-settings").next(".popover").find(".stepSave").css("display", "block");'+'$("'+e+' .builder-settings").next(".popover").find(".stepSaved").css("display", "none");'+'$("'+e+' .builder-settings").next(".popover").find(".stepFailed").css("display", "none");'+"</script>"+'<div class="stepSave" style="margin-top: 3px">'+i18n.builder.builder.savingApplication+'... <img src="resources/icons/loader-upload.gif" class="addSpinner" alt="Uploading">'+"</div>"+'<div class="stepSaved">'+i18n.builder.builder.saveSuccess+" "+'<button type="button" class="btn btn-success btn-small" onclick="app.builder.hideSaveConfirmation()" style="vertical-align: 1px;">'+i18n.builder.builder.gotIt+"</button> "+"</div>"+'<div class="stepFailed" style="color: red;">'+i18n.builder.builder.saveError+" "+'<button type="button" class="btn btn-danger btn-small" onclick="app.builder.hideSaveConfirmation()" style="vertical-align: 1px;">'+i18n.builder.builder.gotIt+"</button> "+"</div>"})}function y(){i.find(".builder-save").popover("destroy"),u=!1}function b(){i.find(".builder-view").click(E),i.find(".builder-discard").click(w)}function w(){o.hasPendingChange()&&i.find(".builder-discard").popover("show")}function E(){o.hasPendingChange()?i.find(".builder-view").popover("show"):h(!0)}function S(){i.find(".builder-settings").popover("hide")}function x(e){i.find("div > button").attr("disabled",!e)}function T(){i.find("h4").html(i18n.builder.builder.panelHeader),i.find("button").eq(0).html(i18n.builder.builder.buttonSave),i.find("button").eq(1).html(i18n.builder.builder.buttonDiscard),i.find("button").eq(2).html(i18n.builder.builder.buttonSettings.toUpperCase()),i.find("button").eq(3).html('<img src="resources/icons/builder-view.png" style="vertical-align: -6px;" alt="'+i18n.builder.builder.buttonView+'" />'),i.find("button").eq(4).html('<i class="icon-file"></i>').attr("title",i18n.builder.builder.buttonItem),i.find("#save-counter").html(i18n.builder.builder.noPendingChange)}var o=this,u=!0,a=null;this.init=function(e){a=e,T(),i.show(),b(),m(),g(),app.builder.closeBuilderSaveIntro=y,app.builder.switchToView=h,app.builder.discard=l,app.builder.hideSaveConfirmation=S,i.find(".builder-save").click(f),i.find(".builder-settings").click(c),i.find(".builder-item").click(p)},this.saveSucceeded=function(){i.find(".builder-settings").next(".popover").find(".stepSave").css("display","none"),i.find(".builder-settings").next(".popover").find(".stepSaved").css("display","block"),setTimeout(function(){i.find(".builder-settings").popover("hide")},3500),v(),d(),x(!0)},this.saveFailed=function(){i.find(".builder-settings").next(".popover").find(".stepSave").css("display","none"),i.find(".builder-settings").next(".popover").find(".stepFailed").css("display","block"),x(!0)},this.hasPendingChange=function(){return i.find("#save-counter").html()&&i.find("#save-counter").html()!=i18n.builder.builder.noPendingChange},this.incrementSaveCounter=function(e){var t=i.find("#save-counter").html();o.hasPendingChange()||(t=0,u&&setTimeout(function(){i.find(".builder-save").popover("show")},250)),t==0?e==1||isNaN(parseInt(e))?t=i18n.builder.builder.unSavedChangeSingular:t=e+" "+i18n.builder.builder.unSavedChangePlural:t=parseInt(t)+(e?e:1)+" "+i18n.builder.builder.unSavedChangePlural,i.find("#save-counter").html(t),i.find("#save-counter").css("color","#FFF")},this.resize=function(){i.css("margin-left",$("body").width()/2-i.outerWidth()/2)}}}),define("storymaps/builder/SettingsPopup",["storymaps/swipe/core/WebApplicationData","dojo/topic"],function(e,t){return function(r,i,s){function c(){if($(this).hasClass("disabled"))return;m($(this).index())}function h(n){var r=[],i=-1;$.each(o,function(e,t){var n=t.save();n===!1&&(i=e),r.push(n)});var s=e.getLayout()!=r[0].layout||e.getDataModel()!=r[1].dataModel||e.getWebmaps().toString()!=r[1].webmaps.toString()||e.getLayers().toString()!=r[1].layers.toString()||e.getLegend()!=r[2].legend||e.getDescription()!=r[2].description||e.getSeries()!=r[2].series||e.getPopup()!=r[2].popup;if(n!==!0&&s)return p(),!1;if(i!=-1)return m(i),!1;t.publish("SETTINGS_POPUP_SAVE",{settings:r})}function p(){f.popover({html:!0,trigger:"manual",content:'<script>$("#settingsPopup .btnSave").next(".popover").addClass("savePopover");</script>'+i18n.swipe.settingsLayout.settingsSaveConfirm+' <button type="button" class="btn btn-success btn-small" onclick="app.builder.settingsPopupSaveConfirmationCallback(true);">'+i18n.builder.builder.popoverOpenViewOk+"</button> "}),f.popover("show")}function d(e){e&&h(!0),v()}function v(){f.popover("destroy"),$(r).modal("hide")}function m(e){u.removeClass("active disabled"),a.hide(),u.eq(e).addClass("active"),o[e].show(),a.eq(e).show()}var o=[],u=$(r).find(".tab"),a=$(r).find(".tab-content"),f=$(r).find(".btnSave"),l=$(r).find(".btnClose");u.click(c),f.click(h),this.init=function(e){o=e.getSettingsTab(u,a,f,{colorSchemes:i,defaultLogoURL:s}),app.builder.settingsPopupSaveConfirmationCallback=d},this.present=function(e,t){u.removeClass("disabled"),l.removeAttr("disabled"),$(".error-msg",r).hide(),$(".modal-header .close",r).attr("data-dismiss","modal"),$(".modal-footer .error",r).hide(),$.each(o,function(n,r){r.init(e[n],n==t)}),m(t?t:0),t?(u.addClass("disabled"),u.eq(t).removeClass("disabled"),l.attr("disabled","disabled"),$(".modal-header .close",r).attr("data-dismiss","none")):m(0),$(r).modal({keyboard:t==undefined})},this.initLocalization=function(){$(r).find("h3").html(i18n.builder.settings.settingsHeader),$.each(o,function(e,t){t&&t.initLocalization()}),$(r).find(".btnClose").html(i18n.builder.settings.modalCancel),$(r).find(".btnSave").html(i18n.builder.settings.modalApply),$(r).find(".error").html(i18n.builder.settings.tabError)}}}),define("storymaps/swipe/builder/SettingsPopupTabDataModel",["dojo/topic"],function(e){return function(n,r,i){function s(){return $(r).find(".dataModel-box.selected").index()==2?"TWO_WEBMAPS":"TWO_LAYERS"}function o(){var e=[$(r).find(".inputWebmapId1").val()];return $(r).find(".inputWebmapId2").val()&&e.push($(r).find(".inputWebmapId2").val()),e}function u(){s()!="TWO_WEBMAPS"?i.removeAttr("disabled"):$(r).find(".inputWebmapId2").val().length!=32?i.attr("disabled","disabled"):$(r).find(".inputWebmapId1").val()==$(r).find(".inputWebmapId2").val()?i.attr("disabled","disabled"):i.removeAttr("disabled")}function a(){return[$(r).find("#mapLayers").find(":selected").attr("value")]}function f(e){p($(e.target).parent().index()==2?1:0)}function l(e){if($(r).find("#mapLayers").children("option").length>0)return;var t=(app.maps[0].layerIds||[]).concat(app.maps[0].graphicsLayerIds);$.each(t,function(e,t){var n=app.maps[0].getLayer(t),i=n&&n.arcgisProps&&n.arcgisProps.title?n.arcgisProps.title:n&&n.name?n.name:t;if(!n||n._basemapGalleryLayerType=="basemap"||n._basemapGalleryLayerType=="reference")return;if(n.layerId>=0){var s=n.id.split("_").slice(0,-1).join("_");if($.inArray(s,app.maps[0].layerIds)>=0)return}$(r).find("#mapLayers").append('<option value="'+t+'">'+(i||t)+"</option>")});var n=$("#mapLayers").children("option").length-1;e&&e[0]&&$.each($("#mapLayers").children("option"),function(t,r){$(r).val()==e[0]&&(n=t)});var i=$(r).find("#mapLayers").find("option").eq(n).val();$(r).find("#mapLayers").val(i)}function c(e){e=e||[],$(r).find(".inputWebmapId1").val(e[0]),$(r).find(".inputWebmapId2").val(e[1])}function h(e){var t=e=="swipe"?i18n.swipe.settingsDataModel.settingsDataModelExplainSwipe:i18n.swipe.settingsDataModel.settingsDataModelExplainSpyGlass,n=e=="swipe"?i18n.swipe.settingsDataModel.settingsDataModelWebmapSwipeId1:i18n.swipe.settingsDataModel.settingsDataModelWebmapGlassId1,i=e=="swipe"?i18n.swipe.settingsDataModel.settingsDataModelWebmapSwipeId2:i18n.swipe.settingsDataModel.settingsDataModelWebmapGlassId2,s=e=="swipe"?i18n.swipe.settingsDataModel.settingsDataModel1Explain:i18n.swipe.settingsDataModel.settingsDataModel1SpyGlassExplain,o=e=="swipe"?i18n.swipe.settingsDataModel.settingsDataModel2Explain:i18n.swipe.settingsDataModel.settingsDataModel2SpyGlassExplain;$(r).find("p").html(t),$(r).find(".control-label[for=inputWebmapId1]").html(n+":"),$(r).find(".control-label[for=inputWebmapId2]").html(i+":"),$(r).find(".model1.alert").html(s),$(r).find(".model2.alert").html(o+' <a class="webmapidtooltip">'+i18n.swipe.settingsDataModel.settingsDataModel2HelpTitle+"</a>"),$(r).find(".webmapidtooltip").popover({trigger:"hover",placement:"bottom",html:!0,content:'<div style="text-align: center">'+i18n.swipe.settingsDataModel.settingsDataModel2HelpContent+'<img style="margin-top: 6px" src="resources/icons/tooltip-map-id.png" width="220px" height="128px"/>'+"</div>"})}function p(e){$(r).find(".dataModel-box").removeClass("selected"),$(r).find(".dataModel-box").eq(e?1:0).addClass("selected selectedDataModel"),$(r).find(".dataModel-box-content").removeClass("fade"),$(r).find(".dataModel-box-content").eq(e?0:1).addClass("fade"),u()}$(r).append($("#popupView-dataModel").children().clone()),$(r).find(".inputWebmapId2").keyup(u),$(r).find(".inputWebmapId2").blur(function(){$(window).scrollTop(0)}),$(r).find(".btnSelect").fastClick(f),e.subscribe("LAYOUT_CHANGE",h),this.init=function(e){p(e.dataModel=="TWO_WEBMAPS"?1:0),l(e.layers),c(e.webmaps),h(e.layout),u()},this.show=function(){},this.save=function(){return{dataModel:s(),webmaps:o(),layers:a()}},this.initLocalization=function(){$(n).html(i18n.swipe.settingsDataModel.settingsTabDataModel),$(r).find("p").html(i18n.swipe.settingsDataModel.settingsDataModelExplainSwipe),$(r).find(".model1").html(i18n.swipe.settingsDataModel.settingsDataModelOneMap),$(r).find(".model2").html(i18n.swipe.settingsDataModel.settingsDataModelTwoMaps),$(r).find(".dataModel-box .selectedDataModel").html(i18n.swipe.settingsDataModel.settingsDataModelSelected),$(r).find(".btnSelect").html(i18n.swipe.settingsDataModel.settingsDataModelSelect),$(r).find(".layersWarning").html(i18n.swipe.settingsDataModel.settingsDataModel1Warning)}}}),define("storymaps/swipe/builder/SettingsPopupTabLayout",["dojo/topic"],function(e){return function(n,r){function i(){return $(r).find(".layout-box.selected").index()==2?"spyglass":"swipe"}function s(t){var n=$(t.target).parent().index()==2?1:0;o(n),e.publish("LAYOUT_CHANGE",n==0?"swipe":"spyglass")}function o(t){$(r).find(".layout-box").removeClass("selected"),$(r).find(".layout-box").eq(t?1:0).addClass("selected"),e.publish("LAYOUT_CHANGE",t==0?"swipe":"spyglass")}$(r).append($("#popupView-layout").children().clone()),$(r).find(".layout-box button").fastClick(s),this.init=function(e){o(e.layout=="spyglass"?1:0)},this.show=function(){},this.save=function(){return{layout:i()}},this.initLocalization=function(){$(n).html(i18n.swipe.settingsLayout.settingsTabLayout),$(r).find("p").html(i18n.swipe.settingsLayout.settingsLayoutExplain),$(r).find(".layout-box:nth-child(2) div").html(i18n.swipe.settingsLayout.settingsLayoutSwipe),$(r).find(".layout-box:nth-child(2) img").attr("src","resources/icons/builder-layout-swipe.png"),$(r).find(".layout-box:nth-child(3) div").html(i18n.swipe.settingsLayout.settingsLayoutSpyGlass),$(r).find(".layout-box:nth-child(3) img").attr("src","resources/icons/builder-layout-spyglass.png"),$(r).find(".layout-box .selectedLayout").html(i18n.swipe.settingsLayout.settingsLayoutSelected),$(r).find(".layout-box button").html(i18n.swipe.settingsLayout.settingsLayoutSelect)}}}),define("storymaps/swipe/builder/SettingsPopupTabLegend",["dojo/topic","storymaps/swipe/core/WebApplicationData","dojo/DeferredList","dojo/string","esri/geometry/Extent","dojo/_base/lang"],function(e,t,n,r,i,s){return function(o,u){function a(){var e=r.substitute("resources/icons/builder-preview-${layout}-${series}-${descr}-${legend}.png",{layout:_layout=="swipe"?0:1,series:h()?1:0,descr:c()?1:0,legend:l()?1:0});h()?($(u).find('[value = "description"]').attr("disabled",!0),$(u).find('[value = "description"]').prop("checked",!1),$(".descriptionText").css("opacity",.5)):($(u).find('[value = "description"]').attr("disabled",!1),$(".descriptionText").css("opacity",1)),$(u).find(".uiSimImg").attr("src",e)}function f(e){_layout=e,a()}function l(){return $(u).find('[value = "legend"]').prop("checked")}function c(){return $(u).find('[value = "description"]').prop("checked")}function h(){return $(u).find('[value = "bookmarks"]').prop("checked")}function p(){return $(u).find('[value = "popup"]').prop("checked")}$(u).append($("#popupView-legend").children().clone()),$(u).find(".legendControls").change(a),e.subscribe("LAYOUT_CHANGE",f),_layout=null,this.init=function(e){$(u).find('[value = "legend"]').prop("checked",e.legend),$(u).find('[value = "description"]').prop("checked",e.description),$(u).find('[value = "bookmarks"]').prop("checked",!!e.bookmarks),$(u).find('[value = "popup"]').prop("checked",e.popup),a()},this.show=function(){},this.save=function(){var e=t.getSeriesBookmarks();return h()&&!t.getSeries()&&!e.length&&($.each(app.mapResponse,function(t,n){n.itemInfo.itemData.bookmarks&&n.itemInfo.itemData.bookmarks.length&&$.each(n.itemInfo.itemData.bookmarks,function(t,n){var r=s.clone(n);r.extent=new i(r.extent),e.push(r)})}),e.length||e.push({name:i18n.swipe.seriesPanel.title,extent:app.maps[0]._params.extent,description:i18n.swipe.seriesPanel.descr})),{legend:l(),description:c(),series:h(),bookmarks:e,popup:p()}},this.initLocalization=function(){$(o).html(i18n.swipe.settingsLegend.settingsTabLegend),$(u).find("p").html(i18n.swipe.settingsLegend.settingsLegendExplain),$(u).find(".legendText").html(i18n.swipe.settingsLegend.settingsLegendEnable),$(u).find(".descriptionText").html(i18n.swipe.settingsLegend.settingsDescriptionEnable),$(u).find(".bookmarksText").html(i18n.swipe.settingsLegend.settingsBookmarksEnable),$(u).find(".popupText").html(i18n.swipe.settingsLegend.settingsPopupDisable),$(u).find(".legendInfo").html('<a class="legendtooltip"><img src="resources/icons/builder-help.png" /></a>'),$(u).find(".seriesInfo").html('<a class="seriestooltip"><img src="resources/icons/builder-help.png" /></a>'),$(u).find(".legendtooltip").popover({trigger:"hover",placement:"right",html:!0,content:'<script>$(".legendtooltip").next(".popover").addClass("legendtooltip-popover");</script><div style="text-align: center">'+i18n.swipe.settingsLegend.settingsLegendHelpContent+'<img style="margin-top: 6px" src="resources/icons/tooltip-legend-configure.png" width="220px" height="123px"/>'+"</div>"}),$(u).find(".seriestooltip").popover({trigger:"hover",placement:"right",html:!0,content:'<script>$(".seriestooltip").next(".popover").addClass("seriestooltip-popover");</script>'+i18n.swipe.settingsLegend.settingsSeriesHelpContent}),$(u).find("#uiSimulator div").html(i18n.swipe.settingsLegend.preview)}}}),define("storymaps/swipe/builder/SettingsPopupTabSwipePopup",["dojo/topic"],function(e){return function(n,r){function i(){return[$(r).find(".selectPopup2").val(),$(r).find(".selectPopup1").val()]}function s(){return[$(r).find("#popup2Color").spectrum("get").toHex(),$(r).find("#popup1Color").spectrum("get").toHex()]}function o(e){var t=e=="swipe"?i18n.swipe.settingsSwipePopup.settingsSwipePopupSwipe1:i18n.swipe.settingsSwipePopup.settingsSwipePopupGlass2,n=e=="swipe"?i18n.swipe.settingsSwipePopup.settingsSwipePopupSwipe2:i18n.swipe.settingsSwipePopup.settingsSwipePopupGlass1;$(r).find(".popup1Title").html(t),$(r).find(".popup2Title").html(n)}$(r).append($("#popupView-popup").children().clone()),e.subscribe("LAYOUT_CHANGE",o),$(r).find(".selectPopup1").blur(function(){console.log("OOOO"),$(window).scrollTop(0)}),$(r).find(".selectPopup2").blur(function(){$(window).scrollTop(0)}),this.init=function(e){o(e.layout);var t=e.popupColors?e.popupColors[0]:"#"+configOptions.popupColors[0],n=e.popupColors?e.popupColors[1]:"#"+configOptions.popupColors[1];$(r).find("#popup2Color").spectrum({color:t,showButtons:!1,showPalette:!1,showSelectionPalette:!1,showPaletteOnly:!1,showInput:!0}),$(r).find("#popup1Color").spectrum({color:n,showButtons:!1,showPalette:!1,showSelectionPalette:!1,showPaletteOnly:!1,showInput:!0}),$(r).find(".selectPopup2").val(e.popupTitles?e.popupTitles[0]:""),$(r).find(".selectPopup1").val(e.popupTitles?e.popupTitles[1]:"")},this.show=function(){},this.save=function(){return{popupTitles:i(),popupColors:s()}},this.initLocalization=function(){$(n).html(i18n.swipe.settingsSwipePopup.settingsSwipePopup),$(r).find("p").html(i18n.swipe.settingsSwipePopup.settingsSwipePopupExplain),$(r).find(".popup1HeaderTitle").html(i18n.swipe.settingsSwipePopup.settingsSwipePopupTitle),$(r).find(".popup2HeaderTitle").html(i18n.swipe.settingsSwipePopup.settingsSwipePopupTitle),$(r).find(".popup1HeaderColor").html(i18n.swipe.settingsSwipePopup.settingsSwipePopupColor),$(r).find(".popup2HeaderColor").html(i18n.swipe.settingsSwipePopup.settingsSwipePopupColor)}}}),define("storymaps/swipe/builder/InitPopup",["storymaps/swipe/core/WebApplicationData","storymaps/swipe/builder/SettingsPopupTabDataModel","storymaps/swipe/builder/SettingsPopupTabLayout","storymaps/swipe/builder/SettingsPopupTabLegend","storymaps/swipe/builder/SettingsPopupTabSwipePopup","dojo/Deferred"],function(e,t,n,r,i,s){return function(u){function p(e){if($(this).hasClass("disabled"))return;m($(this).index("#initPopup .tab"))}function d(){var e=$("#initPopup .tab.active").index("#initPopup .tab");return e<3&&!h.hasClass("btn-success")?(m(++e),!1):v()}function v(){var t=a[0].save();if(!t)return m(0),!1;e.setLayout(t.layout);var n=a[1].save();if(!n)return m(1),!1;e.setWebmaps(n.webmaps),e.setDataModel(n.dataModel),e.setLayers(n.layers),configOptions.webmaps=n.webmaps;var r=a[2].save();if(!r)return m(2),!1;e.setLegend(r.legend),e.setDescription(r.description),e.setSeries(r.series),e.setSeriesBookmarks(r.bookmarks);var i=a[3].save();return i?(e.setPopupColors(i.popupColors),e.setPopupTitles(i.popupTitles),f.resolve(),!0):(m(2),!1)}function m(e){l.removeClass("active disabled"),c.hide(),l.eq(e).addClass("active"),a[e].show(),c.eq(e).show(),e==3&&$(u).find(".btnSave").html(i18n.swipe.initPopup.modalApply).removeClass("btn-primary").addClass("btn-success")}function g(){$(u).find("h3").html(i18n.swipe.initPopup.initHeader),$.each(a,function(e,t){t.initLocalization()}),$(u).find(".btnSave").html(i18n.swipe.initPopup.modalNext),$(u).find(".error").html(i18n.swipe.initPopup.tabError)}var a=[],f=null,l=$(u).find(".tab"),c=$(u).find(".tab-content"),h=$(u).find(".btnSave");l.click(p),h.click(d),this.init=function(){a=[new n(l.eq(0),c.eq(0)),new t(l.eq(1),c.eq(1),h),new r(l.eq(2),c.eq(2)),new i(l.eq(3),c.eq(3))],$("#initPopup").addClass("started"),g()},this.present=function(t,n){return f=new s,a[0].init({}),a[1].init({webmaps:e.getWebmaps(),layout:"swipe"}),a[2].init({}),a[3].init({layout:"swipe"}),m(0),$(u).modal({keyboard:!1}),f}}}),define("storymaps/utils/WebMapHelper",["esri/request","esri/renderers/jsonUtils","dojo/Deferred","dojo/_base/lang","dojo/_base/array"],function(e,t,n,r,i){return{prepareWebmapItemForCloning:function(e){i.forEach(e.itemData.baseMap.baseMapLayers,function(e){delete e.errors,delete e.layerObject,delete e.resourceInfo}),i.forEach(e.itemData.operationalLayers,function(e){delete e.errors,delete e.layerObject,delete e.resourceInfo,e.featureCollection&&e.featureCollection.layers&&i.forEach(e.featureCollection.layers,function(e){delete e.layerObject}),e.featureCollection&&e.featureCollection.featureSet&&e.featureCollection.featureSet.features&&i.forEach(e.featureCollection.featureSet.features,function(e){delete e._shape,delete e._graphicsLayer}),e.type=="CSV"&&e.featureCollection&&delete e.featureCollection,i.forEach(e.layers,function(e){delete e.drawingInfo,e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.renderer&&(e.layerDefinition.drawingInfo.renderer=t.fromJson(e.layerDefinition.drawingInfo.renderer).toJson())}),e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.renderer&&(e.layerDefinition.drawingInfo.renderer=t.fromJson(e.layerDefinition.drawingInfo.renderer).toJson())})}}}),define("storymaps/builder/Builder",["esri/arcgis/Portal","storymaps/swipe/core/WebApplicationData","storymaps/builder/BuilderPanel","storymaps/builder/SettingsPopup","storymaps/swipe/builder/InitPopup","storymaps/swipe/core/SwipeHelper","storymaps/utils/Helper","storymaps/utils/WebMapHelper","dojo/_base/lang","dojo/has","esri/IdentityManager","esri/request","dojo/topic","dojo/on"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){function y(e,t){d=e,v=t,$(document).ready(a.hitch(this,function(){console.log("swipe.builder.Builder - init");if(!o.getAppID(d.isProd())){console.error("swipe.builder.Builder - abort builder initialization, no appid supplied");return}$("body").addClass("builder-mode"),v.init(g),m.init(v),g.init(v),g.initLocalization(),h.subscribe("BUILDER_INCREMENT_COUNTER",m.incrementSaveCounter),h.subscribe("HEADER_EDITED",E),window.onbeforeunload=function(e){e=e||window.event;if(!m.hasPendingChange())return;return e&&(e.returnValue=i18n.builder.builder.closeWithPendingChange),i18n.builder.builder.closeWithPendingChange}})),app.cleanApp=L}function b(){m.resize(),v.resize()}function w(){var e=new i("#initPopup");return e.init(),e.present()}function E(e){e.src=="title"?e.value!=app.data.getWebMapItem().item.title?e.value!=t.getTitle()&&(t.setTitle(e.value),m.incrementSaveCounter()):t.setTitle(""):e.src=="subtitle"&&(e.value!=app.data.getWebMapItem().item.snippet&&e.value!=i18n.builder.header.editMe?e.value!=t.getSubtitle()&&(t.setSubtitle(e.value),m.incrementSaveCounter()):t.setSubtitle(""))}function S(){var n=C(),r=new e.Portal(n);p(l,"dialog-create",k),r.signIn().then(function(){var e=l.findCredential(n).userId,r=l.findCredential(n).token,i=a.clone(app.data.getAppItem());delete i.avgRating,delete i.modified,delete i.numComments,delete i.numRatings,delete i.numViews,delete i.size,i=a.mixin(i,{f:"json",token:r,overwrite:!0,text:JSON.stringify(t.get())});var s=c({url:n+"/sharing/content/users/"+e+(i.ownerFolder?"/"+i.ownerFolder:"")+"/addItem",handleAs:"json",content:i},{usePost:!0});s.then(x,N)},function(e){N("APP",e)})}function x(e){(!e||!e.success)&&N("APP");if(app.data.initialExtentHasBeenEdited){var t=C(),n=app.data.getWebMapItem().item,r=app.data.getWebMapItem().itemData,i=l.findCredential(t).userId,s=l.findCredential(t).token;u.prepareWebmapItemForCloning({itemData:r});var o={f:"json",item:n.item,title:n.title,tags:n.tags,extent:JSON.stringify(n.extent),text:JSON.stringify(r),type:n.type,typeKeywords:n.typeKeywords,overwrite:!0,thumbnailURL:n.thumbnailURL,token:s},a=c({url:t+"/sharing/content/users/"+i+(n.ownerFolder?"/"+n.ownerFolder:"")+"/addItem",handleAs:"json",content:o},{usePost:!0});a.then(T,N)}else T(e)}function T(e){e&&e.success?(m.saveSucceeded(),app.data.updateAfterSave()):N()}function N(e,t){m.saveFailed(),changeBuilderPanelButtonState(!0)}function C(){return configOptions.sharingurl.split("/sharing/")[0]}function k(){$(".esriSignInDialog").find("#dijitDialogPaneContentAreaLoginText").css("display","none"),$(".esriSignInDialog").find(".dijitDialogPaneContentArea:first-child").find(":first-child").first().after("<div id='dijitDialogPaneContentAreaAtlasLoginText'>"+i18n.builder.builder.signIn+" <a href='http://"+l._arcgisUrl+"' title='"+l._arcgisUrl+"' target='_blank'>"+l._arcgisUrl+"</a> "+i18n.builder.builder.signInTwo+"</div>"),p(l,"dialog-cancel",function(e){$("#builderPanel .builder-settings").popover("hide")})}function L(){var n=C(),r=new e.Portal(n);return p(l,"dialog-create",k),r.signIn().then(function(){var e=l.findCredential(n).userId,r=l.findCredential(n).token,i=a.clone(app.data.getAppItem());delete i.avgRating,delete i.modified,delete i.numComments,delete i.numRatings,delete i.numViews,delete i.size,i=a.mixin(i,{f:"json",token:r,overwrite:!0,text:JSON.stringify(t.getBlank())});var s=c({url:n+"/sharing/content/users/"+e+(i.ownerFolder?"/"+i.ownerFolder:"")+"/addItem",handleAs:"json",content:i},{usePost:!0});s.then(function(){console.log("Web Application data cleaned successfully")},function(){console.log("Web Application data cleaning has failed")})},function(e){console.error("Web Application data cleaning has failed",e)}),"Cleaning ..."}var d=null,v=null,m=new n($("#builderPanel"),S),g=new r($("#settingsPopup"),APPCFG.COLOR_SCHEMES,APPCFG.HEADER_LOGO_URL);return{init:y,resize:b,presentInitPopup:w}}),define("storymaps/builder/SettingsPopupTabColors",[],function(){return function(t,n,r){function u(){return $("input[name=groupColorSchemes]:checked",n).val()}function a(e){if(!e||!e[0]||!e[1])c(1);else{var t=!1;$.each(r,function(n,r){var i=e[0]==r.headerColor&&e[1]==r.panelColor;i&&(t=!0,c(n+1))}),t||c(r.length+1)}f()}function f(){l()==r.length?($(s).spectrum("enable"),$(o).spectrum("enable")):($(s).spectrum("disable"),$(o).spectrum("disable"))}function l(){var e=-1;return $(n).find(".controls tr td:nth-child(1) input").each(function(t,n){$(n).is(":checked")&&(e=t)}),e}function c(e){$(n).find(".controls tr:nth-child("+e+") td:nth-child(1) input").attr("checked","true")}function h(e){$(e).spectrum({showButtons:!1,color:APPCFG.COLORS[0],showPalette:!1,showSelectionPalette:!1,showPaletteOnly:!1,showInput:!0})}function p(){f();if(l()==r.length)$("#headerSimulator",n).css("background-color",$(s).val());else{var e=$.grep(r,function(e){return e.name==u()})[0];$("#headerSimulator",n).css("background-color",e.headerColor)}}function d(){if(!r)return;var e=$("<table></table>"),t;return $.each(r,function(n,r){if(!r.name||!r.headerColor||!r.panelColor)return;t=$("<tr></tr>");var i=$("<input type='radio' class='radio' name='groupColorSchemes'/>");$(i).attr("value",r.name);var s=$("<td></td>");$(s).append(i),$(t).append(s),$(t).append("<td><div class='swatch' style='background-color:"+r.headerColor+"'></div></td>"),$(t).append("<td><div class='swatch' style='background-color:"+r.panelColor+"'></div></td>"),$(e).append(t)}),t=$("<tr></tr>"),$(t).append("<td><input type='radio' class='radio' name='groupColorSchemes' value='schemeCustom'/></td>"),$(t).append("<td><input id='inputCustomHeaderColor' class='colorInput' type='custom'/></td>"),$(t).append("<td><input id='inputCustomMiddleColor' class='colorInput' type='custom'/></td>"),$(e).append(t),e}r.splice(0,0,{name:"Gray",headerColor:APPCFG.COLORS[0],panelColor:APPCFG.COLORS[1]});var i=d(),s=$(i).find("#inputCustomHeaderColor"),o=$(i).find("#inputCustomMiddleColor");h(s),h(o),$(n).find("#colorScheme .controls").append(i),$(s).spectrum("set",APPCFG.COLORS[0]),$(o).spectrum("set",APPCFG.COLORS[1]),$("input[name=groupColorSchemes]",i).click(p),this.init=function(e){a(e.colors);var t=$("input[name=groupColorSchemes]",n).length;$("input[name=groupColorSchemes]",n).eq(t-1).attr("checked")=="checked"&&($(s).spectrum("set",e.colors[0]),$(o).spectrum("set",e.colors[1]))},this.show=function(){},this.save=function(){var e=u(),t;if(e=="schemeCustom")t=[$(s).val(),$(o).val()];else{var n=$.grep(r,function(t){return t.name==e})[0];t=[n.headerColor,n.panelColor]}return{colors:t}},this.initLocalization=function(){$(t).html(i18n.builder.settingsColors.settingsTabColor),$(n).find("p").html(i18n.builder.settingsColors.settingsColorExplain),$(n).find(".control-label").html(i18n.builder.settingsColors.settingsLabelColor+":")}}}),define("storymaps/builder/SettingsPopupTabHeader",[],function(){return function(t,n,r){function u(){p()}function a(){}function f(){o=!0,$("#imgLogo",n).hide()}function l(e){if(e.keyCode==13)return o=!1,c(),!1;e.keyCode==8&&($("#logoTargetInput").focus(),$("#logoInput").focus())}function c(){var e=$.trim($("#logoInput",n).val());e&&($("#imgLogo",n).attr("src",e),$("#imgLogo",n).show())}function h(e){e.keyCode==8&&($("#logoInput").focus(),$("#logoTargetInput").focus())}function p(){var e=$("input[name=optionsLogo]:checked",n).val();$("#imgLogo",n).hide(),e=="custom"?c():e=="esri"&&($("#imgLogo",n).attr("src",r),$("#imgLogo",n).show())}var i=$(n).find("#logoInput"),s=$(n).find("#logoTargetInput"),o=!1;$(i).keydown(l),$(i).blur(c),$(s).keydown(h),$("input[type=radio]",n).click(u),$("#imgLogo",n).error(f),$("#imgLogo",n).load(a),this.init=function(e){var t=e.logoURL;i.attr("disabled","true"),s.attr("disabled","true"),$("input[name='optionsLogo']",$(n)).change(function(){var e=$("input[name='optionsLogo']:checked",$(n)).val();e=="none"||e=="esri"?(i.attr("disabled","true"),s.attr("disabled","true")):(i.removeAttr("disabled"),s.removeAttr("disabled"))}),$("#headerSimulator",n).css("background-color",e.colors[0]),t==null?($("input[name=optionsLogo]:eq(1)",n).attr("checked","checked"),i.val(""),s.val("")):t==r?($("input[name=optionsLogo]:eq(0)",n).attr("checked","checked"),$("#imgLogo",n).show(),i.val(""),s.val("")):($("input[name=optionsLogo]:eq(2)",n).attr("checked","checked"),$("#imgLogo",n).attr("src",t),$("#imgLogo",n).show(),$("#logoInput",n).val(t),s.val(e.logoTarget),i.removeAttr("disabled"),s.removeAttr("disabled")),$("#selectSocialText",n).val(e.linkText),$("#selectSocialLink",n).val(e.linkURL),$("#selectSocialText",n).blur(function(){$(window).scrollTop(0)}),$("#selectSocialLink",n).blur(function(){$(window).scrollTop(0)}),$("#logoInput",n).blur(function(){$(window).scrollTop(0)}),s.blur(function(){$(window).scrollTop(0)}),APPCFG.HEADER_SOCIAL.facebook?(!e.social||e.social.facebook)&&$(".enableFB",n).prop("checked",!0):$(".enableFB",n).attr("disabled","disabled").parent().addClass("disabled").attr("title",i18n.builder.settingsHeader.settingsLogoSocialDisabled),APPCFG.HEADER_SOCIAL.twitter?(!e.social||e.social.twitter)&&$(".enableTwitter",n).prop("checked",!0):$(".enableTwitter",n).attr("disabled","disabled").parent().addClass("disabled").attr("title",i18n.builder.settingsHeader.settingsLogoSocialDisabled),!APPCFG.HEADER_SOCIAL.bitly||!APPCFG.HEADER_SOCIAL.bitly.enable||!APPCFG.HEADER_SOCIAL.bitly.login||!APPCFG.HEADER_SOCIAL.bitly.key?$(".enableBitly",n).attr("disabled","disabled").parent().addClass("disabled").attr("title",i18n.builder.settingsHeader.settingsLogoSocialDisabled):(!e.social||e.social.bitly)&&$(".enableBitly",n).prop("checked",!0),p()},this.show=function(){},this.save=function(){var e=$("input[name=optionsLogo]:checked",n).val(),t,i;return e=="none"?(t=null,i=""):e=="esri"?(t=r,i=""):(t=o?r:$("#imgLogo",n).attr("src"),i=s.val()),{logoURL:t,logoTarget:i,linkText:$("#selectSocialText",n).val(),linkURL:$("#selectSocialLink",n).val(),social:{facebook:$(".enableFB").prop("checked"),twitter:$(".enableTwitter").prop("checked"),bitly:$(".enableBitly").prop("checked")}}},this.initLocalization=function(){$(t).html(i18n.builder.settingsHeader.settingsTabLogo),$(n).find("p").eq(0).html(i18n.builder.settingsHeader.settingsLogoExplain),$(n).find(".logoText").eq(0).html(i18n.builder.settingsHeader.settingsLogoEsri),$(n).find(".logoText").eq(1).html(i18n.builder.settingsHeader.settingsLogoNone),$(n).find(".logoText").eq(2).html(i18n.builder.settingsHeader.settingsLogoCustom),$(n).find("#logoInput").attr("placeholder",i18n.builder.settingsHeader.settingsLogoCustomPlaceholder),$(n).find("#logoTargetInput").attr("placeholder",i18n.builder.settingsHeader.settingsLogoCustomTargetPlaceholder),$(n).find("p").eq(1).html(i18n.builder.settingsHeader.settingsLogoSocialExplain),$(n).find(".control-label[for=selectSocialText]").html(i18n.builder.settingsHeader.settingsLogoSocialText+":"),$(n).find(".control-label[for=selectSocialLink]").html(i18n.builder.settingsHeader.settingsLogoSocialLink+":")}}}),define("storymaps/builder/SettingsPopupTabExtent",["storymaps/utils/Helper","esri/map","esri/toolbars/draw","esri/toolbars/edit","esri/layers/GraphicsLayer","esri/geometry/Extent","esri/graphic","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/geometry/webMercatorUtils","esri/SpatialReference","dojo/Deferred","esri/config","dojo/_base/Color","dojo/topic","dojo/on","dojo/_base/connect","dojo/_base/event"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){return function(b,w){function M(o){if(!app.maps)return;E&&E.destroy(),E=null,$(b).removeClass("alreadyOpened"),o||(o=new s({xmax:-57.98033474158346,xmin:-126.91406249996473,ymax:50.25667033538553,ymin:21.9430455334323,spatialReference:{wkid:4326}})),E=new t("extentMap",{slider:!0,center:o.getCenter(),extent:o.expand(2),autoResize:!1});var u=new i({id:"extentlayer"});v(E,"load",function(){k=new n(E),L=new r(E),m.connect(k,"onActivate",function(){u.clear(),L.deactivate(),C=!0}),m.connect(k,"onDrawEnd",function(e){D(e).then(function(t){P(t),u.add(_(e)),k.deactivate(),C=!1},function(){P(!0,!0)})}),v(L,"graphic-move-stop",function(e){D(e.graphic.geometry).then(function(e){P(e)},function(){P(!0,!0)})}),v(L,"scale-stop",function(e){D(e.graphic.geometry).then(function(e){P(e)},function(){P(!0,!0)})}),v(u,"click",function(e){C||(g.stop(e),L.activate(r.MOVE|r.SCALE,e.graphic))}),m.connect(u,"onMouseOver",function(){E.setMapCursor("pointer")}),m.connect(u,"onMouseOut",function(){E.setMapCursor("default")}),v(E,"click",function(){L.deactivate()})});var a=app.maps[0].getLayer(app.maps[0].layerIds[0]);E.addLayer(e.cloneLayer(a)),o.spatialReference.wkid!=a.spatialReference.wkid?h.defaults.geometryService.project([o],a.spatialReference).then(function(e){e&&e[0]&&(A=e[0],u.add(_(e[0])),E.addLayer(u))}):(u.add(_(o)),E.addLayer(u)),O=e.extentToPolygon(o)}function _(t){return new o(e.extentToPolygon(t),new u(u.STYLE_SOLID,new a(a.STYLE_DASHDOT,new p([255,0,0]),2),new p([255,255,0,.25])))}function D(e){var t=new c,n=function(e){t.resolve(e.xmin>0&&e.xmax<0||e.xmin>e.xmax),O=e};return e||t.reject(),e.type=="polygon"&&(e=e.getExtent()),e.spatialReference.wkid==102100&&(e=f.webMercatorToGeographic(e)),e.spatialReference.wkid!=4326?h.defaults.geometryService.project([e],new l(4326)).then(function(e){!e||!e[0]?t.reject():n(e[0])}):n(e),t}function P(e,t){$(w).find(".dateLineError").toggle(e).html(t?i18n.builder.settingsExtent.settingsExtentDateLineError2:i18n.builder.settingsExtent.settingsExtentDateLineError)}function H(){return E.getLayer("extentlayer")&&E.getLayer("extentlayer").graphics&&E.getLayer("extentlayer").graphics.length>0?E.getLayer("extentlayer").graphics[0]:null}var E=null,S=$(w).find("#extentDraw"),x=$(w).find("#extentModify"),T=$(w).find("#extentUseMainMap"),N=$(w).find("#extentApply"),C=!1,k=null,L=null,A=null,O=null;S.click(function(){k.activate(n.EXTENT)}),x.click(function(){var e=H();e&&L.activate(r.MOVE|r.SCALE,e)}),T.click(function(){k.deactivate(),C=!1;var e=E.getLayer("extentlayer");e.clear(),e.add(_(app.maps[0].extent)),E.setExtent(app.maps[0].extent.expand(2))}),N.click(function(){var e=H();e&&d.publish("CORE_UPDATE_EXTENT",e.geometry.getExtent())}),this.init=function(e){M(e.extent)},this.show=function(){$(b).hasClass("alreadyOpened")||(E.resize(),v.once(E,"update-end",function(){A?E.setExtent(A.expand(2)):E.centerAt(E.getLayer("extentlayer").graphics[0].geometry.getExtent().getCenter())}),$(b).addClass("alreadyOpened"))},this.save=function(){return $(w).find(".dateLineError").css("display")=="block"?!1:{extent:O.getExtent()}},this.initLocalization=function(){$(b).html(i18n.builder.settingsExtent.settingsTabExtent),$(w).find("p").html(i18n.builder.settingsExtent.settingsExtentExplain),$(w).find(".explain2").html(i18n.builder.settingsExtent.settingsExtentExplainBottom),$(w).find(".dateLineError").html(i18n.builder.settingsExtent.settingsExtentDateLineError),S.html(i18n.builder.settingsExtent.settingsExtentDrawBtn),x.html(i18n.builder.settingsExtent.settingsExtentModifyBtn),T.html(i18n.builder.settingsExtent.settingsExtentUseMainMap),N.html(i18n.builder.settingsExtent.settingsExtentApplyBtn)}}}),define("storymaps/swipe/builder/BuilderView",["storymaps/swipe/core/WebApplicationData","storymaps/builder/SettingsPopup","storymaps/utils/Helper","storymaps/swipe/builder/SettingsPopupTabDataModel","storymaps/swipe/builder/SettingsPopupTabLayout","storymaps/swipe/builder/SettingsPopupTabLegend","storymaps/swipe/builder/SettingsPopupTabSwipePopup","storymaps/builder/SettingsPopupTabColors","storymaps/builder/SettingsPopupTabHeader","storymaps/builder/SettingsPopupTabExtent","dojo/topic"],function(e,t,n,r,i,s,o,u,a,f,l){return function(){function p(t){console.log("settingsPopupSave data = ",t);var r=e.getLayout();e.setLayout(t.settings[0].layout),e.setDataModel(t.settings[1].dataModel),e.setWebmaps(t.settings[1].webmaps),e.setLayers(t.settings[1].layers),e.setLegend(t.settings[2].legend),e.setDescription(t.settings[2].description),e.setSeries(t.settings[2].series),e.setSeriesBookmarks(t.settings[2].bookmarks),e.setPopup(t.settings[2].popup),e.setPopupColors(t.settings[3].popupColors),e.setPopupTitles(t.settings[3].popupTitles),e.setColors(t.settings[4].colors[0],t.settings[4].colors[1]),e.setHeaderLink(t.settings[5].linkText,t.settings[5].linkURL);var i=t.settings[5].logoURL;i?i==APPCFG.HEADER_LOGO_URL?e.setLogoURL(null):e.setLogoURL(i):e.setLogoURL(c),e.setLogoTarget(t.settings[5].logoTarget),e.setSocial(t.settings[5].social);var s=n.serializeExtentToItem(t.settings[6].extent);n.serializedExtentEquals(s,app.data.getWebMapItem().item.extent)||(app.data.getWebMapItem().item.extent=s,app.data.initialExtentHasBeenEdited=!0),r=="swipe"?app.mapSwipe.updateSettings(e.getPopupColors(),e.getPopupTitles()):app.spyGlass.updateSettings(e.getPopupColors(),e.getPopupTitles()),l.publish("BUILDER_INCREMENT_COUNTER",1),l.publish("CORE_UPDATE_UI")}function d(){var t=e.getLogoURL();return t?t==c&&(t=null):t=APPCFG.HEADER_LOGO_URL,t}var c="NO_LOGO",h=null;this.init=function(e){h=e,l.subscribe("SETTINGS_POPUP_SAVE",p)},this.getSettingsTab=function(e,t,n,l){return[new i(e.eq(0),t.eq(0)),new r(e.eq(1),t.eq(1),n),new s(e.eq(2),t.eq(2)),new o(e.eq(3),t.eq(3)),new u(e.eq(4),t.eq(4),l.colorSchemes),new a(e.eq(5),t.eq(5),l.defaultLogoURL),new f(e.eq(6),t.eq(6))]},this.openSettingPopup=function(t){h.present([{layout:e.getLayout()},{dataModel:e.getDataModel(),layers:e.getLayers(),webmaps:e.getWebmaps(),layout:e.getLayout()},{legend:e.getLegend(),description:e.getDescription(),bookmarks:e.getSeries(),popup:e.getPopup()},{popupColors:e.getPopupColors(),popupTitles:e.getPopupTitles(),layout:e.getLayout()},{colors:e.getColors()},{logoURL:d(),logoTarget:e.getLogoTarget(),linkText:e.getHeaderLinkText()==undefined?APPCFG.HEADER_LINK_TEXT:e.getHeaderLinkText(),linkURL:e.getHeaderLinkURL()==undefined?APPCFG.HEADER_LINK_URL:e.getHeaderLinkURL(),colors:e.getColors(),social:e.getSocial()},{extent:n.getWebMapExtentFromItem(app.data.getWebMapItem().item)}])},this.resize=function(){}}}),require(["storymaps/ui/loadingIndicator/LoadingIndicator","storymaps/core/Core","storymaps/swipe/core/MainView","storymaps/builder/Builder","storymaps/swipe/builder/BuilderView"],function(){}),define("storymaps/swipe/BuildConfigBuilder",function(){});